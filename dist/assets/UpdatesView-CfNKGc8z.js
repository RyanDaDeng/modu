import{_ as C,p as V,r as d,o as D,c as o,d as a,e as _,F as g,f as p,g as N,L as T,t as v,N as B,i as s,s as b,x as j,j as F}from"./index-R3dXyy7_.js";import{_ as L}from"./ComicCard-Vk7YaCoR.js";import"./format-BZgmAhtB.js";const S={class:"min-h-screen bg-gray-900"},U={class:"container mx-auto px-2 sm:px-4 py-2 sm:py-6"},W={class:"bg-gray-800 rounded-lg p-2 sm:p-4 mb-4"},$={class:"flex gap-2 mb-3"},z=["onClick"],E={class:"flex overflow-x-auto gap-1 sm:gap-2 pb-1 -mx-2 px-2 sm:mx-0 sm:px-0 no-scrollbar"},I=["onClick"],M={key:0,class:"ml-1 text-[10px] sm:text-xs"},O={key:0,class:"flex justify-center py-12"},q={key:1},A={class:"text-lg sm:text-xl font-semibold text-white mb-3"},G={class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-6 2xl:grid-cols-7 gap-2 sm:gap-3 md:gap-4"},H={key:2,class:"text-center py-12"},J={name:"UpdatesView"},K=Object.assign(J,{setup(P){const y=[{label:"全部",value:"all"},{label:"日漫",value:"manga"},{label:"韩漫",value:"hanman"}],x=[{label:"周一",value:1},{label:"周二",value:2},{label:"周三",value:3},{label:"周四",value:4},{label:"周五",value:5},{label:"周六",value:6},{label:"周日",value:7},{label:"已完结",value:0}],u=V(()=>{const e=new Date().getDay();return e===0?7:e}),c=d("all"),i=d(u.value),r=d([]),n=d(!1),h=e=>{let l=null;return e.image&&e.image.startsWith("/media/")?l=null:e.image&&e.image.startsWith("http")&&(l=e.image),{id:e.id,name:e.name,title:e.name,author:e.author,image:l,category:e.category?.title||"",description:e.description,watched:e.liked?1:0,liked:e.liked?1:0,tags:[]}},m=async()=>{if(!n.value){n.value=!0,r.value=[];try{const e=await B(c.value,i.value,1);e?.list&&(r.value=e.list)}catch(e){console.error("Failed to load comics:",e)}finally{n.value=!1}}},f=e=>{c.value=e,m()},k=e=>{i.value=e,m()};return D(()=>{m()}),(e,l)=>(s(),o("div",S,[a("div",U,[l[1]||(l[1]=a("h1",{class:"text-xl sm:text-2xl font-bold text-white mb-4 sm:mb-6"},"每周更新",-1)),a("div",W,[a("div",$,[(s(),o(g,null,p(y,t=>a("button",{key:t.value,onClick:w=>f(t.value),class:b(["px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-xs sm:text-sm font-medium transition-all",c.value===t.value?"bg-pink-500 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},v(t.label),11,z)),64))]),a("div",E,[(s(),o(g,null,p(x,t=>a("button",{key:t.value,onClick:w=>k(t.value),class:b(["flex-shrink-0 px-2 sm:px-4 py-1 sm:py-2 rounded-md text-xs sm:text-sm font-medium transition-all whitespace-nowrap",i.value===t.value?"bg-pink-500 text-white":t.value===u.value?"bg-orange-500 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},[j(v(t.label)+" ",1),t.value===u.value?(s(),o("span",M," (今日) ")):_("",!0)],10,I)),64))])]),n.value?(s(),o("div",O,[N(T)])):r.value.length>0?(s(),o("div",q,[a("h2",A,v(x.find(t=>t.value===i.value)?.label)+"更新 ",1),a("div",G,[(s(!0),o(g,null,p(r.value,t=>(s(),F(L,{key:t.id,comic:h(t)},null,8,["comic"]))),128))])])):n.value?_("",!0):(s(),o("div",H,[...l[0]||(l[0]=[a("p",{class:"text-gray-400"},"暂无更新",-1)])]))])]))}}),Y=C(K,[["__scopeId","data-v-f5614d2b"]]);export{Y as default};
