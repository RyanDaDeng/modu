import{i as q,r as a,t as F,o as R,k as $,c as O,w as i,A as G,C as J,a as p,b as e,f as d,G as g,q as y,I as _,E as Y,d as k,e as L,P as h,J as m,O as v,aa as K,ab as Q}from"./index-CstFYGIV.js";import{u as W}from"./useNotification-Cpt0kBMz.js";import{C as X}from"./ConfirmationDialog-nP-EmNox.js";const Z={class:"relative"},ee={class:"relative z-10 container mx-auto px-4 py-8"},oe={class:"bg-gray-900/40 backdrop-blur-md rounded-2xl p-6 sm:p-8 border border-gray-800/50 shadow-2xl"},te={class:"flex flex-col sm:flex-row items-center sm:items-start gap-6"},le={class:"relative group"},se={class:"w-24 h-24 sm:w-28 sm:h-28 bg-gradient-to-br from-pink-500 to-rose-600 rounded-full flex items-center justify-center text-white font-bold text-3xl sm:text-4xl shadow-xl ring-4 ring-pink-500/30 group-hover:ring-pink-500/50 transition-all"},re={class:"flex-1 text-center sm:text-left"},ne={class:"text-2xl sm:text-3xl font-bold text-white mb-2 tracking-tight"},ae={class:"text-gray-400 text-sm mb-4 flex items-center justify-center sm:justify-start gap-2"},ie={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},de={key:1,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},ue={class:"font-medium"},ce={key:2,class:"text-xs opacity-70 border-l border-yellow-500/30 pl-2"},pe={class:"container mx-auto px-4 py-6"},ge={class:"bg-gray-900/30 backdrop-blur-sm rounded-xl overflow-hidden mb-6 border border-gray-800/50"},me={class:"divide-y divide-gray-700"},ve={class:"flex items-center gap-2"},fe={key:0,class:"text-xs bg-yellow-500 text-white px-2 py-0.5 rounded-full"},we={class:"space-y-4"},xe={class:"space-y-4"},Ce={__name:"ProfileView",setup(be){const f=$(),s=q(),M=W(),w=a(!1),u=a(!1),x=a(!1),b=a(!1),C=a(!1),n=a({name:"",email:""}),r=a({old_password:"",new_password:"",new_password_confirmation:""}),U=F(()=>s.user?.name?.charAt(0).toUpperCase()||"U"),c=()=>s.user?.vip_expired_at?new Date(s.user.vip_expired_at)>new Date:!1,P=l=>l?new Date(l).toLocaleDateString("zh-CN"):"",A=()=>{f.push("/vip")},D=()=>{f.push("/recharge-history")},S=()=>{n.value={name:s.user?.name||"",email:s.user?.email||""},w.value=!0},V=()=>{w.value=!1,n.value={name:"",email:""}},j=()=>{u.value=!0},H=()=>{u.value=!1},N=()=>{u.value=!1,r.value={old_password:"",new_password:"",new_password_confirmation:""},x.value=!0},B=()=>{x.value=!1,r.value={old_password:"",new_password:"",new_password_confirmation:""}},E=async()=>{try{const l=await K({name:n.value.name});l.success&&(s.user=l.user,V(),M.success("用户名更新成功！"))}catch(l){console.error("Failed to update profile:",l)}},I=async()=>{try{const l=await Q(r.value);l.success&&(B(),M.success(l.message||"密码修改成功！"))}catch(l){console.error("Failed to change password:",l)}},T=async()=>{await s.logout(),f.push("/")};return R(()=>{if(!s.isLoggedIn){f.push("/login");return}}),(l,o)=>{const z=J("router-link");return p(),O(G,{title:"个人中心","hide-breadcrumbs":!0},{default:i(()=>[e("div",Z,[o[19]||(o[19]=e("div",{class:"absolute inset-0 h-64 bg-cover bg-center",style:{"background-image":"url('/img_6.png')"}},[e("div",{class:"absolute inset-0 bg-gradient-to-b from-black/60 via-black/70 to-gray-900"})],-1)),e("div",ee,[e("div",oe,[e("div",te,[e("div",le,[e("div",se,g(U.value),1),o[13]||(o[13]=e("div",{class:"absolute inset-0 rounded-full bg-pink-500/20 blur-xl group-hover:bg-pink-500/30 transition-all"},null,-1))]),e("div",re,[e("h2",ne,g(y(s).user?.name||"用户"),1),e("p",ae,[o[14]||(o[14]=e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),e("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})],-1)),_(" "+g(y(s).user?.email),1)]),e("div",{class:Y(["inline-flex items-center gap-2 px-4 py-2 rounded-full backdrop-blur-sm",c()?"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 text-yellow-300 border border-yellow-500/30":"bg-gray-800/50 text-gray-400 border border-gray-700/50"])},[c()?(p(),k("svg",ie,[...o[15]||(o[15]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)])])):(p(),k("svg",de,[...o[16]||(o[16]=[e("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"},null,-1)])])),e("span",ue,g(c()?"VIP会员":"普通用户"),1),c()&&y(s).user?.vip_expired_at?(p(),k("span",ce,g(P(y(s).user.vip_expired_at)),1)):L("",!0)],2)]),e("div",{class:"flex gap-2 mt-4 sm:mt-0"},[e("button",{onClick:S,class:"p-2.5 bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 rounded-xl transition-all border border-gray-700/50 group cursor-pointer"},[...o[17]||(o[17]=[e("svg",{class:"w-5 h-5 text-gray-400 group-hover:text-pink-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),e("button",{onClick:j,class:"p-2.5 bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 rounded-xl transition-all border border-gray-700/50 group cursor-pointer"},[...o[18]||(o[18]=[e("svg",{class:"w-5 h-5 text-gray-400 group-hover:text-pink-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])])])])])])]),e("div",pe,[e("div",ge,[e("div",me,[d(z,{to:"/collection",class:"flex items-center justify-between p-4 hover:bg-gray-750 transition-colors cursor-pointer"},{default:i(()=>[...o[20]||(o[20]=[e("div",{class:"flex items-center gap-3"},[e("div",{class:"p-2 bg-pink-500/20 rounded-lg"},[e("svg",{class:"w-5 h-5 text-pink-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})])]),e("div",{class:"text-white font-medium"},"我的收藏")],-1),e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),_:1}),d(z,{to:"/reading-history",class:"flex items-center justify-between p-4 hover:bg-gray-750 transition-colors cursor-pointer"},{default:i(()=>[...o[21]||(o[21]=[e("div",{class:"flex items-center gap-3"},[e("div",{class:"p-2 bg-purple-500/20 rounded-lg"},[e("svg",{class:"w-5 h-5 text-purple-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.669 0-3.218.51-4.5 1.385V4.804z"})])]),e("div",{class:"text-white font-medium"},"阅读历史")],-1),e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),_:1}),e("button",{onClick:A,class:"w-full flex items-center justify-between p-4 hover:bg-gray-750 transition-colors cursor-pointer"},[o[23]||(o[23]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"p-2 bg-yellow-500/20 rounded-lg"},[e("svg",{class:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})])]),e("div",{class:"text-white font-medium"},"VIP会员")],-1)),e("div",ve,[c()?L("",!0):(p(),k("span",fe,"升级")),o[22]||(o[22]=e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]),e("button",{onClick:D,class:"w-full flex items-center justify-between p-4 hover:bg-gray-750 transition-colors cursor-pointer"},[...o[24]||(o[24]=[e("div",{class:"flex items-center gap-3"},[e("div",{class:"p-2 bg-gray-600/20 rounded-lg"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})])]),e("div",{class:"text-white font-medium"},"充值记录")],-1),e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),e("button",{onClick:j,class:"w-full flex items-center justify-between p-4 hover:bg-gray-750 transition-colors cursor-pointer"},[...o[25]||(o[25]=[e("div",{class:"flex items-center gap-3"},[e("div",{class:"p-2 bg-gray-600/20 rounded-lg"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})])]),e("div",{class:"text-white font-medium"},"账号设置")],-1),e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),e("button",{onClick:o[0]||(o[0]=t=>b.value=!0),class:"w-full flex items-center justify-between p-4 hover:bg-gray-750 transition-colors cursor-pointer"},[...o[26]||(o[26]=[e("div",{class:"flex items-center gap-3"},[e("div",{class:"p-2 bg-gray-600/20 rounded-lg"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])]),e("div",{class:"text-white font-medium"},"联系我们")],-1),e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])])]),e("button",{onClick:o[1]||(o[1]=t=>C.value=!0),class:"w-full py-3 bg-red-500/10 hover:bg-red-500/20 text-red-500 rounded-lg font-medium transition-colors cursor-pointer"}," 退出登录 ")]),d(h,{modelValue:w.value,"onUpdate:modelValue":o[4]||(o[4]=t=>w.value=t),icon:"info",title:"编辑资料","confirm-text":"保存","cancel-text":"取消","close-on-backdrop":!1,onConfirm:E,onCancel:V},{default:i(()=>[e("div",we,[e("div",null,[o[27]||(o[27]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"用户名",-1)),m(e("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>n.value.name=t),type:"text",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-pink-500",placeholder:"输入用户名"},null,512),[[v,n.value.name]])]),e("div",null,[o[28]||(o[28]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"邮箱",-1)),m(e("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>n.value.email=t),type:"email",class:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-400 cursor-not-allowed",placeholder:"输入邮箱",disabled:""},null,512),[[v,n.value.email]]),o[29]||(o[29]=e("p",{class:"text-xs text-gray-500 mt-1"},"邮箱暂不支持修改",-1))])])]),_:1},8,["modelValue"]),d(h,{modelValue:u.value,"onUpdate:modelValue":o[5]||(o[5]=t=>u.value=t),icon:"info",title:"账号设置","show-confirm":!1,"cancel-text":"关闭",onCancel:H},{default:i(()=>[e("button",{onClick:N,class:"w-full text-left p-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors"},[...o[30]||(o[30]=[e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-white"},"修改密码"),e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)])])]),_:1},8,["modelValue"]),d(h,{modelValue:x.value,"onUpdate:modelValue":o[9]||(o[9]=t=>x.value=t),icon:"lock",title:"修改密码","confirm-text":"确认修改","cancel-text":"取消","close-on-backdrop":!1,onConfirm:I,onCancel:B},{default:i(()=>[e("div",xe,[e("div",null,[o[31]||(o[31]=e("label",{class:"block text-gray-300 text-sm mb-1.5"},"旧密码",-1)),m(e("input",{"onUpdate:modelValue":o[6]||(o[6]=t=>r.value.old_password=t),type:"password",placeholder:"请输入当前密码",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 text-white rounded-lg focus:outline-none focus:border-pink-500 transition-colors",required:""},null,512),[[v,r.value.old_password]])]),e("div",null,[o[32]||(o[32]=e("label",{class:"block text-gray-300 text-sm mb-1.5"},"新密码",-1)),m(e("input",{"onUpdate:modelValue":o[7]||(o[7]=t=>r.value.new_password=t),type:"password",placeholder:"请输入新密码（至少8个字符）",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 text-white rounded-lg focus:outline-none focus:border-pink-500 transition-colors",required:"",minlength:"8"},null,512),[[v,r.value.new_password]])]),e("div",null,[o[33]||(o[33]=e("label",{class:"block text-gray-300 text-sm mb-1.5"},"确认新密码",-1)),m(e("input",{"onUpdate:modelValue":o[8]||(o[8]=t=>r.value.new_password_confirmation=t),type:"password",placeholder:"请再次输入新密码",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 text-white rounded-lg focus:outline-none focus:border-pink-500 transition-colors",required:"",minlength:"8"},null,512),[[v,r.value.new_password_confirmation]])])])]),_:1},8,["modelValue"]),d(h,{modelValue:b.value,"onUpdate:modelValue":o[10]||(o[10]=t=>b.value=t),icon:"info",title:"联系我们","show-confirm":!1,"cancel-text":"关闭",onCancel:o[11]||(o[11]=t=>b.value=!1)},{default:i(()=>[...o[34]||(o[34]=[e("div",{class:"text-center py-4"},[e("div",{class:"mb-4"},[e("svg",{class:"w-16 h-16 mx-auto text-blue-500",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"})])]),e("p",{class:"text-gray-300 mb-6"},"欢迎加入我们的Telegram群组获取支持"),e("a",{href:"https://t.me/+frktRDVHynY3OTA1",target:"_blank",class:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors"},[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"})]),_(" 加入Telegram群组 ")])],-1)])]),_:1},8,["modelValue"]),d(X,{modelValue:C.value,"onUpdate:modelValue":o[12]||(o[12]=t=>C.value=t),type:"warning",title:"退出登录",message:"确定要退出当前账号吗？","confirm-text":"退出","cancel-text":"取消","confirm-button-class":"bg-red-600 hover:bg-red-700 text-white",onConfirm:T},null,8,["modelValue"])]),_:1})}}};export{Ce as default};
