import{z as e,B as l,r as a,o as r,c as t,w as s,A as o,a2 as i,a as n,b as u,f as d,d as v,e as g,v as b,F as c,h as p,N as m,t as x,L as k}from"./index-BkfaYN6j.js";import{_ as y}from"./ComicCard-B_egKMFm.js";import{_ as f}from"./BottomDrawer-Cwq7I754.js";const h={class:"container mx-auto px-4 py-6"},w={class:"sm:hidden mb-4"},C={class:"bg-gradient-to-r from-pink-500/10 to-purple-500/10 rounded-xl p-[1px]"},j={class:"bg-gray-900/90 backdrop-blur-xl rounded-xl p-3"},V={class:"relative flex items-center justify-between bg-gray-800/90 backdrop-blur rounded-xl px-4 py-3 border border-gray-700 group-hover:border-pink-500/50 group-active:scale-[0.98] transition-all"},_={class:"flex items-center gap-3"},B={class:"text-left"},D={class:"text-sm font-medium text-white"},M={class:"flex gap-2 overflow-x-auto pb-1"},U=["onClick"],W={key:0,class:"ml-1"},z={class:"hidden sm:block relative mb-4"},A={class:"relative bg-gray-900/60 backdrop-blur-xl border border-white/10 rounded-lg p-4"},F={class:"flex gap-2 mb-4"},I=["onClick"],L={class:"flex gap-2 flex-wrap"},N=["onClick"],O={key:0,class:"ml-1 text-xs"},q={class:"px-4 pb-4"},E={class:"grid grid-cols-3 gap-2"},G=["onClick"],H={class:"px-4 pb-6"},J={class:"grid grid-cols-4 gap-2"},K=["onClick"],P={key:0,class:"ml-1 text-xs"},Q={key:0,class:"flex justify-center py-12"},R={key:1},S={class:"text-lg sm:text-xl font-semibold text-white mb-3"},T={class:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-6 2xl:grid-cols-7 gap-3 sm:gap-3 md:gap-4"},X={key:2,class:"text-center py-12"},Y={name:"UpdatesView"},Z=e(Object.assign(Y,{setup(e){const Y=[{label:"全部",value:"all"},{label:"日漫",value:"manga"},{label:"韩漫",value:"hanman"}],Z=[{label:"周一",value:1},{label:"周二",value:2},{label:"周三",value:3},{label:"周四",value:4},{label:"周五",value:5},{label:"周六",value:6},{label:"周日",value:7},{label:"已完结",value:0}],$=l(()=>{const e=(new Date).getDay();return 0===e?7:e}),ee=a("all"),le=a($.value),ae=a([]),re=a(!1),te=a(!1),se=l(()=>{const e=$.value,l=[];for(let a=-1;a<=2;a++){let r=e+a;r<=0&&(r=7+r),r>7&&(r-=7);const t=Z.find(e=>e.value===r);t&&l.push(t)}return l.push({label:"完结",value:0}),l}),oe=e=>{let l=null;return e.image&&e.image.startsWith("/media/")?l=null:e.image&&e.image.startsWith("http")&&(l=e.image),{id:e.id,name:e.name,title:e.name,author:e.author,image:l,category:e.category?.title||"",description:e.description,watched:e.liked?1:0,liked:e.liked?1:0,tags:[]}},ie=async()=>{if(!re.value){re.value=!0,ae.value=[];try{const e=await i(ee.value,le.value,1);e?.list&&(ae.value=e.list)}catch(e){}finally{re.value=!1}}},ne=e=>{le.value=e,ie()};return r(()=>{ie()}),(e,l)=>(n(),t(o,{title:"更新"},{default:s(()=>[u("div",h,[u("div",w,[u("div",C,[u("div",j,[u("button",{onClick:l[0]||(l[0]=e=>te.value=!0),class:"w-full mb-3 relative group"},[l[5]||(l[5]=u("div",{class:"absolute inset-0 bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-xl blur group-active:blur-xl transition-all"},null,-1)),u("div",V,[u("div",_,[l[3]||(l[3]=u("div",{class:"relative"},[u("svg",{class:"w-5 h-5 text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})]),u("div",{class:"absolute inset-0 bg-pink-400 blur-lg opacity-50 animate-pulse"})],-1)),u("div",B,[l[2]||(l[2]=u("div",{class:"text-xs text-gray-400 mb-0.5"},"当前筛选",-1)),u("div",D,b(Y.find(e=>e.value===ee.value)?.label)+" · "+b(Z.find(e=>e.value===le.value)?.label),1)])]),l[4]||(l[4]=u("div",{class:"flex items-center gap-2"},[u("span",{class:"text-xs text-pink-400 font-medium"},"点击修改"),u("div",{class:"bg-pink-500/20 rounded-lg p-1.5 group-hover:bg-pink-500/30 transition-colors"},[u("svg",{class:"w-4 h-4 text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])])],-1))])]),u("div",M,[(n(!0),v(c,null,p(se.value,e=>(n(),v("button",{key:e.value,onClick:l=>ne(e.value),class:m(["flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-medium transition-all",le.value===e.value?"bg-pink-500/20 text-pink-400 border border-pink-500/50":e.value===$.value?"bg-orange-500/20 text-orange-400 border border-orange-500/50":"bg-gray-800 text-gray-400 border border-gray-700"])},[x(b(e.label)+" ",1),e.value===$.value?(n(),v("span",W,"(今)")):g("",!0)],10,U))),128))])])])]),u("div",z,[l[6]||(l[6]=u("div",{class:"absolute inset-0 bg-gradient-to-r from-pink-500/10 via-purple-500/10 to-blue-500/10 rounded-lg blur-xl"},null,-1)),u("div",A,[u("div",F,[(n(),v(c,null,p(Y,e=>u("button",{key:e.value,onClick:l=>{return a=e.value,ee.value=a,void ie();var a},class:m(["px-4 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer",ee.value===e.value?"bg-pink-500/20 text-pink-400 border border-pink-500/50":"bg-gray-800/50 text-gray-300 hover:bg-gray-700/50 hover:text-white border border-gray-700"])},b(e.label),11,I)),64))]),u("div",L,[(n(),v(c,null,p(Z,e=>u("button",{key:e.value,onClick:l=>ne(e.value),class:m(["px-4 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer",le.value===e.value?"bg-pink-500/20 text-pink-400 border border-pink-500/50":e.value===$.value?"bg-orange-500/20 text-orange-400 border border-orange-500/50":"bg-gray-800/50 text-gray-300 hover:bg-gray-700/50 hover:text-white border border-gray-700"])},[x(b(e.label)+" ",1),e.value===$.value?(n(),v("span",O," (今日) ")):g("",!0)],10,N)),64))])])]),d(f,{modelValue:te.value,"onUpdate:modelValue":l[1]||(l[1]=e=>te.value=e),title:"选择筛选条件"},{default:s(()=>[u("div",q,[l[7]||(l[7]=u("div",{class:"text-sm text-gray-400 mb-3"},"类型",-1)),u("div",E,[(n(),v(c,null,p(Y,e=>u("button",{key:e.value,onClick:l=>{return a=e.value,ee.value=a,te.value=!1,void ie();var a},class:m(["py-3 rounded-lg text-sm font-medium transition-colors",ee.value===e.value?"bg-pink-500/20 text-pink-400 border border-pink-500/50":"bg-gray-800 text-gray-300 border border-gray-700"])},b(e.label),11,G)),64))])]),u("div",H,[l[8]||(l[8]=u("div",{class:"text-sm text-gray-400 mb-3"},"更新日期",-1)),u("div",J,[(n(),v(c,null,p(Z,e=>u("button",{key:e.value,onClick:l=>{return a=e.value,le.value=a,te.value=!1,void ie();var a},class:m(["py-3 rounded-lg text-sm font-medium transition-colors relative",le.value===e.value?"bg-pink-500/20 text-pink-400 border border-pink-500/50":e.value===$.value?"bg-orange-500/20 text-orange-400 border border-orange-500/50":"bg-gray-800 text-gray-300 border border-gray-700",0===e.value?"col-span-4":""])},[x(b(e.label)+" ",1),e.value===$.value?(n(),v("span",P,"(今)")):g("",!0)],10,K)),64))])])]),_:1},8,["modelValue"]),re.value?(n(),v("div",Q,[d(k)])):ae.value.length>0?(n(),v("div",R,[u("h2",S,b(Z.find(e=>e.value===le.value)?.label)+"更新 ",1),u("div",T,[(n(!0),v(c,null,p(ae.value,e=>(n(),t(y,{key:e.id,comic:oe(e)},null,8,["comic"]))),128))])])):re.value?g("",!0):(n(),v("div",X,[...l[9]||(l[9]=[u("p",{class:"text-gray-400"},"暂无更新",-1)])]))])]),_:1}))}}),[["__scopeId","data-v-e5c46f31"]]);export{Z as default};
