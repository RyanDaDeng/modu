import{j as v,d as c,a as u,b as e,C as p,G as f,X as y,u as b,r as d,f as w,e as x,I as k,M as _,Y as T,Z as R,$ as C}from"./index-CEdCuhTy.js";const S={class:"lg:hidden sticky top-0 sm:top-14 z-50 sm:z-30 bg-gray-800 shadow-lg"},$={class:"container mx-auto px-4"},D={class:"flex items-center justify-between h-14"},E={class:"text-sm sm:text-base"},U={class:"text-white font-semibold text-sm sm:text-lg truncate px-2 flex-1 text-center"},L={__name:"PageHeader",props:{title:{type:String,required:!0},backText:{type:String,default:"返回"},backTo:{type:String,default:null}},setup(m){const r=m,n=v(),a=()=>{r.backTo?n.push(r.backTo):n.back()};return(o,l)=>(u(),c("div",S,[e("div",$,[e("div",D,[e("button",{onClick:a,class:"flex items-center space-x-1 sm:space-x-2 text-white hover:text-pink-400 transition-colors flex-shrink-0 cursor-pointer"},[l[0]||(l[0]=e("svg",{class:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)),e("span",E,p(m.backText),1)]),e("h1",U,p(m.title),1),e("div",{class:f(["flex-shrink-0",o.$slots.action?"":"w-12 sm:w-14"])},[y(o.$slots,"action")],2)])])]))}},V={class:"bg-gray-900 min-h-screen"},B={class:"container mx-auto px-4 py-6"},N={class:"mb-6 bg-gray-800 rounded-lg p-4"},j={class:"flex flex-col sm:flex-row gap-2"},P={key:0,class:"text-white"},q={key:1,class:"bg-red-900/20 border border-red-800 rounded p-4 mb-4"},z={class:"text-red-400"},K={key:2,class:"bg-gray-800 rounded p-4 mb-4"},M={class:"text-green-400 text-xs overflow-auto"},W={key:3,class:"bg-gray-800 rounded p-4"},A={class:"text-blue-400 text-xs overflow-auto"},J="www.cdnmhwscc.vip",G={__name:"AlbumsTestView",setup(m){const r=b(),n=d(!1),a=d(""),o=d(null),l=d(null),g=d(""),h=async()=>{if(!g.value.trim()){a.value="Please enter a URL or endpoint";return}n.value=!0,a.value="",o.value=null,l.value=null;try{let t=g.value.trim();!t.startsWith("http://")&&!t.startsWith("https://")&&(t.startsWith("/")&&(t=t.substring(1)),t=`https://${J}/${t}`),console.log("Testing Custom URL:",t);const s=await R.get(t,{headers:{token:r.accessToken.token,tokenParam:r.accessToken.tokenParam},timeout:3e4});if(o.value=s.data,s.data&&s.data.data)try{const i=C(r.currentKey,s.data.data);l.value=i,console.log("Decrypted data:",i)}catch(i){console.error("Decryption error:",i),console.log("Could not decrypt, showing raw response")}}catch(t){console.error("Request error:",t),a.value=t.message,t.response&&(o.value=t.response.data)}finally{n.value=!1}};return(t,s)=>(u(),c("div",V,[w(L,{title:"测试页面"}),e("div",B,[e("div",N,[s[1]||(s[1]=e("h2",{class:"text-lg font-bold text-white mb-3"},"Custom URL Test",-1)),e("div",j,[k(e("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>g.value=i),type:"text",placeholder:"Enter custom endpoint (e.g., /albums?page=1 or full URL)",class:"flex-1 px-3 py-2 bg-gray-700 text-white rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-500",onKeyup:T(h,["enter"])},null,544),[[_,g.value]]),e("button",{onClick:h,class:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium"}," Test Custom URL ")]),s[2]||(s[2]=e("div",{class:"mt-2 text-xs text-gray-400"},[e("p",null,"Examples:"),e("ul",{class:"ml-4 space-y-1"},[e("li",null,"• /albums?page=1"),e("li",null,"• /categories?slug=doujin&page=2"),e("li",null,"• /search?query=test"),e("li",null,"• https://www.cdnmhwscc.vip/albums?o=mv")])],-1))]),n.value?(u(),c("div",P,"Loading...")):x("",!0),a.value?(u(),c("div",q,[e("p",z,"Error: "+p(a.value),1)])):x("",!0),o.value?(u(),c("div",K,[s[3]||(s[3]=e("h2",{class:"text-lg font-bold text-white mb-2"},"Raw Response:",-1)),e("pre",M,p(JSON.stringify(o.value,null,2)),1)])):x("",!0),l.value?(u(),c("div",W,[s[4]||(s[4]=e("h2",{class:"text-lg font-bold text-white mb-2"},"Decrypted Data:",-1)),e("pre",A,p(JSON.stringify(l.value,null,2)),1)])):x("",!0)])]))}};export{G as default};
