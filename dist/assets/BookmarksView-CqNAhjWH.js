import{i as e,C as t,r,o as a,c as s,w as o,A as l,l as i,M as n,a as c,b as d,d as u,v as p,x as m,f as h,L as f,F as v,h as x,I as g}from"./index-Dk5K0Uig.js";import{g as k,r as b}from"./bookmark-IoMaozf6.js";const w={class:"container mx-auto px-4 py-6"},y={class:"mb-6"},_={class:"flex justify-between items-center"},$={class:"text-gray-400"},M={class:"text-pink-500 font-medium"},C={key:0,class:"flex justify-center py-12"},j={key:1,class:"text-center py-12"},B={class:"max-w-md mx-auto"},L={key:2,class:"grid gap-4"},V={class:"flex items-start gap-4"},z=["src","alt"],A={class:"flex-1 min-w-0"},D={class:"text-lg font-bold text-white mb-1 group-hover/title:text-pink-400 transition-colors"},I={class:"text-sm text-gray-400 mb-2"},q={class:"flex flex-wrap items-center gap-4 text-xs text-gray-500"},E={class:"flex items-center gap-1"},F={class:"flex items-center gap-2 mt-3"},H=["onClick"],S={__name:"BookmarksView",setup(S){const G=i(),J=e(),K=t(),N=r([]),O=r(!1),P=e=>{const t=new Date(e),r=new Date-t,a=Math.floor(r/864e5);if(0===a){const e=Math.floor(r/36e5);if(0===e){const e=Math.floor(r/6e4);return 0===e?"刚刚":`${e}分钟前`}return`${e}小时前`}return 1===a?"昨天":a<7?`${a}天前`:a<30?`${Math.floor(a/7)}周前`:a<365?`${Math.floor(a/30)}个月前`:`${Math.floor(a/365)}年前`},Q=e=>{e.target.src="/default.jpeg"};return a(()=>{(async()=>{if(J.isLoggedIn){O.value=!0;try{const e=await k();N.value=e.data||[]}catch(e){401===e.response?.status?G.push("/login"):K.error("加载书签失败")}finally{O.value=!1}}else G.push("/login")})()}),(e,t)=>{const r=n("router-link");return c(),s(l,{title:"我的书签"},{default:o(()=>[d("div",w,[d("div",y,[d("div",_,[d("div",null,[t[2]||(t[2]=d("h1",{class:"text-2xl font-bold text-white mb-2"},"我的书签",-1)),d("p",$,[t[0]||(t[0]=p(" 共 ",-1)),d("span",M,m(N.value.length),1),t[1]||(t[1]=p(" 个书签 ",-1))])])])]),O.value?(c(),u("div",C,[h(f)])):N.value.length?(c(),u("div",L,[(c(!0),u(v,null,x(N.value,e=>(c(),u("div",{key:e.id,class:"relative group bg-gray-800/50 backdrop-blur-sm border border-white/10 rounded-xl p-4 hover:bg-gray-700/50 hover:border-white/20 transition-all"},[d("div",V,[h(r,{to:`/chapter/${e.comic_id}?chapter=${e.chapter_id}`,class:"flex-shrink-0 w-24 h-32 rounded-lg overflow-hidden bg-gray-900"},{default:o(()=>{return[d("img",{src:(t=e.comic_id,`${g()}/media/albums/${t}_3x4.jpg`),alt:e.comic_name,class:"w-full h-full object-cover",onError:Q},null,40,z)];var t}),_:2},1032,["to"]),d("div",A,[h(r,{to:`/chapter/${e.comic_id}?chapter=${e.chapter_id}`,class:"block group/title"},{default:o(()=>[d("h3",D,m(e.comic_name),1),d("p",I," 章节 "+m(e.chapter_id),1)]),_:2},1032,["to"]),d("div",q,[d("div",E,[t[7]||(t[7]=d("svg",{class:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),d("span",null,m(P(e.created_at)),1)])]),d("div",F,[h(r,{to:`/chapter/${e.comic_id}?chapter=${e.chapter_id}`,class:"inline-flex items-center px-3 py-1.5 bg-pink-500/20 hover:bg-pink-500/30 text-pink-400 rounded-lg text-sm font-medium transition-colors cursor-pointer"},{default:o(()=>[...t[8]||(t[8]=[d("svg",{class:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})],-1),p(" 继续阅读 ",-1)])]),_:2},1032,["to"]),d("button",{onClick:t=>(async e=>{if(confirm("确定要删除这个书签吗？"))try{await b(e),N.value=N.value.filter(t=>t.id!==e),K.success("书签已删除")}catch(t){K.error("删除失败")}})(e.id),class:"inline-flex items-center px-3 py-1.5 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg text-sm font-medium transition-colors cursor-pointer"},[...t[9]||(t[9]=[d("svg",{class:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),p(" 删除 ",-1)])],8,H)])])])]))),128))])):(c(),u("div",j,[d("div",B,[t[4]||(t[4]=d("svg",{class:"w-24 h-24 text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})],-1)),t[5]||(t[5]=d("h2",{class:"text-xl font-bold text-white mb-2"},"还没有书签",-1)),t[6]||(t[6]=d("p",{class:"text-gray-400 mb-6"},"在阅读漫画时点击书签按钮，即可保存当前章节位置",-1)),h(r,{to:"/latest",class:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-xl font-medium hover:from-pink-600 hover:to-purple-700 transition-all transform hover:scale-105 cursor-pointer"},{default:o(()=>[...t[3]||(t[3]=[p(" 浏览漫画 ",-1)])]),_:1})])]))])]),_:1})}}};export{S as default};
