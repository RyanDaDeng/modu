import{p as Lt,_ as zt,u as Pt,q as P,n as jt,r as u,i as Qe,o as Vt,l as Tt,c as ge,w as me,A as $t,s as We,t as Ht,v as Bt,x as Xe,y as D,j as Et,z as At,a as o,d as a,e as v,f as F,b as t,L as pe,B as oe,C as d,D as q,E as xe,F as ae,h as ne,G as M,H as fe,I as he,J as Rt,T as Dt,K as Ft,M as Se,N as Me,O as qt}from"./index-DAir1iQL.js";import{M as Ze}from"./ModalDialog-B-PHjeFC.js";function Nt(g,L){if(g>=220980&&g<268850)return 10;const k=Lt(g+L);let c=k.charCodeAt(k.length-1);return g>=268850&&g<=421925?c=c%10:c=c%8,c>=0&&c<=9?c*2+2:10}function Ut(g,L,k){if(L<220980||g.src.includes(".gif"))return g;const c=document.createElement("canvas"),_=c.getContext("2d");c.width=g.naturalWidth,c.height=g.naturalHeight;const r=Nt(L,k),C=Math.floor(c.height/r),I=c.height%r;_.drawImage(g,0,c.height-C-I,c.width,C+I,0,0,c.width,C+I);for(let T=0;T<r-1;T++)_.drawImage(g,0,C*(r-T-2),c.width,C,0,(T+1)*C+I,c.width,C);return c}function Yt(g,L,k){return`${g}/media/photos/${L}/${k}`}function et(){const g=new Date().getHours();return g<=3||g>=21?1:g>=18?3:5}const Ot={key:0,class:"flex justify-center items-center min-h-screen"},Kt={class:"flex flex-col items-center"},Gt={key:1},Jt={class:"relative"},Qt={class:"relative container mx-auto px-4 py-8"},Wt={class:"flex flex-col md:flex-row gap-6"},Xt={class:"w-32 sm:w-48 h-44 sm:h-64 flex-shrink-0 mx-auto md:mx-0"},Zt=["src","alt"],es={key:1,class:"w-full h-full bg-gray-700 rounded-lg animate-pulse"},ts={class:"flex-1 text-white text-center md:text-left"},ss={class:"text-xl sm:text-2xl md:text-3xl font-bold mb-3"},ls={class:"text-sm sm:text-base text-gray-300 mb-2"},os={class:"text-sm sm:text-base text-gray-300 mb-4"},as={class:"flex flex-wrap justify-center md:justify-start gap-3 sm:gap-6 mb-4"},ns={class:"flex items-center gap-1 sm:gap-2"},rs={class:"text-sm sm:text-base"},is={class:"text-gray-400 text-xs sm:text-sm"},us={class:"flex items-center gap-1 sm:gap-2"},cs={class:"text-sm sm:text-base"},ds={class:"flex items-center gap-1 sm:gap-2"},vs={class:"text-sm sm:text-base"},gs={key:0,class:"flex flex-wrap gap-2 mb-6"},ms=["onClick"],ps={key:1,class:"text-gray-300 mb-6 line-clamp-3"},xs={class:"container mx-auto px-4 py-6"},fs={class:"flex border-b border-gray-700 mb-6"},hs={class:"text-xs sm:text-sm"},ys={class:"bg-gray-800 rounded-xl p-4 sm:p-6"},bs={key:0,class:"space-y-4"},ws={key:0,class:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-6 gap-3"},ks=["onClick"],_s={class:"absolute -top-2 -right-2 z-10 pointer-events-none"},Cs={key:0,class:"inline-flex items-center px-2 py-0.5 text-xs font-bold bg-pink-500 text-white rounded-full"},Is={key:1,class:"inline-flex items-center px-2 py-0.5 text-xs font-bold bg-green-500 text-white rounded-full"},Ss={key:2,class:"inline-flex items-center px-2 py-0.5 text-xs font-bold bg-gradient-to-r from-yellow-500 to-yellow-600 text-white rounded-full animate-pulse"},Ms={key:1,class:"flex flex-col items-center gap-4"},Ls={key:0,class:"absolute -top-2 -right-2 z-10 pointer-events-none"},zs={class:"text-center text-gray-400 text-sm"},Ps={key:0},js={key:1,class:"space-y-4"},Vs={key:0,class:"space-y-4"},Ts={class:"flex-shrink-0"},$s=["src","alt"],Hs={class:"flex-1 min-w-0"},Bs={class:"flex items-center gap-2 mb-2"},Es={class:"font-semibold text-white text-sm sm:text-base truncate"},As={class:"text-xs text-gray-500"},Rs={class:"text-gray-300 text-sm sm:text-base break-words"},Ds={key:1,class:"text-center py-8 text-gray-500"},Fs={key:2,class:"flex justify-center py-8"},qs={key:0,class:"container mx-auto px-4 pb-6"},Ns={class:"bg-gray-800 rounded-lg p-4 sm:p-6"},Us={class:"grid grid-cols-3 lg:grid-cols-6 gap-3 md:gap-4"},Ys={class:"aspect-[3/4] relative overflow-hidden bg-gray-900"},Os=["src","alt"],Ks={class:"p-2 md:p-3"},Gs={class:"text-white font-medium text-xs md:text-sm mb-1 line-clamp-2 group-hover:text-pink-400 transition-colors"},Js={class:"text-gray-400 text-xs line-clamp-1 hidden md:block"},Qs={class:"container mx-auto"},Ws={class:"flex items-center justify-between px-3 sm:px-4 py-2"},Xs={class:"hidden sm:flex items-center gap-3 text-sm flex-1 justify-center"},Zs={class:"text-white font-semibold text-base"},el={class:"text-gray-400"},tl={class:"flex sm:hidden items-center text-xs flex-1 justify-center px-2 gap-2"},sl={class:"text-white font-semibold truncate"},ll={class:"text-gray-400"},ol={class:"flex items-center gap-1 sm:gap-2"},al={class:"h-0.5 bg-gray-800"},nl=["title"],rl={key:0,class:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 20 20"},il={key:1,class:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 20 20"},ul={key:1,class:"flex justify-center items-center h-screen"},cl={class:"flex flex-col items-center"},dl={key:2,class:"flex justify-center items-center h-screen"},vl={class:"bg-red-900/50 border border-red-700 rounded-lg p-6 text-center max-w-md"},gl={class:"text-red-400"},ml={key:3,class:"pt-10 pb-8 bg-black"},pl={class:"max-w-3xl sm:max-w-4xl lg:max-w-5xl mx-auto"},xl=["data-index"],fl={key:0,class:"flex items-center justify-center min-h-[300px] sm:min-h-[500px]"},hl={key:0,class:"flex flex-col items-center text-gray-400"},yl=["onClick"],bl=["src","alt"],wl={key:0,class:"mt-8 p-6 bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl border border-yellow-500/30"},kl={class:"text-center space-y-4"},_l={class:"text-gray-300"},Cl={class:"flex flex-col sm:flex-row gap-3 justify-center mt-6"},Il={key:1,class:"mt-8 flex justify-center"},Sl={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm p-2 sm:p-4"},Ml={class:"bg-gray-900 rounded-lg sm:rounded-xl max-w-sm w-full p-3 sm:p-6 border border-gray-700"},Ll={key:0,class:"mb-3 sm:mb-6"},zl={class:"block text-xs sm:text-sm font-medium text-gray-300 mb-1.5 sm:mb-2"},Pl={key:1,class:"mb-3 sm:mb-6 space-y-3 sm:space-y-4"},jl={class:"block text-xs sm:text-sm font-medium text-gray-300 mb-1.5 sm:mb-2"},Vl={class:"block text-xs sm:text-sm font-medium text-gray-300 mb-1.5 sm:mb-2"},Tl={class:"mb-3 sm:mb-6"},$l={class:"grid grid-cols-2 gap-1.5 sm:gap-2"},Hl={class:"text-[10px] sm:text-xs text-gray-500 mt-1 sm:mt-2"},Bl={class:"mb-3 sm:mb-6"},El={key:0},Al={key:1},Rl={class:"mb-3 sm:mb-6"},Dl=["disabled"],Fl={key:0},ql={key:1,class:"flex items-center justify-center gap-1 sm:gap-2"},Nl={class:"text-xs sm:text-sm"},Ul={__name:"ChapterView",setup(g){const L=jt(),k=Et(),c=Pt(),_=P(()=>L.params.id),r=u({}),C=u(!1),I=u([]),T=u(!1),z=u(!1),Le=u(""),ye=u(1),N=u(!0),$=u("chapters"),U=u(!1),b=u(null),ze=u(""),m=u([]),be=u(!1),ee=u(""),Y=u(0),H=u(0),Pe=u(0),we=u(!1),je=u(0),tt=u(null),O=u(!0),te=u(0),f=u(localStorage.getItem("autoScrollEnabled")==="true"),y=u(!0),K=u(parseInt(localStorage.getItem("autoScrollSpeed"))||50),j=u(localStorage.getItem("autoScrollMode")||"smooth"),G=u(parseFloat(localStorage.getItem("stepInterval"))||2),J=u(parseInt(localStorage.getItem("stepSize"))||150),p=u(null),ke=u(!1),B=u(!1);u({});const E=u(-1),se=u([]),Ve=u([]),w=u(null),st=u(null),lt=u(!1),Q=u(!1),W=u(!1);let _e=[],re=0,x=null;P(()=>C.value);const Te=P(()=>{const s=[...r.value.tags||[]],e=r.value.actors||[];return[...s,...e].filter(Boolean)}),ot=P(()=>{const s=r.value.likes||0,e=r.value.total_views||1;return Math.floor(s/e*100)}),$e=P(()=>m.value.length?Math.floor((H.value+1)/m.value.length*100):0),He=P(()=>{if(!b.value)return"";if(r.value.series?.length){const s=r.value.series.findIndex(e=>e.id==b.value);if(s>=0)return`第${s+1}章`}return"第1章"}),Be=P(()=>!r.value.series?.length||!b.value?!1:r.value.series.findIndex(e=>e.id==b.value)>0),Ee=P(()=>{if(!Be.value)return null;const s=r.value.series.findIndex(e=>e.id==b.value);return s>0?r.value.series[s-1].id:null}),Ce=P(()=>{if(!r.value.series?.length||!b.value)return!1;const s=r.value.series.findIndex(e=>e.id==b.value);return s>=0&&s<r.value.series.length-1}),Ae=P(()=>{if(!Ce.value)return null;const s=r.value.series.findIndex(e=>e.id==b.value);return s>=0&&s<r.value.series.length-1?r.value.series[s+1].id:null}),Ie=s=>`${Me()}/media/albums/${s}_3x4.jpg`,at=s=>!s||s==="nopic-Male.gif"?"/default.jpeg":`https://${c.primaryServer}/media/users/${s}`,Re=s=>{s.target.src="/default.jpeg"},nt=s=>{s.target.src="/default.jpeg"},rt=s=>`${Me()}/media/albums/${s}_3x4.jpg`,it=s=>{const e=document.createElement("DIV");return e.innerHTML=s,e.textContent||e.innerText||""},De=async()=>{T.value=!0,Le.value="";try{const s=await Ht(_.value);if(r.value=s,console.log("Album data:",s),c.isLoggedIn)try{const e=await Bt(_.value);C.value=e.is_collected||!1,console.log("Favorite status:",e)}catch(e){console.error("Failed to check favorite status:",e),C.value=!1}else C.value=!1;$.value==="comments"&&!I.value.length&&Ue(),await Fe()}catch(s){console.error("Failed to load comic info:",s),Le.value="加载失败，请稍后重试"}finally{T.value=!1}},Fe=async()=>{const s=await We.getByComicId(_.value);s&&(E.value=s.chapterIndex)},ut=async s=>{const e=_.value;let i="",l=-1;r.value.series?.length?(l=r.value.series.findIndex(n=>n.id==s),l>=0&&(i=`第${l+1}章`)):(l=0,i="单章节"),l>=0&&await We.add({comicId:e,comicTitle:r.value.name||"",chapterId:s,chapterTitle:i,chapterIndex:l,coverImage:Ie(e)}),E.value=l},ie=()=>c.user?.vip_expired_at?new Date(c.user.vip_expired_at)>new Date:!1,X=s=>c.isLoggedIn&&ie()?!1:r.value.series?.length?s>=3:!1,ct=(s,e)=>{console.log("Chapter clicked:",s,"Index:",e,"Locked:",X(e)),X(e)?c.isLoggedIn?W.value=!0:Q.value=!0:le(s)},dt=()=>{le(_.value,!0)},vt=()=>{ue(),k.push("/vip")},gt=()=>{Q.value=!1,k.push({path:"/login",query:{redirect:L.fullPath}})},mt=()=>{Q.value=!1,k.push({path:"/register",query:{redirect:L.fullPath}})},pt=()=>{W.value=!1,k.push("/vip")},le=async(s,e=!1)=>{if(Pe.value=window.scrollY,tt.value=s,O.value=!0,te.value=0,ut(s),b.value=s,U.value=!0,be.value=!0,ee.value="",m.value=[],Y.value=0,H.value=0,f.value&&(y.value=!0,p.value&&(clearInterval(p.value),p.value=null)),r.value.series?.length){r.value.series.find(l=>l.id==s);const i=r.value.series.findIndex(l=>l.id==s);ze.value=`${r.value.name} - 第${i+1}章`}else ze.value=r.value.name;try{const i=await qt(s);if(console.log("Chapter data for",s,":",i),i.images&&i.images.length){const l=c.isLoggedIn&&ie(),n=e&&!l,h=5,A=i.images,Z=n?A.slice(0,h):A;m.value=Z.map((S,R)=>({name:S,src:Yt(Me(),s,S),loaded:!1,loading:!1,error:!1,needProcess:parseInt(s)>=220980&&!S.includes(".gif"),index:R})),we.value=n,je.value=A.length,await D(),Ye(),qe()}else ee.value="没有找到章节内容"}catch(i){console.error("Failed to load chapter:",i),ee.value="加载失败，请稍后重试"}finally{be.value=!1}},xt=s=>{const e=s.target.scrollTop;e<te.value||e<50?O.value=!0:e>te.value&&e>50&&(O.value=!1),te.value=e,qe()},qe=()=>{if(!w.value||!se.value.length)return;const s=w.value,e=s.scrollTop,i=s.clientHeight,l=e+i/2;for(let n=0;n<se.value.length;n++){const h=se.value[n];if(h){const A=h.getBoundingClientRect(),Z=s.getBoundingClientRect(),S=A.top-Z.top+e,R=S+h.offsetHeight;if(l>=S&&l<=R){H.value=n;break}}}},ue=()=>{f.value&&!y.value&&(de(),y.value=!0),U.value=!1,b.value=null,m.value=[],Y.value=0,H.value=0,O.value=!0,te.value=0,x&&(x.disconnect(),x=null),D(()=>{window.scrollTo(0,Pe.value)})},Ne=()=>{Ae.value&&(f.value&&!y.value&&(de(),y.value=!0),m.value=[],Y.value=0,H.value=0,x&&(x.disconnect(),x=null),w.value&&w.value.scrollTo({top:0,behavior:"smooth"}),le(Ae.value))},ft=()=>{Ne()},ht=()=>{Ee.value&&(f.value&&!y.value&&(de(),y.value=!0),m.value=[],Y.value=0,H.value=0,x&&(x.disconnect(),x=null),w.value&&w.value.scrollTo({top:0,behavior:"smooth"}),le(Ee.value))},yt=()=>{b.value&&le(b.value)},Ue=async()=>{if(!z.value){z.value=!0,ye.value=1,I.value=[];try{const s=await Xe(_.value,1);console.log("Loaded comments:",s.length),I.value=s,N.value=s.length>=10,console.log("Has more comments:",N.value)}catch(s){console.error("Failed to load comments:",s)}finally{z.value=!1}}},bt=async()=>{if(!(z.value||!N.value)){z.value=!0;try{const s=ye.value+1;console.log("Loading more comments, page:",s);const e=await Xe(_.value,s);console.log("Loaded more comments:",e.length),e.length===0?N.value=!1:(ye.value=s,I.value.push(...e),N.value=e.length>=10)}catch(s){console.error("Failed to load more comments:",s)}finally{z.value=!1}}},ce=async s=>{const e=m.value[s];return!e||e.loaded||e.loading?Promise.resolve():new Promise(async i=>{e.loading=!0;const l=et();for(;re>=l;)await new Promise(n=>setTimeout(n,100));re++;try{const n=new Image;n.crossOrigin="anonymous",await new Promise((h,A)=>{n.onload=async()=>{if(e.needProcess){const Z=e.name.substring(0,5);console.log(`Processing image ${s} with page ${Z}`),await D();const S=Ve.value[s];if(S){const R=Ut(n,parseInt(b.value),Z);S.width=R.width,S.height=R.height,S.getContext("2d").drawImage(R,0,0)}}else e.displaySrc=n.src;e.loaded=!0,e.error=!1,Y.value++,h()},n.onerror=()=>{e.error=!0,A(new Error("Failed to load image"))},n.src=e.src})}catch(n){console.error(`Failed to load image ${s}:`,n),e.error=!0}finally{e.loading=!1,re--;const n=_e.shift();n!==void 0&&ce(n),i()}})},wt=s=>{m.value[s].error=!1,m.value[s].loaded=!1,ce(s)},Ye=()=>{x&&x.disconnect(),x=new IntersectionObserver(s=>{s.forEach(e=>{if(e.isIntersecting){const i=parseInt(e.target.dataset.index),l=m.value[i];if(!l.loaded&&!l.loading){const n=et();re<n?ce(i):_e.includes(i)||_e.push(i)}}})},{rootMargin:"200px"}),D(()=>{se.value.forEach((s,e)=>{s&&x.observe(s)})})},Oe=()=>{if(!U.value&&st.value){const s=window.pageYOffset||document.documentElement.scrollTop;lt.value=s>200}},Ke=s=>{s.key==="Escape"&&U.value&&ue()};Qe(_,()=>{De()}),Qe($,s=>{s==="comments"&&!I.value.length&&!z.value&&Ue()});const kt=s=>{k.push({path:"/search",query:{q:s}})},_t=()=>{f.value?V():ve()},Ct=()=>{y.value?(y.value=!1,It()):(y.value=!0,de())},de=()=>{p.value&&(clearInterval(p.value),p.value=null)},It=()=>{if(f.value)if(p.value&&clearInterval(p.value),j.value==="smooth")p.value=setInterval(()=>{if(!w.value)return;const s=w.value,e=s.scrollTop,i=s.scrollHeight-s.clientHeight;if(e>=i-10){V();return}const l=K.value/20,n=e+l;s.scrollTo({top:n,behavior:"auto"})},50);else{const s=G.value*1e3;p.value=setInterval(()=>{D(()=>{const e=w.value;if(!e)return;const i=e.scrollTop,l=e.scrollHeight-e.clientHeight;if(i>=l-10){V();return}e.scrollBy({top:J.value,behavior:"smooth"})})},s)}},St=()=>{localStorage.setItem("autoScrollSpeed",K.value.toString()),f.value&&(V(),ve())},Ge=s=>{j.value=s,localStorage.setItem("autoScrollMode",s),f.value&&(V(),ve())},Je=()=>{localStorage.setItem("stepInterval",G.value.toString()),localStorage.setItem("stepSize",J.value.toString()),f.value&&j.value==="stepped"&&(V(),ve())},ve=()=>{if(f.value=!0,y.value=!1,localStorage.setItem("autoScrollEnabled","true"),p.value&&clearInterval(p.value),j.value==="smooth")p.value=setInterval(()=>{if(!w.value)return;const s=w.value,e=s.scrollTop,i=s.scrollHeight-s.clientHeight;if(e>=i-10){V();return}const l=K.value/20,n=e+l;s.scrollTo({top:n,behavior:"auto"})},50);else{const s=G.value*1e3;p.value=setInterval(()=>{D(()=>{const e=w.value;if(!e)return;const i=e.scrollTop,l=e.scrollHeight-e.clientHeight;if(i>=l-10){V();return}e.scrollBy({top:J.value,behavior:"smooth"})})},s)}},V=()=>{f.value=!1,y.value=!1,localStorage.setItem("autoScrollEnabled","false"),p.value&&(clearInterval(p.value),p.value=null)},Mt=async()=>{if(!(!m.value.length||B.value)){B.value=!0;try{x&&x.disconnect();const s=[];if(m.value.forEach((i,l)=>{!i.loaded&&!i.loading&&!i.error&&s.push(l)}),s.length===0){B.value=!1;return}console.log(`Loading ${s.length} images...`);const e=5;for(let i=0;i<s.length;i+=e){const l=s.slice(i,i+e);await Promise.all(l.map(n=>new Promise(h=>{ce(n).finally(()=>h())}))),i+e<s.length&&await new Promise(n=>setTimeout(n,100))}console.log("All images loaded successfully"),await D(),Ye()}catch(s){console.error("Failed to load all images:",s)}finally{B.value=!1}}};return Vt(()=>{Fe(),De(),window.addEventListener("scroll",Oe),window.addEventListener("keydown",Ke)}),Tt(()=>{V(),x&&x.disconnect(),window.removeEventListener("scroll",Oe),window.removeEventListener("keydown",Ke)}),(s,e)=>{const i=At("router-link");return o(),ge($t,{title:r.value.name||"加载中...","show-bottom-nav":!1,"hide-breadcrumbs":!0},{default:me(()=>[T.value?(o(),a("div",Ot,[t("div",Kt,[F(pe)])])):U.value?v("",!0):(o(),a("div",Gt,[t("div",Jt,[r.value.id?(o(),a("div",{key:0,class:"absolute inset-0 h-96 bg-cover bg-center blur-xl opacity-30",style:oe({backgroundImage:`url(${Ie(r.value.id)})`})},null,4)):v("",!0),t("div",Qt,[t("div",Wt,[t("div",Xt,[r.value.id?(o(),a("img",{key:0,src:Ie(r.value.id),alt:r.value.name,class:"w-full h-full object-cover rounded-lg shadow-2xl",onError:Re},null,40,Zt)):(o(),a("div",es))]),t("div",ts,[t("h2",ss,d(r.value.name),1),t("p",ls,"作者: "+d(r.value.author?.join(" & ")||"未知"),1),t("p",os,"ID: "+d(_.value),1),t("div",as,[t("div",ns,[e[15]||(e[15]=t("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 text-pink-400",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"})],-1)),t("span",rs,d(q(xe)(r.value.likes||0)),1),t("span",is,"("+d(ot.value)+"%)",1)]),t("div",us,[e[16]||(e[16]=t("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),t("path",{"fill-rule":"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"})],-1)),t("span",cs,d(q(xe)(r.value.total_views||0)),1)]),t("div",ds,[e[17]||(e[17]=t("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z","clip-rule":"evenodd"})],-1)),t("span",vs,d(q(xe)(r.value.comment_total||0)),1)])]),Te.value.length?(o(),a("div",gs,[(o(!0),a(ae,null,ne(Te.value,l=>(o(),a("span",{key:l,onClick:n=>kt(l),class:"px-3 py-1 bg-gray-700/50 backdrop-blur rounded-full text-sm hover:bg-gray-600 transition-colors cursor-pointer"},d(l),9,ms))),128))])):v("",!0),r.value.description?(o(),a("p",ps,d(r.value.description),1)):v("",!0)])])])]),t("div",xs,[t("div",fs,[t("button",{onClick:e[0]||(e[0]=l=>$.value="chapters"),class:M(["px-4 sm:px-6 py-3 font-semibold transition-colors text-sm sm:text-base",$.value==="chapters"?"text-pink-500 border-b-2 border-pink-500":"text-gray-400 hover:text-white"])}," 章节选择 ",2),t("button",{onClick:e[1]||(e[1]=l=>$.value="comments"),class:M(["px-4 sm:px-6 py-3 font-semibold transition-colors flex items-center gap-2 text-sm sm:text-base",$.value==="comments"?"text-pink-500 border-b-2 border-pink-500":"text-gray-400 hover:text-white"])},[e[18]||(e[18]=fe(" 评论 ",-1)),t("span",hs,"("+d(q(xe)(r.value.comment_total||0))+")",1)],2)]),t("div",ys,[$.value==="chapters"?(o(),a("div",bs,[r.value.series?.length?(o(),a("div",ws,[(o(!0),a(ae,null,ne(r.value.series,(l,n)=>(o(),a("button",{key:l.id,onClick:h=>ct(l.id,n),class:M(["relative px-4 py-3 rounded-lg transition-all text-center cursor-pointer transform hover:scale-105 group border",[n===E.value?"bg-pink-900/30 border-pink-500 hover:bg-pink-800/40 hover:border-pink-400":X(n)?"bg-gray-800 hover:bg-gray-700 hover:shadow-lg border-gray-700 hover:border-yellow-500":"bg-gray-700 hover:bg-gray-600 hover:shadow-lg border-gray-700 hover:border-green-500"]])},[t("div",_s,[n===E.value?(o(),a("span",Cs," 上次阅读 ")):!q(c).isLoggedIn&&n<3?(o(),a("span",Is," 免费 ")):X(n)?(o(),a("span",Ss,[...e[19]||(e[19]=[t("svg",{class:"w-3 h-3 mr-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1),fe(" VIP ",-1)])])):v("",!0)]),t("div",{class:M(["font-semibold transition-colors",{"text-pink-300 group-hover:text-pink-200":n===E.value,"text-gray-400 group-hover:text-yellow-400":n!==E.value&&X(n),"text-white group-hover:text-green-400":n!==E.value&&!X(n)}])}," 第"+d(n+1)+"章 ",3)],10,ks))),128))])):(o(),a("div",Ms,[t("button",{onClick:e[2]||(e[2]=l=>dt()),class:"relative px-8 py-4 bg-pink-500 hover:bg-pink-600 rounded-lg transition-all flex items-center gap-3 cursor-pointer transform hover:scale-105 group hover:shadow-lg"},[ie()?v("",!0):(o(),a("div",Ls,[...e[20]||(e[20]=[t("span",{class:"inline-flex items-center px-2 py-0.5 text-xs font-bold bg-green-500 text-white rounded-full"}," 免费预览 ",-1)])])),e[21]||(e[21]=t("svg",{class:"w-6 h-6 text-white transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})],-1)),e[22]||(e[22]=t("span",{class:"text-lg font-semibold text-white"}," 开始阅读 ",-1))]),t("div",zs,[ie()?v("",!0):(o(),a("p",Ps,[...e[23]||(e[23]=[t("span",{class:"text-green-400"},"✨ 免费预览前5页",-1),t("span",{class:"mx-2"},"•",-1),t("span",null,"VIP可阅读完整内容",-1)])])),q(c).isLoggedIn?(o(),a("button",{key:2,onClick:e[3]||(e[3]=l=>W.value=!0),class:"text-yellow-500 hover:text-yellow-400 font-medium"}," 成为VIP ")):(o(),ge(i,{key:1,to:"/login",class:"text-pink-500 hover:text-pink-400 font-medium"},{default:me(()=>[...e[24]||(e[24]=[fe(" 立即登录 ",-1)])]),_:1}))])]))])):v("",!0),$.value==="comments"?(o(),a("div",js,[I.value.length?(o(),a("div",Vs,[(o(!0),a(ae,null,ne(I.value,l=>(o(),a("div",{key:l.id,class:"bg-gray-900 rounded-lg p-4 flex gap-4"},[t("div",Ts,[t("img",{src:at(l.photo),alt:l.username,class:"w-10 h-10 sm:w-12 sm:h-12 rounded-full object-cover bg-gray-700",onError:nt},null,40,$s)]),t("div",Hs,[t("div",Bs,[t("span",Es,d(l.username),1),t("span",As,d(l.addtime),1)]),t("p",Rs,d(it(l.content)),1)])]))),128))])):z.value?v("",!0):(o(),a("div",Ds," 暂无评论 ")),z.value?(o(),a("div",Fs,[F(pe)])):v("",!0),N.value&&!z.value?(o(),a("button",{key:3,onClick:bt,class:"w-full py-3 bg-pink-600 hover:bg-pink-700 text-white rounded-lg font-medium transition-colors cursor-pointer"}," 加载更多评论 ")):v("",!0)])):v("",!0)])]),r.value.related_list&&r.value.related_list.length>0?(o(),a("div",qs,[t("div",Ns,[e[27]||(e[27]=t("h2",{class:"text-xl font-bold text-white mb-4 flex items-center gap-2"},[t("svg",{class:"w-6 h-6 text-pink-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 14v6m-3-3h6M6 10h2a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2zm10 0h2a2 2 0 002-2V6a2 2 0 00-2-2h-2a2 2 0 00-2 2v2a2 2 0 002 2zM6 20h2a2 2 0 002-2v-2a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2z"})]),fe(" 相关推荐 ")],-1)),t("div",Us,[(o(!0),a(ae,null,ne(r.value.related_list.slice(0,12),l=>(o(),ge(i,{key:l.id,to:`/chapter/${l.id}`,class:"group relative bg-gray-800 rounded-lg overflow-hidden hover:shadow-xl hover:shadow-pink-500/20 transition-all duration-300 cursor-pointer"},{default:me(()=>[t("div",Ys,[t("img",{src:rt(l.id),alt:l.name,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",loading:"lazy",onError:Re},null,40,Os),e[25]||(e[25]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent pointer-events-none"},null,-1))]),t("div",Ks,[t("h3",Gs,d(l.name),1),t("p",Js,d(l.author||"N/A"),1)]),e[26]||(e[26]=t("div",{class:"absolute inset-0 border-2 border-pink-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-lg pointer-events-none"},null,-1))]),_:2},1032,["to"]))),128))])])])):v("",!0)])),U.value?(o(),a("div",{key:2,ref_key:"readingContainer",ref:w,class:"fixed inset-0 z-50 bg-black overflow-y-auto",onScroll:xt},[t("div",{class:"fixed top-0 left-0 right-0 z-50 bg-gray-900/95 backdrop-blur-sm border-b border-gray-800 transition-transform duration-300",style:oe({transform:O.value?"translateY(0)":"translateY(-100%)"})},[t("div",Qs,[t("div",Ws,[t("button",{onClick:ue,class:"px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded-lg text-white text-sm font-medium transition-all flex items-center gap-1.5",title:"关闭 (ESC)"},[...e[28]||(e[28]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),t("span",{class:"hidden sm:inline"},"关闭",-1)])]),t("div",Xs,[t("span",Zs,d(He.value),1),t("span",el,d(H.value+1)+"/"+d(m.value.length),1)]),t("div",tl,[t("span",sl,d(He.value),1),t("span",ll,d(H.value+1)+"/"+d(m.value.length),1)]),t("div",ol,[t("button",{onClick:e[4]||(e[4]=l=>ke.value=!0),class:M(["px-2 sm:px-3 py-1.5 rounded-lg text-sm font-medium transition-all flex items-center gap-1 sm:gap-1.5",f.value?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-600 hover:bg-gray-700 text-gray-300"]),title:"自动滚动设置"},[(o(),a("svg",{class:M(["w-4 h-4",f.value&&"animate-spin-slow"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[29]||(e[29]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1)])],2)),e[30]||(e[30]=t("span",{class:"hidden sm:inline"},"设置",-1))],2),Be.value?(o(),a("button",{key:0,onClick:ht,class:"px-2 sm:px-3 py-1.5 bg-gray-600 hover:bg-gray-700 rounded-lg text-white text-sm font-medium transition-all flex items-center gap-1 sm:gap-1.5",title:"上一话"},[...e[31]||(e[31]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),t("span",{class:"hidden sm:inline"},"上一话",-1)])])):v("",!0),Ce.value?(o(),a("button",{key:1,onClick:ft,class:"px-2 sm:px-3 py-1.5 bg-pink-500 hover:bg-pink-600 rounded-lg text-white text-sm font-medium transition-all flex items-center gap-1 sm:gap-1.5",title:"下一话"},[...e[32]||(e[32]=[t("span",{class:"hidden sm:inline"},"下一话",-1),t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])):v("",!0)])])]),t("div",al,[t("div",{class:"h-full bg-gradient-to-r from-pink-500 to-pink-400 transition-all duration-300 ease-out",style:oe({width:`${$e.value}%`})},null,4)])],4),t("div",{class:"fixed top-0 left-0 right-0 z-50 h-1 bg-gray-800",style:oe({transform:O.value?"translateY(-100%)":"translateY(0)"})},[t("div",{class:"h-full bg-gradient-to-r from-pink-500 to-pink-400 transition-all duration-300 ease-out",style:oe({width:`${$e.value}%`})},null,4)],4),f.value?(o(),a("button",{key:0,onClick:Ct,class:"fixed bottom-4 left-4 z-[55] p-2.5 sm:p-3 bg-gray-800/20 hover:bg-gray-800/40 text-white/30 hover:text-white/50 rounded-full backdrop-blur-sm transition-all duration-200 shadow-lg",title:y.value?"继续滚动":"暂停滚动"},[y.value?(o(),a("svg",rl,[...e[33]||(e[33]=[t("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"},null,-1)])])):(o(),a("svg",il,[...e[34]||(e[34]=[t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)])]))],8,nl)):v("",!0),be.value&&!m.value.length?(o(),a("div",ul,[t("div",cl,[F(pe)])])):v("",!0),ee.value?(o(),a("div",dl,[t("div",vl,[e[35]||(e[35]=t("svg",{class:"w-12 h-12 text-red-400 mx-auto mb-4",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),t("p",gl,d(ee.value),1),t("div",{class:"flex gap-3 justify-center mt-4"},[t("button",{onClick:yt,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"}," 重试 "),t("button",{onClick:ue,class:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"}," 退出 ")])])])):v("",!0),m.value.length?(o(),a("div",ml,[t("div",pl,[(o(!0),a(ae,null,ne(m.value,(l,n)=>(o(),a("div",{key:n,ref_for:!0,ref:h=>se.value[n]=h,class:M(["comic-image-container relative flex items-center justify-center",{"min-h-[300px] sm:min-h-[500px]":!l.loaded}]),"data-index":n},[l.loaded?v("",!0):(o(),a("div",fl,[l.error?(o(),a("div",{key:1,onClick:h=>wt(n),class:"cursor-pointer text-red-400 hover:text-red-300 text-center"},[...e[36]||(e[36]=[t("svg",{class:"w-12 h-12 mx-auto mb-2",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1),t("p",null,"加载失败，点击重试",-1)])],8,yl)):(o(),a("div",hl,[F(pe)]))])),l.needProcess?he((o(),a("canvas",{key:1,ref_for:!0,ref:h=>Ve.value[n]=h,class:"w-full h-auto block"},null,512)),[[Rt,l.loaded]]):v("",!0),!l.needProcess&&l.loaded?(o(),a("img",{key:2,src:l.displaySrc||l.src,alt:`Page ${n+1}`,class:"w-full h-auto block"},null,8,bl)):v("",!0)],10,xl))),128)),we.value?(o(),a("div",wl,[t("div",kl,[e[38]||(e[38]=t("div",{class:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-full mb-2"},[t("svg",{class:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})])],-1)),e[39]||(e[39]=t("h3",{class:"text-xl font-bold text-white"},"需要VIP才能继续阅读",-1)),t("p",_l," 您已预览前5张图片（共"+d(je.value)+"张） ",1),e[40]||(e[40]=t("p",{class:"text-gray-400 text-sm"}," 开通VIP即可解锁全部内容，享受无限阅读体验 ",-1)),t("div",Cl,[q(c).isLoggedIn?v("",!0):(o(),a("button",{key:0,onClick:e[5]||(e[5]=l=>Q.value=!0),class:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors"}," 立即登录 ")),t("button",{onClick:vt,class:"inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white rounded-lg font-bold transition-all shadow-lg"},[...e[37]||(e[37]=[t("svg",{class:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1),t("span",null,"立即开通VIP",-1)])])])])])):v("",!0),Ce.value&&!we.value?(o(),a("div",Il,[t("button",{onClick:Ne,class:"px-8 py-4 bg-gradient-to-r from-pink-500 to-pink-600 text-white rounded-lg hover:from-pink-600 hover:to-pink-700 transition-all shadow-lg flex items-center gap-3 text-lg font-semibold"},[...e[41]||(e[41]=[t("span",null,"下一话",-1),t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1)])])])):v("",!0)])])):v("",!0),(o(),ge(Dt,{to:"body"},[F(Ft,{name:"fade"},{default:me(()=>[ke.value?(o(),a("div",Sl,[t("div",Ml,[e[48]||(e[48]=t("h3",{class:"text-base sm:text-lg font-bold text-white mb-3 sm:mb-4"},"自动滚动设置",-1)),j.value==="smooth"?(o(),a("div",Ll,[t("label",zl," 滚动速度: "+d(K.value)+" 像素/秒 ",1),he(t("input",{type:"range","onUpdate:modelValue":e[6]||(e[6]=l=>K.value=l),onChange:St,min:"10",max:"500",step:"10",class:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider"},null,544),[[Se,K.value]]),e[42]||(e[42]=t("div",{class:"flex justify-between text-[10px] sm:text-xs text-gray-500 mt-1"},[t("span",null,"慢"),t("span",null,"中"),t("span",null,"快"),t("span",null,"极快")],-1))])):v("",!0),j.value==="stepped"?(o(),a("div",Pl,[t("div",null,[t("label",jl," 跳动间隔: "+d(G.value)+" 秒 ",1),he(t("input",{type:"range","onUpdate:modelValue":e[7]||(e[7]=l=>G.value=l),onChange:Je,min:"0.5",max:"5",step:"0.5",class:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider"},null,544),[[Se,G.value]]),e[43]||(e[43]=t("div",{class:"flex justify-between text-[10px] sm:text-xs text-gray-500 mt-1"},[t("span",null,"快速"),t("span",null,"中等"),t("span",null,"缓慢")],-1))]),t("div",null,[t("label",Vl," 跳动距离: "+d(J.value)+" 像素 ",1),he(t("input",{type:"range","onUpdate:modelValue":e[8]||(e[8]=l=>J.value=l),onChange:Je,min:"50",max:"800",step:"25",class:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider"},null,544),[[Se,J.value]]),e[44]||(e[44]=t("div",{class:"flex justify-between text-[10px] sm:text-xs text-gray-500 mt-1"},[t("span",null,"小"),t("span",null,"中"),t("span",null,"大"),t("span",null,"特大")],-1))])])):v("",!0),t("div",Tl,[e[45]||(e[45]=t("label",{class:"block text-xs sm:text-sm font-medium text-gray-300 mb-1.5 sm:mb-2"}," 滚动模式 ",-1)),t("div",$l,[t("button",{onClick:e[9]||(e[9]=l=>Ge("smooth")),class:M(["px-2 sm:px-3 py-1.5 sm:py-2 rounded-md sm:rounded-lg text-xs sm:text-sm font-medium transition-all",j.value==="smooth"?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])}," 平滑滚动 ",2),t("button",{onClick:e[10]||(e[10]=l=>Ge("stepped")),class:M(["px-2 sm:px-3 py-1.5 sm:py-2 rounded-md sm:rounded-lg text-xs sm:text-sm font-medium transition-all",j.value==="stepped"?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])}," 段落滚动 ",2)]),t("p",Hl,d(j.value==="smooth"?"连续平滑滚动":"模拟鼠标滚轮，一次跳一小段"),1)]),t("div",Bl,[t("button",{onClick:_t,class:M(["w-full py-2 sm:py-3 px-3 sm:px-4 rounded-md sm:rounded-lg text-xs sm:text-sm font-medium transition-all",f.value?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"])},[f.value?(o(),a("span",Al,"关闭自动滚动")):(o(),a("span",El,"开启自动滚动"))],2)]),t("div",Rl,[t("button",{onClick:Mt,disabled:B.value,class:M(["w-full py-2 sm:py-3 px-3 sm:px-4 rounded-md sm:rounded-lg text-xs sm:text-sm font-medium transition-all",B.value?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-600 text-gray-400"])},[B.value?(o(),a("span",ql,[e[46]||(e[46]=t("svg",{class:"animate-spin h-3 sm:h-4 w-3 sm:w-4",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),t("span",Nl,"加载中... "+d(Y.value)+"/"+d(m.value.length),1)])):(o(),a("span",Fl,"加载全部图片"))],10,Dl),e[47]||(e[47]=t("p",{class:"text-[10px] sm:text-xs text-gray-500 mt-1 sm:mt-2"}," 立即加载所有图片，不再等待滚动触发 ",-1))]),e[49]||(e[49]=t("div",{class:"text-[10px] sm:text-xs text-gray-500 space-y-0.5 sm:space-y-1 mb-3 sm:mb-4"},[t("p",null,"• 自动滚动会在图片加载完成后继续")],-1)),t("button",{onClick:e[11]||(e[11]=l=>ke.value=!1),class:"w-full py-1.5 sm:py-2 px-3 sm:px-4 bg-gray-800 hover:bg-gray-700 text-gray-300 rounded-md sm:rounded-lg text-xs sm:text-sm font-medium transition-colors"}," 关闭 ")])])):v("",!0)]),_:1})]))],544)):v("",!0),F(Ze,{modelValue:Q.value,"onUpdate:modelValue":e[12]||(e[12]=l=>Q.value=l),icon:"lock",title:"需要登录",message:"登录后即可继续阅读","confirm-text":"立即登录","cancel-text":"注册账号",onConfirm:gt,onCancel:mt},null,8,["modelValue"]),F(Ze,{modelValue:W.value,"onUpdate:modelValue":e[13]||(e[13]=l=>W.value=l),icon:"warning",title:"VIP专享内容",message:"成为VIP会员，解锁全站所有内容","confirm-text":"成为VIP","cancel-text":"返回","confirm-button-class":"bg-yellow-500 hover:bg-yellow-600 text-white",onConfirm:pt,onCancel:e[14]||(e[14]=l=>W.value=!1)},null,8,["modelValue"])]),_:1},8,["title"])}}},Gl=zt(Ul,[["__scopeId","data-v-e49bb113"]]);export{Gl as default};
