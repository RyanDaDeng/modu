import{i as e,r as t,o as r,c as a,w as s,A as o,k as l,K as i,a as n,b as c,d,t as u,v as p,f as m,L as h,F as f,h as v,H as x}from"./index-BkfaYN6j.js";import{u as g}from"./useNotification-Cx2LyVO4.js";import{g as k,r as b}from"./bookmark-CNDvQ2qw.js";const w={class:"container mx-auto px-4 py-6"},y={class:"mb-6"},_={class:"flex justify-between items-center"},$={class:"text-gray-400"},j={class:"text-pink-500 font-medium"},M={key:0,class:"flex justify-center py-12"},C={key:1,class:"text-center py-12"},B={class:"max-w-md mx-auto"},L={key:2,class:"grid gap-4"},V={class:"flex items-start gap-4"},z=["src","alt"],A={class:"flex-1 min-w-0"},D={class:"text-lg font-bold text-white mb-1 group-hover/title:text-pink-400 transition-colors"},H={class:"text-sm text-gray-400 mb-2"},E={class:"flex flex-wrap items-center gap-4 text-xs text-gray-500"},F={class:"flex items-center gap-1"},I={class:"flex items-center gap-2 mt-3"},K=["onClick"],N={__name:"BookmarksView",setup(N){const S=l(),q=e(),G=g(),J=t([]),O=t(!1),P=e=>{const t=new Date(e),r=new Date-t,a=Math.floor(r/864e5);if(0===a){const e=Math.floor(r/36e5);if(0===e){const e=Math.floor(r/6e4);return 0===e?"刚刚":`${e}分钟前`}return`${e}小时前`}return 1===a?"昨天":a<7?`${a}天前`:a<30?`${Math.floor(a/7)}周前`:a<365?`${Math.floor(a/30)}个月前`:`${Math.floor(a/365)}年前`},Q=e=>{e.target.src="/default.jpeg"};return r(()=>{(async()=>{if(q.isLoggedIn){O.value=!0;try{const e=await k();J.value=e.data||[]}catch(e){401===e.response?.status?S.push("/login"):G.error("加载书签失败")}finally{O.value=!1}}else S.push("/login")})()}),(e,t)=>{const r=i("router-link");return n(),a(o,{title:"我的书签"},{default:s(()=>[c("div",w,[c("div",y,[c("div",_,[c("div",null,[t[2]||(t[2]=c("h1",{class:"text-2xl font-bold text-white mb-2"},"我的书签",-1)),c("p",$,[t[0]||(t[0]=u(" 共 ",-1)),c("span",j,p(J.value.length),1),t[1]||(t[1]=u(" 个书签 ",-1))])])])]),O.value?(n(),d("div",M,[m(h)])):J.value.length?(n(),d("div",L,[(n(!0),d(f,null,v(J.value,e=>(n(),d("div",{key:e.id,class:"relative group bg-gray-800/50 backdrop-blur-sm border border-white/10 rounded-xl p-4 hover:bg-gray-700/50 hover:border-white/20 transition-all"},[c("div",V,[m(r,{to:`/chapter/${e.comic_id}?chapter=${e.chapter_id}`,class:"flex-shrink-0 w-24 h-32 rounded-lg overflow-hidden bg-gray-900"},{default:s(()=>{return[c("img",{src:(t=e.comic_id,`${x()}/media/albums/${t}_3x4.jpg`),alt:e.comic_name,class:"w-full h-full object-cover",onError:Q},null,40,z)];var t}),_:2},1032,["to"]),c("div",A,[m(r,{to:`/chapter/${e.comic_id}?chapter=${e.chapter_id}`,class:"block group/title"},{default:s(()=>[c("h3",D,p(e.comic_name),1),c("p",H," 章节 "+p(e.chapter_id),1)]),_:2},1032,["to"]),c("div",E,[c("div",F,[t[7]||(t[7]=c("svg",{class:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),c("span",null,p(P(e.created_at)),1)])]),c("div",I,[m(r,{to:`/chapter/${e.comic_id}?chapter=${e.chapter_id}`,class:"inline-flex items-center px-3 py-1.5 bg-pink-500/20 hover:bg-pink-500/30 text-pink-400 rounded-lg text-sm font-medium transition-colors cursor-pointer"},{default:s(()=>[...t[8]||(t[8]=[c("svg",{class:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})],-1),u(" 继续阅读 ",-1)])]),_:2},1032,["to"]),c("button",{onClick:t=>(async e=>{if(confirm("确定要删除这个书签吗？"))try{await b(e),J.value=J.value.filter(t=>t.id!==e),G.success("书签已删除")}catch(t){G.error("删除失败")}})(e.id),class:"inline-flex items-center px-3 py-1.5 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg text-sm font-medium transition-colors cursor-pointer"},[...t[9]||(t[9]=[c("svg",{class:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),u(" 删除 ",-1)])],8,K)])])])]))),128))])):(n(),d("div",C,[c("div",B,[t[4]||(t[4]=c("svg",{class:"w-24 h-24 text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})],-1)),t[5]||(t[5]=c("h2",{class:"text-xl font-bold text-white mb-2"},"还没有书签",-1)),t[6]||(t[6]=c("p",{class:"text-gray-400 mb-6"},"在阅读漫画时点击书签按钮，即可保存当前章节位置",-1)),m(r,{to:"/latest",class:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-xl font-medium hover:from-pink-600 hover:to-purple-700 transition-all transform hover:scale-105 cursor-pointer"},{default:s(()=>[...t[3]||(t[3]=[u(" 浏览漫画 ",-1)])]),_:1})])]))])]),_:1})}}};export{N as default};
