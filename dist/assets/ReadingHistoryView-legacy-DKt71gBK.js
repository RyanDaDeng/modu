!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return e(t,r);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function c(r,o,i,a){var c=o&&o.prototype instanceof l?o:l,s=Object.create(c.prototype);return n(s,"_invoke",function(r,n,o){var i,a,c,l=0,s=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,r){return i=e,a=0,c=t,p.n=r,u}};function d(r,n){for(a=r,c=n,e=0;!f&&l&&!o&&e<s.length;e++){var o,i=s[e],d=p.p,v=i[2];r>3?(o=v===n)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=r<2&&d<i[1])?(a=0,p.v=n,p.n=i[1]):d<v&&(o=r<3||i[0]>n||n>v)&&(i[4]=r,i[5]=n,p.n=v,a=0))}if(o||r>1)return u;throw f=!0,n}return function(o,s,v){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,v),a=s,c=v;(e=a<2?t:c)||!f;){i||(a?a<3?(a>1&&(p.n=-1),d(a,c)):p.n=c:p.v=c);try{if(l=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(f=p.n<0)?c:r.call(n,p))!==u)break}catch(e){i=t,a=1,c=e}finally{l=1}}return{value:e,done:f}}}(r,i,a),!0),s}var u={};function l(){}function s(){}function f(){}e=Object.getPrototypeOf;var p=[][i]?e(e([][i]())):(n(e={},i,function(){return this}),e),d=f.prototype=l.prototype=Object.create(p);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,n(t,a,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=f,n(d,"constructor",f),n(f,"constructor",s),s.displayName="GeneratorFunction",n(f,a,"GeneratorFunction"),n(d),n(d,a,"Generator"),n(d,i,function(){return this}),n(d,"toString",function(){return"[object Generator]"}),(r=function(){return{w:c,m:v}})()}function n(t,e,r,o){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}n=function(t,e,r,o){function a(e,r){n(t,e,function(t){return this._invoke(e,r,t)})}e?i?i(t,e,{value:r,enumerable:!o,configurable:!o,writable:!o}):t[e]=r:(a("next",0),a("throw",1),a("return",2))},n(t,e,r,o)}function o(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function i(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function c(t){o(a,n,i,c,u,"next",t)}function u(t){o(a,n,i,c,u,"throw",t)}c(void 0)})}}System.register(["./index-legacy-AqQVAtWt.js","./UnifiedComicCard-legacy-T4qwJJre.js","./useNotification-legacy-VWD-W3cd.js"],function(e,n){"use strict";var o,a,c,u,l,s,f,p,d,v,m,y,h,g,b,x,w,k,j,A,S;return{setters:[function(t){o=t.r,a=t.o,c=t.c,u=t.w,l=t.A,s=t.C,f=t.k,p=t.K,d=t.a,v=t.b,m=t.d,y=t.e,h=t.t,g=t.v,b=t.f,x=t.L,w=t.F,k=t.h,j=t.S},function(t){A=t.U},function(t){S=t.u}],execute:function(){var n={class:"container mx-auto px-4 py-6"},C={class:"mb-6"},O={class:"flex justify-between items-center"},T={class:"text-gray-400"},_={class:"text-pink-500 font-medium"},I={key:0,class:"text-center py-16"},F={key:1,class:"flex justify-center py-12"},M={key:2},G={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"},P={class:"relative"},z={class:"absolute inset-0 pointer-events-none rounded-lg overflow-hidden"},B=["onClick"],E={class:"absolute bottom-2 left-2 right-2 flex items-center justify-between gap-2 pointer-events-auto"},L={class:"inline-flex items-center px-2 py-1 text-[10px] sm:text-xs font-medium bg-gray-900/70 backdrop-blur-sm border border-gray-600/50 text-gray-200 rounded-full"},V={class:"truncate max-w-[100px]"},R={class:"inline-flex items-center px-2 py-1 text-[10px] font-medium bg-gray-900/70 backdrop-blur-sm border border-gray-600/50 text-gray-300 rounded-full whitespace-nowrap"};e("default",{__name:"ReadingHistoryView",setup:function(e){f();var U=S(),H=o([]),N=o(!0),K=function(){var t=i(r().m(function t(){var e,n;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return N.value=!0,t.p=1,t.n=2,s.getAll();case 2:e=t.v,H.value=e,t.n=4;break;case 3:t.p=3,n=t.v,console.error("Failed to load history:",n),U.error("加载阅读历史失败");case 4:return t.p=4,N.value=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}));return function(){return t.apply(this,arguments)}}(),$=function(t){return{id:t.comicId,name:t.comicTitle,title:t.comicTitle,image:t.coverImage,cover:t.coverImage}},q=function(){var t=i(r().m(function t(e){var n;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,s.remove(e);case 1:H.value=H.value.filter(function(t){return t.comicId!==e}),U.success("已删除阅读记录"),t.n=3;break;case 2:t.p=2,n=t.v,console.error("Failed to remove item:",n),U.error("删除失败");case 3:return t.a(2)}},t,null,[[0,2]])}));return function(e){return t.apply(this,arguments)}}(),D=function(){var t=i(r().m(function t(){var e;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:if(confirm("确定要清空所有阅读历史吗？此操作不可恢复。")){t.n=1;break}return t.a(2);case 1:return t.p=1,t.n=2,s.clearAll();case 2:H.value=[],U.success("已清空所有阅读历史"),t.n=4;break;case 3:t.p=3,e=t.v,console.error("Failed to clear history:",e),U.error("清空失败");case 4:return t.a(2)}},t,null,[[1,3]])}));return function(){return t.apply(this,arguments)}}();return a(function(){K()}),function(e,r){var o=p("router-link");return d(),c(l,{title:"阅读历史"},{default:u(function(){return[v("div",n,[v("div",C,[v("div",O,[v("div",null,[r[2]||(r[2]=v("h1",{class:"text-2xl font-bold text-white mb-2"},"阅读历史",-1)),v("p",T,[r[0]||(r[0]=h(" 共 ",-1)),v("span",_,g(H.value.length),1),r[1]||(r[1]=h(" 条记录 ",-1))])]),H.value.length>0?(d(),m("button",{key:0,onClick:D,class:"text-sm text-gray-400 hover:text-red-400 transition-colors cursor-pointer flex items-center gap-1"},t(r[3]||(r[3]=[v("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),h(" 清空历史 ",-1)])))):y("",!0)])]),0!==H.value.length||N.value?N.value?(d(),m("div",F,[b(x)])):(d(),m("div",M,[v("div",G,[(d(!0),m(w,null,k(H.value,function(e){return d(),m("div",{key:e.comicId,class:"relative group"},[v("div",P,[b(A,{comic:$(e),"show-category":!1,"show-episode":!1,"show-stats":!1,"show-author":!1,"show-description":!1,"show-tags":!1},null,8,["comic"]),v("div",z,[r[10]||(r[10]=v("div",{class:"absolute top-2 left-2 z-20 pointer-events-auto"},[v("span",{class:"inline-flex items-center px-2 py-1 text-xs font-bold bg-gradient-to-r from-pink-500/80 to-purple-600/80 backdrop-blur-sm text-white rounded-full shadow-lg border border-pink-400/30"}," 继续阅读 ")],-1)),v("button",{onClick:j(function(t){return q(e.comicId)},["stop"]),class:"absolute top-2 right-2 z-20 p-1.5 bg-red-600/80 sm:bg-gray-900/80 hover:bg-red-600/90 rounded-full sm:opacity-0 sm:group-hover:opacity-100 transition-all duration-200 backdrop-blur-sm cursor-pointer shadow-lg pointer-events-auto",title:"删除记录"},t(r[8]||(r[8]=[v("svg",{class:"w-3.5 h-3.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),8,B),v("div",E,[v("span",L,[r[9]||(r[9]=v("svg",{class:"w-3 h-3 mr-1 text-purple-400",fill:"currentColor",viewBox:"0 0 20 20"},[v("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.669 0-3.218.51-4.5 1.385V4.804z"})],-1)),v("span",V,g(e.chapterTitle||"未知章节"),1)]),v("span",R,g((n=e.lastRead,s.formatLastRead(n))),1)])])])]);var n}),128))])])):(d(),m("div",I,[r[5]||(r[5]=v("svg",{class:"w-24 h-24 text-gray-600 mx-auto mb-4",fill:"currentColor",viewBox:"0 0 20 20"},[v("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.669 0-3.218.51-4.5 1.385V4.804z"})],-1)),r[6]||(r[6]=v("h3",{class:"text-lg font-medium text-white mb-2"},"暂无阅读历史",-1)),r[7]||(r[7]=v("p",{class:"text-gray-400 mb-6"},"您还没有阅读过任何漫画",-1)),b(o,{to:"/",class:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-xl font-medium hover:from-pink-600 hover:to-purple-700 transition-all transform hover:scale-105 cursor-pointer"},{default:u(function(){return t(r[4]||(r[4]=[h(" 去探索漫画 ",-1)]))}),_:1})]))])]}),_:1})}}})}}})}();
