import{z as M,B as V,r as x,o as U,c as T,w as $,A as z,a1 as S,a,b as t,f as B,d as o,e as f,v as d,F as v,h as c,N as k,t as h,L as W}from"./index-B-gsnaRJ.js";import{_ as q}from"./ComicCard-COCPnKsw.js";import{_ as E}from"./BottomDrawer-CmVlCkHO.js";const I={class:"container mx-auto px-4 py-6"},O={class:"sm:hidden mb-4"},G={class:"bg-gradient-to-r from-pink-500/10 to-purple-500/10 rounded-xl p-[1px]"},H={class:"bg-gray-900/90 backdrop-blur-xl rounded-xl p-3"},J={class:"relative flex items-center justify-between bg-gray-800/90 backdrop-blur rounded-xl px-4 py-3 border border-gray-700 group-hover:border-pink-500/50 group-active:scale-[0.98] transition-all"},K={class:"flex items-center gap-3"},P={class:"text-left"},Q={class:"text-sm font-medium text-white"},R={class:"flex gap-2 overflow-x-auto pb-1"},X=["onClick"],Y={key:0,class:"ml-1"},Z={class:"hidden sm:block relative mb-4"},ee={class:"relative bg-gray-900/60 backdrop-blur-xl border border-white/10 rounded-lg p-4"},te={class:"flex gap-2 mb-4"},le=["onClick"],se={class:"flex gap-2 flex-wrap"},ae=["onClick"],oe={key:0,class:"ml-1 text-xs"},re={class:"px-4 pb-4"},ne={class:"grid grid-cols-3 gap-2"},ie=["onClick"],de={class:"px-4 pb-6"},ue={class:"grid grid-cols-4 gap-2"},ve=["onClick"],ce={key:0,class:"ml-1 text-xs"},ge={key:0,class:"flex justify-center py-12"},pe={key:1},be={class:"text-lg sm:text-xl font-semibold text-white mb-3"},me={class:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-6 2xl:grid-cols-7 gap-3 sm:gap-3 md:gap-4"},xe={key:2,class:"text-center py-12"},ke={name:"UpdatesView"},_e=Object.assign(ke,{setup(fe){const y=[{label:"全部",value:"all"},{label:"日漫",value:"manga"},{label:"韩漫",value:"hanman"}],g=[{label:"周一",value:1},{label:"周二",value:2},{label:"周三",value:3},{label:"周四",value:4},{label:"周五",value:5},{label:"周六",value:6},{label:"周日",value:7},{label:"已完结",value:0}],n=V(()=>{const l=new Date().getDay();return l===0?7:l}),u=x("all"),i=x(n.value),_=x([]),p=x(!1),b=x(!1),D=V(()=>{const l=n.value,s=[];for(let e=-1;e<=2;e++){let r=l+e;r<=0&&(r=7+r),r>7&&(r=r-7);const C=g.find(L=>L.value===r);C&&s.push(C)}return s.push({label:"完结",value:0}),s}),j=l=>{let s=null;return l.image&&l.image.startsWith("/media/")?s=null:l.image&&l.image.startsWith("http")&&(s=l.image),{id:l.id,name:l.name,title:l.name,author:l.author,image:s,category:l.category?.title||"",description:l.description,watched:l.liked?1:0,liked:l.liked?1:0,tags:[]}},m=async()=>{if(!p.value){p.value=!0,_.value=[];try{const l=await S(u.value,i.value,1);l?.list&&(_.value=l.list)}catch(l){console.error("Failed to load comics:",l)}finally{p.value=!1}}},N=l=>{u.value=l,m()},w=l=>{i.value=l,m()},A=l=>{u.value=l,b.value=!1,m()},F=l=>{i.value=l,b.value=!1,m()};return U(()=>{m()}),(l,s)=>(a(),T(z,{title:"更新"},{default:$(()=>[t("div",I,[t("div",O,[t("div",G,[t("div",H,[t("button",{onClick:s[0]||(s[0]=e=>b.value=!0),class:"w-full mb-3 relative group"},[s[5]||(s[5]=t("div",{class:"absolute inset-0 bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-xl blur group-active:blur-xl transition-all"},null,-1)),t("div",J,[t("div",K,[s[3]||(s[3]=t("div",{class:"relative"},[t("svg",{class:"w-5 h-5 text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})]),t("div",{class:"absolute inset-0 bg-pink-400 blur-lg opacity-50 animate-pulse"})],-1)),t("div",P,[s[2]||(s[2]=t("div",{class:"text-xs text-gray-400 mb-0.5"},"当前筛选",-1)),t("div",Q,d(y.find(e=>e.value===u.value)?.label)+" · "+d(g.find(e=>e.value===i.value)?.label),1)])]),s[4]||(s[4]=t("div",{class:"flex items-center gap-2"},[t("span",{class:"text-xs text-pink-400 font-medium"},"点击修改"),t("div",{class:"bg-pink-500/20 rounded-lg p-1.5 group-hover:bg-pink-500/30 transition-colors"},[t("svg",{class:"w-4 h-4 text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])])],-1))])]),t("div",R,[(a(!0),o(v,null,c(D.value,e=>(a(),o("button",{key:e.value,onClick:r=>w(e.value),class:k(["flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-medium transition-all",i.value===e.value?"bg-pink-500/20 text-pink-400 border border-pink-500/50":e.value===n.value?"bg-orange-500/20 text-orange-400 border border-orange-500/50":"bg-gray-800 text-gray-400 border border-gray-700"])},[h(d(e.label)+" ",1),e.value===n.value?(a(),o("span",Y,"(今)")):f("",!0)],10,X))),128))])])])]),t("div",Z,[s[6]||(s[6]=t("div",{class:"absolute inset-0 bg-gradient-to-r from-pink-500/10 via-purple-500/10 to-blue-500/10 rounded-lg blur-xl"},null,-1)),t("div",ee,[t("div",te,[(a(),o(v,null,c(y,e=>t("button",{key:e.value,onClick:r=>N(e.value),class:k(["px-4 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer",u.value===e.value?"bg-pink-500/20 text-pink-400 border border-pink-500/50":"bg-gray-800/50 text-gray-300 hover:bg-gray-700/50 hover:text-white border border-gray-700"])},d(e.label),11,le)),64))]),t("div",se,[(a(),o(v,null,c(g,e=>t("button",{key:e.value,onClick:r=>w(e.value),class:k(["px-4 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer",i.value===e.value?"bg-pink-500/20 text-pink-400 border border-pink-500/50":e.value===n.value?"bg-orange-500/20 text-orange-400 border border-orange-500/50":"bg-gray-800/50 text-gray-300 hover:bg-gray-700/50 hover:text-white border border-gray-700"])},[h(d(e.label)+" ",1),e.value===n.value?(a(),o("span",oe," (今日) ")):f("",!0)],10,ae)),64))])])]),B(E,{modelValue:b.value,"onUpdate:modelValue":s[1]||(s[1]=e=>b.value=e),title:"选择筛选条件",class:"sm:hidden"},{default:$(()=>[t("div",re,[s[7]||(s[7]=t("div",{class:"text-sm text-gray-400 mb-3"},"类型",-1)),t("div",ne,[(a(),o(v,null,c(y,e=>t("button",{key:e.value,onClick:r=>A(e.value),class:k(["py-3 rounded-lg text-sm font-medium transition-colors",u.value===e.value?"bg-pink-500/20 text-pink-400 border border-pink-500/50":"bg-gray-800 text-gray-300 border border-gray-700"])},d(e.label),11,ie)),64))])]),t("div",de,[s[8]||(s[8]=t("div",{class:"text-sm text-gray-400 mb-3"},"更新日期",-1)),t("div",ue,[(a(),o(v,null,c(g,e=>t("button",{key:e.value,onClick:r=>F(e.value),class:k(["py-3 rounded-lg text-sm font-medium transition-colors relative",i.value===e.value?"bg-pink-500/20 text-pink-400 border border-pink-500/50":e.value===n.value?"bg-orange-500/20 text-orange-400 border border-orange-500/50":"bg-gray-800 text-gray-300 border border-gray-700",e.value===0?"col-span-4":""])},[h(d(e.label)+" ",1),e.value===n.value?(a(),o("span",ce,"(今)")):f("",!0)],10,ve)),64))])])]),_:1},8,["modelValue"]),p.value?(a(),o("div",ge,[B(W)])):_.value.length>0?(a(),o("div",pe,[t("h2",be,d(g.find(e=>e.value===i.value)?.label)+"更新 ",1),t("div",me,[(a(!0),o(v,null,c(_.value,e=>(a(),T(q,{key:e.id,comic:j(e)},null,8,["comic"]))),128))])])):p.value?f("",!0):(a(),o("div",xe,[...s[9]||(s[9]=[t("p",{class:"text-gray-400"},"暂无更新",-1)])]))])]),_:1}))}}),Ce=M(_e,[["__scopeId","data-v-63110853"]]);export{Ce as default};
