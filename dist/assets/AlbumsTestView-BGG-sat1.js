import{k as v,d as c,a as u,b as e,v as p,N as f,a2 as y,u as b,r as d,f as w,e as x,P as k,U as _,a3 as T,$ as R,a4 as S}from"./index-Eq6JnK4C.js";const $={class:"lg:hidden sticky top-0 sm:top-14 z-50 sm:z-30 bg-gray-800 shadow-lg"},C={class:"container mx-auto px-4"},U={class:"flex items-center justify-between h-14"},D={class:"text-sm sm:text-base"},E={class:"text-white font-semibold text-sm sm:text-lg truncate px-2 flex-1 text-center"},L={__name:"PageHeader",props:{title:{type:String,required:!0},backText:{type:String,default:"返回"},backTo:{type:String,default:null}},setup(m){const r=m,n=v(),a=()=>{r.backTo?n.push(r.backTo):n.back()};return(o,l)=>(u(),c("div",$,[e("div",C,[e("div",U,[e("button",{onClick:a,class:"flex items-center space-x-1 sm:space-x-2 text-white hover:text-pink-400 transition-colors flex-shrink-0 cursor-pointer"},[l[0]||(l[0]=e("svg",{class:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)),e("span",D,p(m.backText),1)]),e("h1",E,p(m.title),1),e("div",{class:f(["flex-shrink-0",o.$slots.action?"":"w-12 sm:w-14"])},[y(o.$slots,"action")],2)])])]))}},N={class:"bg-gray-900 min-h-screen"},V={class:"container mx-auto px-4 py-6"},B={class:"mb-6 bg-gray-800 rounded-lg p-4"},P={class:"flex flex-col sm:flex-row gap-2"},j={key:0,class:"text-white"},q={key:1,class:"bg-red-900/20 border border-red-800 rounded p-4 mb-4"},z={class:"text-red-400"},K={key:2,class:"bg-gray-800 rounded p-4 mb-4"},W={class:"text-green-400 text-xs overflow-auto"},A={key:3,class:"bg-gray-800 rounded p-4"},J={class:"text-blue-400 text-xs overflow-auto"},M="www.cdnmhwscc.vip",H={__name:"AlbumsTestView",setup(m){const r=b(),n=d(!1),a=d(""),o=d(null),l=d(null),g=d(""),h=async()=>{if(!g.value.trim()){a.value="Please enter a URL or endpoint";return}n.value=!0,a.value="",o.value=null,l.value=null;try{let t=g.value.trim();!t.startsWith("http://")&&!t.startsWith("https://")&&(t.startsWith("/")&&(t=t.substring(1)),t=`https://${M}/${t}`),console.log("Testing Custom URL:",t);const s=await R.get(t,{headers:{token:r.accessToken.token,tokenParam:r.accessToken.tokenParam},timeout:3e4});if(o.value=s.data,s.data&&s.data.data)try{const i=S(r.currentKey,s.data.data);l.value=i,console.log("Decrypted data:",i)}catch(i){console.error("Decryption error:",i),console.log("Could not decrypt, showing raw response")}}catch(t){console.error("Request error:",t),a.value=t.message,t.response&&(o.value=t.response.data)}finally{n.value=!1}};return(t,s)=>(u(),c("div",N,[w(L,{title:"测试页面"}),e("div",V,[e("div",B,[s[1]||(s[1]=e("h2",{class:"text-lg font-bold text-white mb-3"},"Custom URL Test",-1)),e("div",P,[k(e("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>g.value=i),type:"text",placeholder:"Enter custom endpoint (e.g., /albums?page=1 or full URL)",class:"flex-1 px-3 py-2 bg-gray-700 text-white rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-500",onKeyup:T(h,["enter"])},null,544),[[_,g.value]]),e("button",{onClick:h,class:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium"}," Test Custom URL ")]),s[2]||(s[2]=e("div",{class:"mt-2 text-xs text-gray-400"},[e("p",null,"Examples:"),e("ul",{class:"ml-4 space-y-1"},[e("li",null,"• /albums?page=1"),e("li",null,"• /categories?slug=doujin&page=2"),e("li",null,"• /search?query=test"),e("li",null,"• https://www.cdnmhwscc.vip/albums?o=mv")])],-1))]),n.value?(u(),c("div",j,"Loading...")):x("",!0),a.value?(u(),c("div",q,[e("p",z,"Error: "+p(a.value),1)])):x("",!0),o.value?(u(),c("div",K,[s[3]||(s[3]=e("h2",{class:"text-lg font-bold text-white mb-2"},"Raw Response:",-1)),e("pre",W,p(JSON.stringify(o.value,null,2)),1)])):x("",!0),l.value?(u(),c("div",A,[s[4]||(s[4]=e("h2",{class:"text-lg font-bold text-white mb-2"},"Decrypted Data:",-1)),e("pre",J,p(JSON.stringify(l.value,null,2)),1)])):x("",!0)])]))}};export{H as default};
