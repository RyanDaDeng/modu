import{z as U,B as $,r as _,o as z,c as B,w as D,A as S,a1 as W,a,b as t,f as j,d as o,e as w,v as u,F as c,h as g,N as f,t as V,L as q}from"./index-Brj9CnMw.js";import{_ as E}from"./ComicCard-Bhq8ogBR.js";import{_ as I}from"./BottomDrawer-FNWjWzQp.js";const O={class:"container mx-auto px-4 py-6"},G={class:"sm:hidden mb-4"},H={class:"bg-gradient-to-r from-pink-500/10 to-purple-500/10 rounded-xl p-[1px]"},J={class:"bg-gray-900/90 backdrop-blur-xl rounded-xl p-3"},K={class:"relative flex items-center justify-between bg-gray-800/90 backdrop-blur rounded-xl px-4 py-3 border border-gray-700 group-hover:border-pink-500/50 group-active:scale-[0.98] transition-all"},P={class:"flex items-center gap-3"},Q={class:"text-left"},R={class:"text-sm font-medium text-white"},X={class:"flex gap-2 overflow-x-auto pb-1"},Y=["onClick"],Z={key:0,class:"ml-1"},ee={class:"hidden sm:block relative mb-4"},te={class:"relative bg-gray-900/60 backdrop-blur-xl border border-white/10 rounded-lg p-4"},le={class:"flex gap-2 mb-4"},se=["onClick"],ae={class:"flex gap-2 flex-wrap"},oe=["onClick"],re={key:0,class:"ml-1 text-xs"},ne={class:"px-4 pb-4"},ie={class:"grid grid-cols-3 gap-2"},de=["onClick"],ue={class:"px-4 pb-6"},ve={class:"grid grid-cols-4 gap-2"},ce=["onClick"],ge={key:0,class:"ml-1 text-xs"},pe={key:0,class:"flex justify-center py-12"},be={key:1},me={class:"text-lg sm:text-xl font-semibold text-white mb-3"},xe={class:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-6 2xl:grid-cols-7 gap-3 sm:gap-3 md:gap-4"},ke={key:2,class:"text-center py-12"},_e={name:"UpdatesView"},fe=Object.assign(_e,{setup(ye){const C=[{label:"全部",value:"all"},{label:"日漫",value:"manga"},{label:"韩漫",value:"hanman"}],p=[{label:"周一",value:1},{label:"周二",value:2},{label:"周三",value:3},{label:"周四",value:4},{label:"周五",value:5},{label:"周六",value:6},{label:"周日",value:7},{label:"已完结",value:0}],i=$(()=>{const l=new Date().getDay();return l===0?7:l}),v=_("all"),d=_(i.value),y=_([]),b=_(!1),m=_(!1),N=$(()=>{const l=i.value,s=[];for(let n=-1;n<=2;n++){let r=l+n;r<=0&&(r=7+r),r>7&&(r=r-7);const k=p.find(e=>e.value===r);k&&s.push(k)}return s.push({label:"完结",value:0}),s}),A=l=>{var n;let s=null;return l.image&&l.image.startsWith("/media/")?s=null:l.image&&l.image.startsWith("http")&&(s=l.image),{id:l.id,name:l.name,title:l.name,author:l.author,image:s,category:((n=l.category)==null?void 0:n.title)||"",description:l.description,watched:l.liked?1:0,liked:l.liked?1:0,tags:[]}},x=async()=>{if(!b.value){b.value=!0,y.value=[];try{const l=await W(v.value,d.value,1);l!=null&&l.list&&(y.value=l.list)}catch(l){console.error("Failed to load comics:",l)}finally{b.value=!1}}},F=l=>{v.value=l,x()},T=l=>{d.value=l,x()},L=l=>{v.value=l,m.value=!1,x()},M=l=>{d.value=l,m.value=!1,x()};return z(()=>{x()}),(l,s)=>(a(),B(S,{title:"更新"},{default:D(()=>{var n,r,k;return[t("div",O,[t("div",G,[t("div",H,[t("div",J,[t("button",{onClick:s[0]||(s[0]=e=>m.value=!0),class:"w-full mb-3 relative group"},[s[5]||(s[5]=t("div",{class:"absolute inset-0 bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-xl blur group-active:blur-xl transition-all"},null,-1)),t("div",K,[t("div",P,[s[3]||(s[3]=t("div",{class:"relative"},[t("svg",{class:"w-5 h-5 text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})]),t("div",{class:"absolute inset-0 bg-pink-400 blur-lg opacity-50 animate-pulse"})],-1)),t("div",Q,[s[2]||(s[2]=t("div",{class:"text-xs text-gray-400 mb-0.5"},"当前筛选",-1)),t("div",R,u((n=C.find(e=>e.value===v.value))==null?void 0:n.label)+" · "+u((r=p.find(e=>e.value===d.value))==null?void 0:r.label),1)])]),s[4]||(s[4]=t("div",{class:"flex items-center gap-2"},[t("span",{class:"text-xs text-pink-400 font-medium"},"点击修改"),t("div",{class:"bg-pink-500/20 rounded-lg p-1.5 group-hover:bg-pink-500/30 transition-colors"},[t("svg",{class:"w-4 h-4 text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])])],-1))])]),t("div",X,[(a(!0),o(c,null,g(N.value,e=>(a(),o("button",{key:e.value,onClick:h=>T(e.value),class:f(["flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-medium transition-all",d.value===e.value?"bg-pink-500/20 text-pink-400 border border-pink-500/50":e.value===i.value?"bg-orange-500/20 text-orange-400 border border-orange-500/50":"bg-gray-800 text-gray-400 border border-gray-700"])},[V(u(e.label)+" ",1),e.value===i.value?(a(),o("span",Z,"(今)")):w("",!0)],10,Y))),128))])])])]),t("div",ee,[s[6]||(s[6]=t("div",{class:"absolute inset-0 bg-gradient-to-r from-pink-500/10 via-purple-500/10 to-blue-500/10 rounded-lg blur-xl"},null,-1)),t("div",te,[t("div",le,[(a(),o(c,null,g(C,e=>t("button",{key:e.value,onClick:h=>F(e.value),class:f(["px-4 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer",v.value===e.value?"bg-pink-500/20 text-pink-400 border border-pink-500/50":"bg-gray-800/50 text-gray-300 hover:bg-gray-700/50 hover:text-white border border-gray-700"])},u(e.label),11,se)),64))]),t("div",ae,[(a(),o(c,null,g(p,e=>t("button",{key:e.value,onClick:h=>T(e.value),class:f(["px-4 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer",d.value===e.value?"bg-pink-500/20 text-pink-400 border border-pink-500/50":e.value===i.value?"bg-orange-500/20 text-orange-400 border border-orange-500/50":"bg-gray-800/50 text-gray-300 hover:bg-gray-700/50 hover:text-white border border-gray-700"])},[V(u(e.label)+" ",1),e.value===i.value?(a(),o("span",re," (今日) ")):w("",!0)],10,oe)),64))])])]),j(I,{modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=e=>m.value=e),title:"选择筛选条件",class:"sm:hidden"},{default:D(()=>[t("div",ne,[s[7]||(s[7]=t("div",{class:"text-sm text-gray-400 mb-3"},"类型",-1)),t("div",ie,[(a(),o(c,null,g(C,e=>t("button",{key:e.value,onClick:h=>L(e.value),class:f(["py-3 rounded-lg text-sm font-medium transition-colors",v.value===e.value?"bg-pink-500/20 text-pink-400 border border-pink-500/50":"bg-gray-800 text-gray-300 border border-gray-700"])},u(e.label),11,de)),64))])]),t("div",ue,[s[8]||(s[8]=t("div",{class:"text-sm text-gray-400 mb-3"},"更新日期",-1)),t("div",ve,[(a(),o(c,null,g(p,e=>t("button",{key:e.value,onClick:h=>M(e.value),class:f(["py-3 rounded-lg text-sm font-medium transition-colors relative",d.value===e.value?"bg-pink-500/20 text-pink-400 border border-pink-500/50":e.value===i.value?"bg-orange-500/20 text-orange-400 border border-orange-500/50":"bg-gray-800 text-gray-300 border border-gray-700",e.value===0?"col-span-4":""])},[V(u(e.label)+" ",1),e.value===i.value?(a(),o("span",ge,"(今)")):w("",!0)],10,ce)),64))])])]),_:1},8,["modelValue"]),b.value?(a(),o("div",pe,[j(q)])):y.value.length>0?(a(),o("div",be,[t("h2",me,u((k=p.find(e=>e.value===d.value))==null?void 0:k.label)+"更新 ",1),t("div",xe,[(a(!0),o(c,null,g(y.value,e=>(a(),B(E,{key:e.id,comic:A(e)},null,8,["comic"]))),128))])])):b.value?w("",!0):(a(),o("div",ke,[...s[9]||(s[9]=[t("p",{class:"text-gray-400"},"暂无更新",-1)])]))])]}),_:1}))}}),Ve=U(fe,[["__scopeId","data-v-63110853"]]);export{Ve as default};
