import{B as e,M as t,c as o,a,w as r,b as s,d as i,e as c,x as l,v as n,t as d,P as m,F as p,h as u,I as h}from"./index-Dk5K0Uig.js";const g={class:"relative bg-gray-900/60 backdrop-blur-sm border border-white/10 rounded-lg overflow-hidden group-hover:border-pink-500/30 transition-all duration-300 hover:shadow-xl hover:shadow-pink-500/20 flex flex-col"},x={class:"relative aspect-[3/4] bg-gray-800/50 overflow-hidden flex-shrink-0"},f=["src","alt","loading"],y={key:0,class:"absolute top-1 left-1 sm:top-2 sm:left-2 z-10"},b={class:"px-1.5 sm:px-2 py-0.5 sm:py-1 text-[10px] sm:text-xs bg-pink-600/70 backdrop-blur-sm border border-pink-400/60 text-white font-medium rounded-full shadow-lg"},w={key:1,class:"absolute top-1 right-1 sm:top-2 sm:right-2 z-10"},v={class:"px-1.5 sm:px-2 py-0.5 sm:py-1 text-[10px] sm:text-xs bg-blue-600/70 backdrop-blur-sm border border-blue-400/60 text-white font-medium rounded-full shadow-lg"},k={key:2,class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-1 sm:p-2"},D={class:"flex items-center justify-between text-white text-[10px] sm:text-xs"},M={key:0,class:"flex items-center gap-0.5 sm:gap-1"},$={key:1,class:"flex items-center gap-0.5 sm:gap-1"},B={key:3,class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-1 sm:p-2"},C={class:"text-white text-[10px] sm:text-xs text-center"},_={class:"p-1.5 sm:p-2 md:p-3 flex flex-col"},j={class:"text-xs sm:text-sm font-semibold text-white line-clamp-1 group-hover:text-pink-400 transition-colors truncate"},z={class:"text-[10px] sm:text-xs text-gray-400 mt-0.5 truncate min-h-[1rem]"},A={key:0,class:"text-[10px] sm:text-xs text-gray-500 mt-1 line-clamp-2 hidden sm:block min-h-[2rem]"},S={key:1,class:"hidden sm:flex flex-wrap gap-1 mt-1 min-h-[1.25rem]"},L=e({__name:"UnifiedComicCard",props:{comic:{type:Object,required:!0},showCategory:{type:Boolean,default:!0},showEpisode:{type:Boolean,default:!1},showStats:{type:Boolean,default:!0},showAuthor:{type:Boolean,default:!0},showDescription:{type:Boolean,default:!1},showTags:{type:Boolean,default:!1},showCollectionDate:{type:Boolean,default:!1},showUpdateDate:{type:Boolean,default:!1},lazyLoad:{type:Boolean,default:!0}},setup(e){const L=e,U=()=>{if(L.comic.image)return L.comic.image;return`${h()}/media/albums/${L.comic.id}_3x4.jpg`},E=e=>{e.target.src="/default.jpeg"},T=()=>L.comic.category?"object"==typeof L.comic.category?L.comic.category.title||L.comic.category.name||"":L.comic.category:"",I=e=>{const t=document.createElement("DIV");return t.innerHTML=e||"",t.textContent||t.innerText||""},N=e=>{const t=new Date(e),o=new Date-t,a=Math.floor(o/864e5);if(0===a)return"今天";if(1===a)return"昨天";if(a<7)return`${a}天前`;if(a<30){return`${Math.floor(a/7)}周前`}if(a<365){return`${Math.floor(a/30)}个月前`}return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},F=e=>{const t=new Date(e),o=new Date-t,a=Math.floor(o/36e5),r=Math.floor(o/864e5);return a<1?"刚刚更新":a<24?`${a}小时前`:1===r?"昨天":r<7?`${r}天前`:`${t.getMonth()+1}月${t.getDate()}日`};return(h,q)=>{const H=t("router-link");return a(),o(H,{to:`/chapter/${e.comic.id}`,class:"block relative group"},{default:r(()=>[q[3]||(q[3]=s("div",{class:"absolute inset-0 bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 rounded-lg opacity-0 group-hover:opacity-50 blur-sm transition-all duration-300"},null,-1)),s("div",g,[s("div",x,[s("img",{src:U(),alt:e.comic.name||e.comic.title,class:"absolute inset-0 w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",loading:e.lazyLoad?"lazy":"eager",onError:E},null,40,f),q[2]||(q[2]=s("div",{class:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),e.showCategory&&T()?(a(),i("div",y,[s("span",b,l(T()),1)])):c("",!0),e.showEpisode&&e.comic.episode?(a(),i("div",w,[s("span",v,l(e.comic.episode)+"话 ",1)])):c("",!0),e.showStats&&(e.comic.watched||e.comic.liked)?(a(),i("div",k,[s("div",D,[e.comic.watched?(a(),i("span",M,[q[0]||(q[0]=s("svg",{class:"w-3 h-3 sm:w-4 sm:h-4",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),s("path",{"fill-rule":"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"})],-1)),n(" "+l(d(m)(e.comic.watched)),1)])):c("",!0),e.comic.liked?(a(),i("span",$,[q[1]||(q[1]=s("svg",{class:"w-3 h-3 sm:w-4 sm:h-4",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"})],-1)),n(" "+l(d(m)(e.comic.liked)),1)])):c("",!0)])])):c("",!0),e.showUpdateDate&&e.comic.datetime_updated?(a(),i("div",B,[s("div",C,l(F(e.comic.datetime_updated)),1)])):c("",!0)]),s("div",_,[s("h3",j,l(e.comic.name||e.comic.title||"Unknown"),1),s("p",z,[e.showCollectionDate&&e.comic.created_at?(a(),i(p,{key:0},[n(" 收藏于 "+l(N(e.comic.created_at)),1)],64)):e.showAuthor?(a(),i(p,{key:1},[n(l((L.comic.author?Array.isArray(L.comic.author)?L.comic.author.join(", "):L.comic.author:L.comic.authors?Array.isArray(L.comic.authors)?L.comic.authors.join(", "):L.comic.authors:"")||"N/A"),1)],64)):(a(),i(p,{key:2},[n("   ")],64))]),e.showDescription?(a(),i("p",A,l(e.comic.description?I(e.comic.description):"N/A"),1)):c("",!0),e.showTags?(a(),i("div",S,[(a(!0),i(p,null,u(e.comic.tags&&e.comic.tags.length?e.comic.tags.slice(0,2):["N/A"],e=>(a(),i("span",{key:e,class:"px-1.5 py-0.5 text-[10px] bg-gray-800/70 backdrop-blur-sm border border-white/10 text-gray-300 rounded-full"},l(e),1))),128))])):c("",!0)])])]),_:1},8,["to"])}}},[["__scopeId","data-v-d3497c44"]]);export{L as U};
