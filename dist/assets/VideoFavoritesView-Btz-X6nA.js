import{i as a,r as t,o as e,X as s,c as o,w as r,l,K as i,a as n,b as c,d,v as u,x as v,f as p,L as g,F as m,h}from"./index-CDLqFsTy.js";import{g as x}from"./videoCollection-huGEHyzK.js";import{V as f,g as y}from"./VideoLayout-ChPSx0kE.js";import{u as w}from"./useNotification-DKSQ_5rU.js";import{_ as b}from"./Pagination-DKxl9Ath.js";const k={class:"container mx-auto px-4 py-6"},_={class:"mb-6"},j={class:"text-gray-400"},V={class:"text-pink-500 font-medium"},z={key:0,class:"flex justify-center py-20"},C={key:1,class:"text-center py-12"},L={key:2},M={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"},A={class:"relative bg-gray-900/60 backdrop-blur-sm border border-white/10 rounded-lg overflow-hidden group-hover:border-pink-500/30 transition-all"},B={class:"relative overflow-hidden bg-gray-800/50 aspect-video"},F=["src","alt"],W={class:"p-2"},q={class:"text-xs sm:text-sm font-semibold text-white line-clamp-2 group-hover:text-pink-400 transition-colors"},E={class:"mt-8"},K={__name:"VideoFavoritesView",setup(K){const N=l(),P=a(),T=w(),X=t([]),$=t(!1),D=t(1),G=t(1),H=t(0),I=t(""),J=a=>{a.target.src="/img_6.png"},O=async(a=1)=>{$.value=!0;try{const t=await x(a,24);X.value=t.data||[],D.value=t.current_page||1,G.value=Math.max(t.last_page||1,1),H.value=t.total||0}catch(t){T.error("加载收藏列表失败"),G.value=1}finally{$.value=!1}},Q=a=>{O(a),window.scrollTo(0,0)},R=()=>{P.isAuthenticated?O():N.push({path:"/login",query:{redirect:"/video/favorites"}})};return e(async()=>{await(async()=>{try{const a=await y(),t=a.data||a;t.cdn_domain&&(I.value=t.cdn_domain)}catch(a){}})(),R()}),s(()=>{R()}),(a,t)=>{const e=i("router-link");return n(),o(f,{title:"我的收藏"},{default:r(()=>[c("div",k,[c("div",_,[t[2]||(t[2]=c("h1",{class:"text-2xl font-bold text-white mb-2"},"我的视频收藏",-1)),c("p",j,[t[0]||(t[0]=u(" 共 ",-1)),c("span",V,v(H.value),1),t[1]||(t[1]=u(" 个视频 ",-1))])]),$.value?(n(),d("div",z,[p(g)])):X.value.length?(n(),d("div",L,[c("div",M,[(n(!0),d(m,null,h(X.value,a=>(n(),o(e,{key:a.video_id,to:`/video/${a.video_id}`,class:"block group"},{default:r(()=>{return[c("div",A,[c("div",B,[c("img",{src:(e=a.cover,e&&I.value?e.startsWith("http://")||e.startsWith("https://")?e:I.value+e:e||"/img_6.png"),alt:a.name,class:"w-full h-full object-cover group-hover:opacity-90 transition-opacity",onError:J,loading:"lazy"},null,40,F),t[6]||(t[6]=c("div",{class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300"},[c("div",{class:"w-12 h-12 sm:w-14 sm:h-14 bg-black/60 rounded-full flex items-center justify-center"},[c("svg",{class:"w-5 h-5 sm:w-6 sm:h-6 text-white ml-1",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})])])],-1))]),c("div",W,[c("h3",q,v(a.name),1)])])];var e}),_:2},1032,["to"]))),128))]),c("div",E,[p(b,{"current-page":D.value,"total-pages":Math.max(G.value,2),onChange:Q},null,8,["current-page","total-pages"])])])):(n(),d("div",C,[t[4]||(t[4]=c("svg",{class:"w-24 h-24 text-gray-600 mx-auto mb-4",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})],-1)),t[5]||(t[5]=c("p",{class:"text-gray-400 mb-4"},"还没有收藏任何视频",-1)),p(e,{to:"/video",class:"inline-block px-6 py-2 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white rounded-lg transition-all cursor-pointer shadow-lg hover:shadow-xl"},{default:r(()=>[...t[3]||(t[3]=[u(" 去看看在线视频 ",-1)])]),_:1})]))])]),_:1})}}};export{K as default};
