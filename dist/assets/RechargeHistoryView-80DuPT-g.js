import{i as k,r as p,o as w,k as C,c as j,w as y,A as M,C as V,a as r,b as e,d as l,e as g,f as h,L as x,I as B,F as L,h as N,G as n,E as S}from"./index-CstFYGIV.js";import{a as A}from"./vip-DGwDAKMh.js";const F={class:"container mx-auto px-4 py-6 max-w-4xl"},H={key:0,class:"flex justify-center py-20"},R={key:1,class:"text-center py-20"},q={key:2,class:"space-y-4"},z={class:"flex justify-between items-start mb-2"},E={class:"text-white font-medium"},I={class:"text-gray-400 text-sm mt-1"},T={class:"flex justify-between items-end"},$={class:"text-sm text-gray-400"},D={key:0},G={class:"text-right"},O={class:"text-pink-500 text-xl font-bold"},P={key:3,class:"mt-6 flex justify-center"},J={class:"flex gap-2"},K=["disabled"],Q={class:"flex items-center gap-2"},U={class:"text-gray-400 text-sm"},W=["disabled"],X={key:4,class:"mt-6 text-center sm:hidden"},Y={key:5,class:"mt-6 flex justify-center"},se={__name:"RechargeHistoryView",setup(Z){const v=C(),m=k(),i=p([]),t=p(null),c=p(!1),u=p(!1),_=async(d=1,a=!1)=>{a?u.value=!0:c.value=!0;try{const o=await A(d,10);o.success&&(a?i.value=[...i.value,...o.data]:i.value=o.data,t.value=o.pagination)}catch(o){console.error("Failed to load recharge history:",o),o.response?.status===401&&v.push({path:"/login",query:{redirect:"/recharge-history"}})}finally{c.value=!1,u.value=!1}},b=d=>{d<1||d>t.value.last_page||(_(d),window.scrollTo(0,0))},f=()=>{t.value&&t.value.current_page<t.value.last_page&&_(t.value.current_page+1,!0)};return w(()=>{if(!m.isLoggedIn){v.push({path:"/login",query:{redirect:"/recharge-history"}});return}_()}),(d,a)=>{const o=V("router-link");return r(),j(M,{title:"充值记录"},{default:y(()=>[e("div",F,[c.value&&!i.value.length?(r(),l("div",H,[h(x)])):!c.value&&!i.value.length?(r(),l("div",R,[a[3]||(a[3]=e("div",{class:"text-gray-400"},[e("svg",{class:"w-20 h-20 mx-auto mb-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("p",{class:"text-lg mb-4"},"暂无充值记录")],-1)),h(o,{to:"/vip",class:"inline-block px-6 py-2 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white rounded-lg transition-all cursor-pointer shadow-lg hover:shadow-xl"},{default:y(()=>[...a[2]||(a[2]=[B(" 立即充值 ",-1)])]),_:1})])):(r(),l("div",q,[(r(!0),l(L,null,N(i.value,s=>(r(),l("div",{key:s.id,class:"bg-gray-900/60 backdrop-blur-sm rounded-lg p-4 border border-white/10 hover:border-pink-500/30 transition-all"},[e("div",z,[e("div",null,[e("h3",E,n(s.product_name),1),e("p",I,"订单号："+n(s.order_reference),1)]),e("span",{class:S(["px-2 py-1 text-xs rounded font-medium",s.status_code==="success"?"bg-green-900/50 text-green-400 border border-green-800":s.status_code==="pending"?"bg-yellow-900/50 text-yellow-400 border border-yellow-800":"bg-red-900/50 text-red-400 border border-red-800"])},n(s.status),3)]),e("div",T,[e("div",$,[e("p",null,"支付方式："+n(s.payment_method),1),e("p",null,"创建时间："+n(s.created_at),1),s.completed_at?(r(),l("p",D,"完成时间："+n(s.completed_at),1)):g("",!0)]),e("div",G,[e("span",O,"¥"+n(s.product_price),1)])])]))),128))])),t.value&&t.value.last_page>1?(r(),l("div",P,[e("div",J,[e("button",{onClick:a[0]||(a[0]=s=>b(t.value.current_page-1)),disabled:t.value.current_page===1,class:"px-3 py-1 bg-gray-800/50 backdrop-blur-sm text-gray-400 rounded border border-white/10 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700/50 hover:border-white/20 transition-all cursor-pointer"}," 上一页 ",8,K),e("div",Q,[e("span",U," 第 "+n(t.value.current_page)+" / "+n(t.value.last_page)+" 页 ",1)]),e("button",{onClick:a[1]||(a[1]=s=>b(t.value.current_page+1)),disabled:t.value.current_page===t.value.last_page,class:"px-3 py-1 bg-gray-800/50 backdrop-blur-sm text-gray-400 rounded border border-white/10 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700/50 hover:border-white/20 transition-all cursor-pointer"}," 下一页 ",8,W)])])):g("",!0),t.value&&t.value.current_page<t.value.last_page&&!u.value?(r(),l("div",X,[e("button",{onClick:f,class:"px-6 py-2 bg-gray-800/50 backdrop-blur-sm text-gray-300 rounded-lg border border-white/10 hover:bg-gray-700/50 hover:border-white/20 transition-all cursor-pointer"}," 加载更多 ")])):g("",!0),u.value?(r(),l("div",Y,[h(x,{size:"small"})])):g("",!0)])]),_:1})}}};export{se as default};
