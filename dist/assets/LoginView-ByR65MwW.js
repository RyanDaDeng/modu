import{a0 as h,a1 as _,r as m,o as M,c as C,w as p,A as V,j,z as B,a,b as e,f,a2 as R,H as u,R as S,d as n,e as x,I as b,M as k,C as g,a3 as A}from"./index-DU-z0rAC.js";const L={class:"flex items-center justify-center px-4 py-12"},N={class:"max-w-md w-full space-y-8 bg-gray-800/50 backdrop-blur-sm rounded-xl p-8"},q={class:"text-center space-y-4"},z={class:"flex justify-center mb-6"},U={class:"text-gray-400"},D={class:"space-y-4"},H={key:0,class:"mt-1 text-sm text-red-400"},T={key:0,class:"mt-1 text-sm text-red-400"},E={class:"flex items-center justify-between"},I={class:"flex items-center"},F={key:0,class:"bg-red-500/10 border border-red-500/50 text-red-400 px-4 py-3 rounded"},G=["disabled"],J={key:0,class:"flex items-center gap-2"},K={key:1},O={class:"text-center"},W={__name:"LoginView",setup(P){const v=j(),c=h(),s=_({email:"",password:"",remember:!1}),o=m({}),l=m(""),d=m(!1);M(()=>{c.setRememberMe(s.remember)});const w=async()=>{d.value=!0,o.value={},l.value="",c.setRememberMe(s.remember);try{const r=await c.login({email:s.email,password:s.password,remember:s.remember});if(r.success){const t=v.currentRoute.value.query.redirect||"/";v.push(t)}else l.value=r.message||"登录失败，请检查您的邮箱和密码"}catch(r){r.errors?o.value=r.errors:r.message?l.value=r.message:l.value="登录失败，请检查您的邮箱和密码"}finally{d.value=!1}};return(r,t)=>{const y=B("router-link");return a(),C(V,{title:"登录"},{default:p(()=>[e("div",L,[e("div",N,[e("div",q,[e("div",z,[f(R)]),t[5]||(t[5]=e("h2",{class:"text-2xl font-bold text-white"},"欢迎回来",-1)),e("p",U,[t[4]||(t[4]=u(" 还没有账户？ ",-1)),f(y,{to:"/register",class:"text-pink-500 hover:text-pink-400 transition-colors"},{default:p(()=>[...t[3]||(t[3]=[u(" 立即注册 ",-1)])]),_:1})])]),e("form",{onSubmit:S(w,["prevent"]),class:"mt-8 space-y-6"},[e("div",D,[e("div",null,[t[6]||(t[6]=e("label",{for:"email",class:"block text-sm font-medium text-gray-300"}," 邮箱地址 ",-1)),b(e("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=i=>s.email=i),type:"email",autocomplete:"email",required:"",class:"mt-1 block w-full px-4 py-3 bg-gray-900/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all",placeholder:"your@email.com"},null,512),[[k,s.email]]),o.value.email?(a(),n("p",H,g(o.value.email[0]),1)):x("",!0)]),e("div",null,[t[7]||(t[7]=e("label",{for:"password",class:"block text-sm font-medium text-gray-300"}," 密码 ",-1)),b(e("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=i=>s.password=i),type:"password",autocomplete:"current-password",required:"",class:"mt-1 block w-full px-4 py-3 bg-gray-900/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-all",placeholder:"••••••••"},null,512),[[k,s.password]]),o.value.password?(a(),n("p",T,g(o.value.password[0]),1)):x("",!0)])]),e("div",E,[e("div",I,[b(e("input",{id:"remember","onUpdate:modelValue":t[2]||(t[2]=i=>s.remember=i),type:"checkbox",class:"h-4 w-4 text-pink-500 focus:ring-pink-500 bg-gray-900/50 border-gray-700 rounded cursor-pointer"},null,512),[[A,s.remember]]),t[8]||(t[8]=e("label",{for:"remember",class:"ml-2 block text-sm text-gray-400"}," 记住我30天 ",-1))]),t[9]||(t[9]=e("div",{class:"text-sm"},[e("a",{href:"#",class:"text-pink-500 hover:text-pink-400"}," 忘记密码？ ")],-1))]),l.value?(a(),n("div",F,g(l.value),1)):x("",!0),e("button",{type:"submit",disabled:d.value,class:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-gradient-to-r from-pink-500 to-pink-600 hover:from-pink-600 hover:to-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-[1.02]"},[d.value?(a(),n("span",J,[...t[10]||(t[10]=[e("svg",{class:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),u(" 登录中... ",-1)])])):(a(),n("span",K,"登录"))],8,G),t[12]||(t[12]=e("div",{class:"relative mt-6"},[e("div",{class:"absolute inset-0 flex items-center"},[e("div",{class:"w-full border-t border-gray-700/50"})]),e("div",{class:"relative flex justify-center text-sm"},[e("span",{class:"px-2 bg-gray-800/50 text-gray-400"},"或者")])],-1)),e("div",O,[f(y,{to:"/",class:"inline-flex items-center gap-2 text-gray-400 hover:text-pink-500 transition-colors"},{default:p(()=>[...t[11]||(t[11]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),u(" 返回首页 ",-1)])]),_:1})])],32)])])]),_:1})}}};export{W as default};
