import{a4 as F,a0 as R,r as d,q as $,o as G,j as O,c as Y,w as u,A as J,z as K,a as m,b as e,f as c,C as f,D as k,H as _,G as Q,d as h,e as L,I as v,M as w,a5 as W,a6 as X}from"./index-DAir1iQL.js";import{M as C}from"./ModalDialog-B-PHjeFC.js";import{C as Z}from"./ConfirmationDialog-DyMyKNkc.js";function ee(){const a=F();return{success:(l,s)=>a.success(l,s),error:(l,s)=>a.error(l,s),warning:(l,s)=>a.warning(l,s),info:(l,s)=>a.info(l,s),notify:l=>a.add(l),clear:()=>a.clear()}}const oe={class:"relative"},te={class:"relative z-10 container mx-auto px-4 py-8"},se={class:"bg-gray-900/40 backdrop-blur-md rounded-2xl p-6 sm:p-8 border border-gray-800/50 shadow-2xl"},le={class:"flex flex-col sm:flex-row items-center sm:items-start gap-6"},re={class:"relative group"},ne={class:"w-24 h-24 sm:w-28 sm:h-28 bg-gradient-to-br from-pink-500 to-rose-600 rounded-full flex items-center justify-center text-white font-bold text-3xl sm:text-4xl shadow-xl ring-4 ring-pink-500/30 group-hover:ring-pink-500/50 transition-all"},ae={class:"flex-1 text-center sm:text-left"},ie={class:"text-2xl sm:text-3xl font-bold text-white mb-2 tracking-tight"},de={class:"text-gray-400 text-sm mb-4 flex items-center justify-center sm:justify-start gap-2"},ue={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},ce={key:1,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},pe={class:"font-medium"},ge={key:2,class:"text-xs opacity-70 border-l border-yellow-500/30 pl-2"},me={class:"container mx-auto px-4 py-6"},fe={class:"bg-gray-900/30 backdrop-blur-sm rounded-xl overflow-hidden mb-6 border border-gray-800/50"},ve={class:"divide-y divide-gray-700"},we={class:"flex items-center gap-2"},xe={key:0,class:"text-xs bg-yellow-500 text-white px-2 py-0.5 rounded-full"},be={class:"space-y-4"},ye={class:"space-y-4"},Me={__name:"ProfileView",setup(a){const l=O(),s=R(),V=ee(),x=d(!1),p=d(!1),b=d(!1),y=d(!1),M=d(!1),i=d({name:"",email:""}),n=d({old_password:"",new_password:"",new_password_confirmation:""}),U=$(()=>s.user?.name?.charAt(0).toUpperCase()||"U"),g=()=>s.user?.vip_expired_at?new Date(s.user.vip_expired_at)>new Date:!1,D=r=>r?new Date(r).toLocaleDateString("zh-CN"):"",P=()=>{l.push("/vip")},S=()=>{l.push("/recharge-history")},H=()=>{i.value={name:s.user?.name||"",email:s.user?.email||""},x.value=!0},j=()=>{x.value=!1,i.value={name:"",email:""}},B=()=>{p.value=!0},N=()=>{p.value=!1},A=()=>{p.value=!1,n.value={old_password:"",new_password:"",new_password_confirmation:""},b.value=!0},z=()=>{b.value=!1,n.value={old_password:"",new_password:"",new_password_confirmation:""}},I=async()=>{try{const r=await W({name:i.value.name});r.success&&(s.user=r.user,j(),V.success("用户名更新成功！"))}catch(r){console.error("Failed to update profile:",r)}},T=async()=>{try{const r=await X(n.value);r.success&&(z(),V.success(r.message||"密码修改成功！"))}catch(r){console.error("Failed to change password:",r)}},q=async()=>{await s.logout(),l.push("/")};return G(()=>{if(!s.isLoggedIn){l.push("/login");return}}),(r,o)=>{const E=K("router-link");return m(),Y(J,{title:"个人中心","hide-breadcrumbs":!0},{default:u(()=>[e("div",oe,[o[19]||(o[19]=e("div",{class:"absolute inset-0 h-64 bg-cover bg-center",style:{"background-image":"url('/img_6.png')"}},[e("div",{class:"absolute inset-0 bg-gradient-to-b from-black/60 via-black/70 to-gray-900"})],-1)),e("div",te,[e("div",se,[e("div",le,[e("div",re,[e("div",ne,f(U.value),1),o[13]||(o[13]=e("div",{class:"absolute inset-0 rounded-full bg-pink-500/20 blur-xl group-hover:bg-pink-500/30 transition-all"},null,-1))]),e("div",ae,[e("h2",ie,f(k(s).user?.name||"用户"),1),e("p",de,[o[14]||(o[14]=e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),e("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})],-1)),_(" "+f(k(s).user?.email),1)]),e("div",{class:Q(["inline-flex items-center gap-2 px-4 py-2 rounded-full backdrop-blur-sm",g()?"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 text-yellow-300 border border-yellow-500/30":"bg-gray-800/50 text-gray-400 border border-gray-700/50"])},[g()?(m(),h("svg",ue,[...o[15]||(o[15]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)])])):(m(),h("svg",ce,[...o[16]||(o[16]=[e("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"},null,-1)])])),e("span",pe,f(g()?"VIP会员":"普通用户"),1),g()&&k(s).user?.vip_expired_at?(m(),h("span",ge,f(D(k(s).user.vip_expired_at)),1)):L("",!0)],2)]),e("div",{class:"flex gap-2 mt-4 sm:mt-0"},[e("button",{onClick:H,class:"p-2.5 bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 rounded-xl transition-all border border-gray-700/50 group cursor-pointer"},[...o[17]||(o[17]=[e("svg",{class:"w-5 h-5 text-gray-400 group-hover:text-pink-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),e("button",{onClick:B,class:"p-2.5 bg-gray-800/50 backdrop-blur-sm hover:bg-gray-700/50 rounded-xl transition-all border border-gray-700/50 group cursor-pointer"},[...o[18]||(o[18]=[e("svg",{class:"w-5 h-5 text-gray-400 group-hover:text-pink-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])])])])])])]),e("div",me,[e("div",fe,[e("div",ve,[c(E,{to:"/collection",class:"flex items-center justify-between p-4 hover:bg-gray-750 transition-colors cursor-pointer"},{default:u(()=>[...o[20]||(o[20]=[e("div",{class:"flex items-center gap-3"},[e("div",{class:"p-2 bg-pink-500/20 rounded-lg"},[e("svg",{class:"w-5 h-5 text-pink-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})])]),e("div",{class:"text-white font-medium"},"我的收藏")],-1),e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),_:1}),e("button",{onClick:P,class:"w-full flex items-center justify-between p-4 hover:bg-gray-750 transition-colors cursor-pointer"},[o[22]||(o[22]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"p-2 bg-yellow-500/20 rounded-lg"},[e("svg",{class:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})])]),e("div",{class:"text-white font-medium"},"VIP会员")],-1)),e("div",we,[g()?L("",!0):(m(),h("span",xe,"升级")),o[21]||(o[21]=e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]),e("button",{onClick:S,class:"w-full flex items-center justify-between p-4 hover:bg-gray-750 transition-colors cursor-pointer"},[...o[23]||(o[23]=[e("div",{class:"flex items-center gap-3"},[e("div",{class:"p-2 bg-gray-600/20 rounded-lg"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})])]),e("div",{class:"text-white font-medium"},"充值记录")],-1),e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),e("button",{onClick:B,class:"w-full flex items-center justify-between p-4 hover:bg-gray-750 transition-colors cursor-pointer"},[...o[24]||(o[24]=[e("div",{class:"flex items-center gap-3"},[e("div",{class:"p-2 bg-gray-600/20 rounded-lg"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})])]),e("div",{class:"text-white font-medium"},"账号设置")],-1),e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),e("button",{onClick:o[0]||(o[0]=t=>y.value=!0),class:"w-full flex items-center justify-between p-4 hover:bg-gray-750 transition-colors cursor-pointer"},[...o[25]||(o[25]=[e("div",{class:"flex items-center gap-3"},[e("div",{class:"p-2 bg-gray-600/20 rounded-lg"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])]),e("div",{class:"text-white font-medium"},"联系我们")],-1),e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])])]),e("button",{onClick:o[1]||(o[1]=t=>M.value=!0),class:"w-full py-3 bg-red-500/10 hover:bg-red-500/20 text-red-500 rounded-lg font-medium transition-colors cursor-pointer"}," 退出登录 ")]),c(C,{modelValue:x.value,"onUpdate:modelValue":o[4]||(o[4]=t=>x.value=t),icon:"info",title:"编辑资料","confirm-text":"保存","cancel-text":"取消","close-on-backdrop":!1,onConfirm:I,onCancel:j},{default:u(()=>[e("div",be,[e("div",null,[o[26]||(o[26]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"用户名",-1)),v(e("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>i.value.name=t),type:"text",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-pink-500",placeholder:"输入用户名"},null,512),[[w,i.value.name]])]),e("div",null,[o[27]||(o[27]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"邮箱",-1)),v(e("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>i.value.email=t),type:"email",class:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-400 cursor-not-allowed",placeholder:"输入邮箱",disabled:""},null,512),[[w,i.value.email]]),o[28]||(o[28]=e("p",{class:"text-xs text-gray-500 mt-1"},"邮箱暂不支持修改",-1))])])]),_:1},8,["modelValue"]),c(C,{modelValue:p.value,"onUpdate:modelValue":o[5]||(o[5]=t=>p.value=t),icon:"info",title:"账号设置","show-confirm":!1,"cancel-text":"关闭",onCancel:N},{default:u(()=>[e("button",{onClick:A,class:"w-full text-left p-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors"},[...o[29]||(o[29]=[e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-white"},"修改密码"),e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)])])]),_:1},8,["modelValue"]),c(C,{modelValue:b.value,"onUpdate:modelValue":o[9]||(o[9]=t=>b.value=t),icon:"lock",title:"修改密码","confirm-text":"确认修改","cancel-text":"取消","close-on-backdrop":!1,onConfirm:T,onCancel:z},{default:u(()=>[e("div",ye,[e("div",null,[o[30]||(o[30]=e("label",{class:"block text-gray-300 text-sm mb-1.5"},"旧密码",-1)),v(e("input",{"onUpdate:modelValue":o[6]||(o[6]=t=>n.value.old_password=t),type:"password",placeholder:"请输入当前密码",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 text-white rounded-lg focus:outline-none focus:border-pink-500 transition-colors",required:""},null,512),[[w,n.value.old_password]])]),e("div",null,[o[31]||(o[31]=e("label",{class:"block text-gray-300 text-sm mb-1.5"},"新密码",-1)),v(e("input",{"onUpdate:modelValue":o[7]||(o[7]=t=>n.value.new_password=t),type:"password",placeholder:"请输入新密码（至少8个字符）",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 text-white rounded-lg focus:outline-none focus:border-pink-500 transition-colors",required:"",minlength:"8"},null,512),[[w,n.value.new_password]])]),e("div",null,[o[32]||(o[32]=e("label",{class:"block text-gray-300 text-sm mb-1.5"},"确认新密码",-1)),v(e("input",{"onUpdate:modelValue":o[8]||(o[8]=t=>n.value.new_password_confirmation=t),type:"password",placeholder:"请再次输入新密码",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 text-white rounded-lg focus:outline-none focus:border-pink-500 transition-colors",required:"",minlength:"8"},null,512),[[w,n.value.new_password_confirmation]])])])]),_:1},8,["modelValue"]),c(C,{modelValue:y.value,"onUpdate:modelValue":o[10]||(o[10]=t=>y.value=t),icon:"info",title:"联系我们","show-confirm":!1,"cancel-text":"关闭",onCancel:o[11]||(o[11]=t=>y.value=!1)},{default:u(()=>[...o[33]||(o[33]=[e("div",{class:"text-center py-4"},[e("div",{class:"mb-4"},[e("svg",{class:"w-16 h-16 mx-auto text-blue-500",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"})])]),e("p",{class:"text-gray-300 mb-6"},"欢迎加入我们的Telegram群组获取支持"),e("a",{href:"https://t.me/+frktRDVHynY3OTA1",target:"_blank",class:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors"},[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"})]),_(" 加入Telegram群组 ")])],-1)])]),_:1},8,["modelValue"]),c(Z,{modelValue:M.value,"onUpdate:modelValue":o[12]||(o[12]=t=>M.value=t),type:"warning",title:"退出登录",message:"确定要退出当前账号吗？","confirm-text":"退出","cancel-text":"取消","confirm-button-class":"bg-red-600 hover:bg-red-700 text-white",onConfirm:q},null,8,["modelValue"])]),_:1})}}};export{Me as default};
