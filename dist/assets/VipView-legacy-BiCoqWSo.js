!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.toStringTag||"@@toStringTag";function i(r,o,a,s){var i=o&&o.prototype instanceof c?o:c,u=Object.create(i.prototype);return n(u,"_invoke",function(r,n,o){var a,s,i,c=0,u=o||[],p=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return a=t,s=0,i=e,d.n=r,l}};function f(r,n){for(s=r,i=n,t=0;!p&&c&&!o&&t<u.length;t++){var o,a=u[t],f=d.p,m=a[2];r>3?(o=m===n)&&(i=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=e):a[0]<=f&&((o=r<2&&f<a[1])?(s=0,d.v=n,d.n=a[1]):f<m&&(o=r<3||a[0]>n||n>m)&&(a[4]=r,a[5]=n,d.n=m,s=0))}if(o||r>1)return l;throw p=!0,n}return function(o,u,m){if(c>1)throw TypeError("Generator is already running");for(p&&1===u&&f(u,m),s=u,i=m;(t=s<2?e:i)||!p;){a||(s?s<3?(s>1&&(d.n=-1),f(s,i)):d.n=i:d.v=i);try{if(c=2,a){if(s||(o="next"),t=a[o]){if(!(t=t.call(a,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,s<2&&(s=0)}else 1===s&&(t=a.return)&&t.call(a),s<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=e}else if((t=(p=d.n<0)?i:r.call(n,d))!==l)break}catch(t){a=e,s=1,i=t}finally{c=1}}return{value:t,done:p}}}(r,a,s),!0),u}var l={};function c(){}function u(){}function p(){}t=Object.getPrototypeOf;var d=[][a]?t(t([][a]())):(n(t={},a,function(){return this}),t),f=p.prototype=c.prototype=Object.create(d);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,n(e,s,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=p,n(f,"constructor",p),n(p,"constructor",u),u.displayName="GeneratorFunction",n(p,s,"GeneratorFunction"),n(f),n(f,s,"Generator"),n(f,a,function(){return this}),n(f,"toString",function(){return"[object Generator]"}),(r=function(){return{w:i,m:m}})()}function n(e,t,r,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}n=function(e,t,r,o){function s(t,r){n(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r:(s("next",0),s("throw",1),s("return",2))},n(e,t,r,o)}function o(e,t,r,n,o,a,s){try{var i=e[a](s),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}function a(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var s=e.apply(t,r);function i(e){o(s,n,a,i,l,"next",e)}function l(e){o(s,n,a,i,l,"throw",e)}i(void 0)})}}System.register(["./index-legacy-AqQVAtWt.js","./useNotification-legacy-VWD-W3cd.js","./vip-legacy-BKMPMX-f.js"],function(t,n){"use strict";var o,s,i,l,c,u,p,d,f,m,v,x,y,g,b,h,w,k,j,_,C,V,P,I,S,A,O,M,T;return{setters:[function(e){o=e.$,s=e.z,i=e.i,l=e.r,c=e.o,u=e.c,p=e.w,d=e.A,f=e.k,m=e.a,v=e.b,x=e.f,y=e.d,g=e.e,b=e.L,h=e.F,w=e.h,k=e.N,j=e.v,_=e.S,C=e.t,V=e.P,P=e.a3,I=e.U,S=e.V,A=e.Z},function(e){O=e.u},function(e){M=e.g,T=e.c}],execute:function(){var n=document.createElement("style");n.textContent="details summary[data-v-85d8263e]::-webkit-details-marker{display:none}\n/*$vite$:1*/",document.head.appendChild(n);var B=o.create({baseURL:"https://api.modu18.vip",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},withCredentials:!1});B.interceptors.request.use(function(e){var t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},function(e){return Promise.reject(e)}),B.interceptors.response.use(function(e){return e.data},function(e){var t,r;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(localStorage.removeItem("auth_token"),window.location.href="/login"),Promise.reject((null===(r=e.response)||void 0===r?void 0:r.data)||e)});var U=function(){var e=a(r().m(function e(t){return r().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,B.post("/api/redemption/redeem",{code:t});case 1:return e.a(2,e.v)}},e)}));return function(t){return e.apply(this,arguments)}}(),z={class:"container mx-auto px-4 py-6"},F={key:0,class:"flex justify-center py-20"},G={key:1,class:"max-w-md mx-auto space-y-4 sm:max-w-3xl sm:space-y-0 sm:grid sm:grid-cols-3 sm:gap-4 sm:items-stretch"},L={key:0,class:"absolute -top-3 left-1/2 transform -translate-x-1/2"},E={class:"flex flex-col flex-grow text-center"},q={class:"text-xl font-bold text-white mb-2"},R={class:"text-gray-400 text-sm mb-4"},$={class:"mb-4"},N={class:"flex items-baseline justify-center gap-1"},H={class:"text-pink-500 text-3xl font-bold"},X={class:"h-10 mt-2"},K={class:"text-gray-500 text-sm line-through"},W={key:0,class:"text-green-400 text-xs"},Z={class:"flex-grow flex items-center justify-center border-t border-white/10 py-4"},D={class:"space-y-2"},J=["onClick"],Q=["onClick"],Y={class:"mt-8 max-w-md mx-auto sm:max-w-2xl"},ee={class:"bg-gray-900/60 backdrop-blur-sm rounded-xl p-6 border border-white/10"},te={class:"space-y-4"},re=["disabled"],ne={key:0},oe={key:1,class:"flex items-center justify-center"},ae={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/70"},se={class:"bg-gray-900/90 backdrop-blur-xl rounded-xl p-6 border border-white/10 text-center max-w-sm mx-4"},ie={class:"text-white mt-4 text-lg font-medium"},le={__name:"VipView",setup:function(t){var n=f(),o=i(),s=O(),B=l([]),le=l(!1),ce=l(!1),ue=l(!1),pe=l(null),de=l(null),fe=l(!1),me=l("正在创建订单..."),ve=l(""),xe=l(!1),ye=function(){var e=a(r().m(function e(){var t,n;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return le.value=!0,e.p=1,e.n=2,M();case 2:(t=e.v).success&&(B.value=t.data),e.n=4;break;case 3:e.p=3,n=e.v,console.error("Failed to load VIP plans:",n);case 4:return e.p=4,le.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),ge=function(e,t){o.isLoggedIn?(pe.value=e,de.value=t,ue.value=!0):ce.value=!0},be=function(){var e=a(r().m(function e(){var t,n;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return ue.value=!1,fe.value=!0,me.value="正在创建订单...",e.p=1,e.n=2,T(pe.value.key,de.value);case 2:(t=e.v).success&&t.payment_url?(me.value="正在转向支付页面...",setTimeout(function(){window.location.href=t.payment_url},500)):(fe.value=!1,alert("订单创建失败，请稍后重试")),e.n=4;break;case 3:e.p=3,n=e.v,console.error("Failed to create order:",n),fe.value=!1,alert("订单创建失败，请稍后重试");case 4:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),he=function(){ce.value=!1,n.push({path:"/login",query:{redirect:"/vip"}})},we=function(){var e=a(r().m(function e(){var t,n,a;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=ve.value.trim()){e.n=1;break}return s.error("请输入兑换码"),e.a(2);case 1:if(o.isLoggedIn){e.n=2;break}return ce.value=!0,e.a(2);case 2:return xe.value=!0,e.p=3,e.n=4,U(t);case 4:if(!(n=e.v).success){e.n=6;break}return s.success(n.message||"成功兑换 ".concat(n.value," 天 VIP")),ve.value="",n.vip_expire&&(o.user.vip_expired_at=n.vip_expire),e.n=5,o.fetchUser();case 5:e.n=7;break;case 6:s.error(n.message||"兑换失败");case 7:e.n=9;break;case 8:e.p=8,a=e.v,console.error("Redemption error:",a),s.error(a.message||"兑换失败，请稍后再试");case 9:return e.p=9,xe.value=!1,e.f(9);case 10:return e.a(2)}},e,null,[[3,8,9,10]])}));return function(){return e.apply(this,arguments)}}();return c(function(){ye()}),function(t,r){return m(),u(d,{title:"VIP会员"},{default:p(function(){var t,n;return[v("div",z,[r[11]||(r[11]=v("div",{class:"text-center mb-8"},[v("h2",{class:"text-2xl sm:text-3xl font-bold text-pink-500 mb-3",style:{"text-shadow":"2px 2px 0 rgba(31, 41, 55, 0.8)"}}," 开通VIP会员 "),v("p",{class:"text-gray-400 text-sm sm:text-base"},"解锁全站所有漫画")],-1)),le.value?(m(),y("div",F,[x(b)])):(m(),y("div",G,[(m(!0),y(h,null,w(B.value,function(t){return m(),y("div",{key:t.key,class:k(["relative bg-gray-900/60 backdrop-blur-sm rounded-xl p-4 sm:p-6 border transition-all flex flex-col",t.popular?"border-pink-500/50 shadow-lg shadow-pink-500/20":"border-white/10 hover:border-pink-500/30"])},[t.popular?(m(),y("div",L,e(r[4]||(r[4]=[v("span",{class:"px-3 py-1 bg-pink-600/90 backdrop-blur-sm border border-pink-400/60 text-white text-xs font-bold rounded-full shadow-lg"}," 最受欢迎 ",-1)])))):g("",!0),v("div",E,[v("h3",q,j(t.name),1),v("p",R,j(t.duration)+j(t.duration_unit),1),v("div",$,[v("div",N,[r[5]||(r[5]=v("span",{class:"text-pink-500 text-sm"},"¥",-1)),v("span",H,j(t.price),1)]),v("div",X,[t.original_price?(m(),y(h,{key:0},[v("div",K,"¥"+j(t.original_price),1),t.save_amount?(m(),y("div",W," 节省 ¥"+j(t.save_amount),1)):g("",!0)],64)):g("",!0)])]),v("div",Z,[(m(!0),y(h,null,w(t.features,function(e){return m(),y("div",{key:e,class:"flex items-center justify-center gap-2 text-gray-300 text-sm"},[r[6]||(r[6]=v("svg",{class:"w-4 h-4 text-green-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),v("span",null,j(e),1)])}),128))]),v("div",D,[v("button",{onClick:_(function(e){return ge(t,"alipay")},["stop"]),class:"w-full py-2 px-4 rounded-lg font-medium transition-all cursor-pointer bg-gray-800/50 backdrop-blur-sm text-white hover:bg-gray-700/50 border border-white/10 hover:border-white/20 flex items-center justify-center gap-2"},e(r[7]||(r[7]=[v("span",{class:"text-blue-400"},"支付宝",-1),C(" 支付 ",-1)])),8,J),v("button",{onClick:_(function(e){return ge(t,"wechat")},["stop"]),class:"w-full py-2 px-4 rounded-lg font-medium transition-all cursor-pointer bg-gray-800/50 backdrop-blur-sm text-white hover:bg-gray-700/50 border border-white/10 hover:border-white/20 flex items-center justify-center gap-2"},e(r[8]||(r[8]=[v("span",{class:"text-green-400"},"微信",-1),C(" 支付 ",-1)])),8,Q)])])],2)}),128))])),v("div",Y,[v("div",ee,[r[10]||(r[10]=v("h3",{class:"text-lg font-bold text-white mb-4 text-center"},"使用兑换码",-1)),v("div",te,[V(v("input",{"onUpdate:modelValue":r[0]||(r[0]=function(e){return ve.value=e}),type:"text",placeholder:"请输入兑换码",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-pink-500/50 transition-colors",onKeyup:P(we,["enter"])},null,544),[[I,ve.value]]),v("button",{onClick:we,disabled:!ve.value.trim()||xe.value,class:"w-full py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-700 hover:to-purple-700 disabled:from-gray-600 disabled:to-gray-700 text-white font-bold rounded-lg transition-all disabled:cursor-not-allowed"},[xe.value?(m(),y("span",oe,e(r[9]||(r[9]=[v("svg",{class:"animate-spin h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24"},[v("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),v("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),C(" 兑换中... ",-1)])))):(m(),y("span",ne,"兑换"))],8,re)])])]),r[12]||(r[12]=v("div",{class:"mt-12 max-w-md mx-auto sm:max-w-2xl"},[v("h3",{class:"text-lg font-semibold text-white mb-4 text-center"},"常见问题"),v("div",{class:"bg-gray-900/60 backdrop-blur-sm border border-white/10 rounded-lg divide-y divide-white/10"},[v("details",{class:"group"},[v("summary",{class:"flex justify-between items-center p-4 cursor-pointer hover:bg-gray-800/50 transition-colors"},[v("span",{class:"text-gray-300 text-sm"},"VIP会员可以看所有漫画吗？"),v("svg",{class:"w-5 h-5 text-gray-400 transition-transform group-open:rotate-180",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])]),v("div",{class:"px-4 pt-2 pb-4 text-gray-400 text-sm"}," 是的，VIP会员可以无限制阅读全站所有漫画内容。 ")]),v("details",{class:"group"},[v("summary",{class:"flex justify-between items-center p-4 cursor-pointer hover:bg-gray-800/50 transition-colors"},[v("span",{class:"text-gray-300 text-sm"},"VIP会员到期后会怎样？"),v("svg",{class:"w-5 h-5 text-gray-400 transition-transform group-open:rotate-180",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])]),v("div",{class:"px-4 pt-2 pb-4 text-gray-400 text-sm"}," 到期后将恢复为普通用户，您的收藏记录会保留。 ")]),v("details",{class:"group"},[v("summary",{class:"flex justify-between items-center p-4 cursor-pointer hover:bg-gray-800/50 transition-colors"},[v("span",{class:"text-gray-300 text-sm"},"支持哪些支付方式？"),v("svg",{class:"w-5 h-5 text-gray-400 transition-transform group-open:rotate-180",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])]),v("div",{class:"px-4 pt-2 pb-4 text-gray-400 text-sm"}," 目前支持支付宝和微信支付。 ")]),v("details",{class:"group"},[v("summary",{class:"flex justify-between items-center p-4 cursor-pointer hover:bg-gray-800/50 transition-colors"},[v("span",{class:"text-gray-300 text-sm"},"在哪里查看支付状态？"),v("svg",{class:"w-5 h-5 text-gray-400 transition-transform group-open:rotate-180",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])]),v("div",{class:"px-4 pt-2 pb-4 text-gray-400 text-sm"},' 您可以在"个人中心" → "充值记录"页面查看所有支付订单的状态。 ')]),v("details",{class:"group"},[v("summary",{class:"flex justify-between items-center p-4 cursor-pointer hover:bg-gray-800/50 transition-colors"},[v("span",{class:"text-gray-300 text-sm"},"支付后多久到账？"),v("svg",{class:"w-5 h-5 text-gray-400 transition-transform group-open:rotate-180",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])]),v("div",{class:"px-4 pt-2 pb-4 text-gray-400 text-sm"},' 支付成功后，VIP权益会在十几秒到几分钟内自动到账。如果长时间未到账，请前往"个人中心" → "联系我们"反馈问题。 ')])])],-1))]),x(S,{modelValue:ce.value,"onUpdate:modelValue":r[1]||(r[1]=function(e){return ce.value=e}),icon:"lock",title:"请先登录",message:"购买VIP会员需要先登录账号","confirm-text":"立即登录","cancel-text":"取消",onConfirm:he,onCancel:r[2]||(r[2]=function(e){return ce.value=!1})},null,8,["modelValue"]),x(A,{modelValue:ue.value,"onUpdate:modelValue":r[3]||(r[3]=function(e){return ue.value=e}),type:"info",title:"确认购买",message:"确认使用".concat("alipay"===de.value?"支付宝":"微信","购买").concat(null===(t=pe.value)||void 0===t?void 0:t.name,"（¥").concat(null===(n=pe.value)||void 0===n?void 0:n.price,"）？"),"confirm-text":"确认支付","cancel-text":"取消",onConfirm:be},null,8,["modelValue","message"]),fe.value?(m(),y("div",ae,[v("div",se,[x(b,{size:"large"}),v("p",ie,j(me.value),1),r[13]||(r[13]=v("p",{class:"text-gray-400 mt-2 text-sm"},"请稍候，请勿关闭页面...",-1))])])):g("",!0)]}),_:1})}}};t("default",s(le,[["__scopeId","data-v-85d8263e"]]))}}})}();
