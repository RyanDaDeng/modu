import{l as e,d as t,a as s,b as a,x as l,N as n,a3 as o,u as r,r as i,f as u,e as c,P as d,U as p,a4 as x,$ as g,a5 as m}from"./index-CXsfJElZ.js";const v={class:"lg:hidden sticky top-0 sm:top-14 z-50 sm:z-30 bg-gray-800 shadow-lg"},h={class:"container mx-auto px-4"},b={class:"flex items-center justify-between h-14"},f={class:"text-sm sm:text-base"},y={class:"text-white font-semibold text-sm sm:text-lg truncate px-2 flex-1 text-center"},w={__name:"PageHeader",props:{title:{type:String,required:!0},backText:{type:String,default:"返回"},backTo:{type:String,default:null}},setup(r){const i=r,u=e(),c=()=>{i.backTo?u.push(i.backTo):u.back()};return(e,i)=>(s(),t("div",v,[a("div",h,[a("div",b,[a("button",{onClick:c,class:"flex items-center space-x-1 sm:space-x-2 text-white hover:text-pink-400 transition-colors flex-shrink-0 cursor-pointer"},[i[0]||(i[0]=a("svg",{class:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)),a("span",f,l(r.backText),1)]),a("h1",y,l(r.title),1),a("div",{class:n(["flex-shrink-0",e.$slots.action?"":"w-12 sm:w-14"])},[o(e.$slots,"action")],2)])])]))}},k={class:"bg-gray-900 min-h-screen"},T={class:"container mx-auto px-4 py-6"},R={class:"mb-6 bg-gray-800 rounded-lg p-4"},U={class:"flex flex-col sm:flex-row gap-2"},C={key:0,class:"text-white"},L={key:1,class:"bg-red-900/20 border border-red-800 rounded p-4 mb-4"},P={class:"text-red-400"},S={key:2,class:"bg-gray-800 rounded p-4 mb-4"},j={class:"text-green-400 text-xs overflow-auto"},$={key:3,class:"bg-gray-800 rounded p-4"},_={class:"text-blue-400 text-xs overflow-auto"},E={__name:"AlbumsTestView",setup(e){const n=r(),o=i(!1),v=i(""),h=i(null),b=i(null),f=i(""),y=async()=>{if(f.value.trim()){o.value=!0,v.value="",h.value=null,b.value=null;try{let t=f.value.trim();t.startsWith("http://")||t.startsWith("https://")||(t.startsWith("/")&&(t=t.substring(1)),t=`https://www.cdnmhwscc.vip/${t}`);const s=await g.get(t,{headers:{token:n.accessToken.token,tokenParam:n.accessToken.tokenParam},timeout:3e4});if(h.value=s.data,s.data&&s.data.data)try{const e=m(n.currentKey,s.data.data);b.value=e}catch(e){}}catch(t){v.value=t.message,t.response&&(h.value=t.response.data)}finally{o.value=!1}}else v.value="Please enter a URL or endpoint"};return(e,n)=>(s(),t("div",k,[u(w,{title:"测试页面"}),a("div",T,[a("div",R,[n[1]||(n[1]=a("h2",{class:"text-lg font-bold text-white mb-3"},"Custom URL Test",-1)),a("div",U,[d(a("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>f.value=e),type:"text",placeholder:"Enter custom endpoint (e.g., /albums?page=1 or full URL)",class:"flex-1 px-3 py-2 bg-gray-700 text-white rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-500",onKeyup:x(y,["enter"])},null,544),[[p,f.value]]),a("button",{onClick:y,class:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium"}," Test Custom URL ")]),n[2]||(n[2]=a("div",{class:"mt-2 text-xs text-gray-400"},[a("p",null,"Examples:"),a("ul",{class:"ml-4 space-y-1"},[a("li",null,"• /albums?page=1"),a("li",null,"• /categories?slug=doujin&page=2"),a("li",null,"• /search?query=test"),a("li",null,"• https://www.cdnmhwscc.vip/albums?o=mv")])],-1))]),o.value?(s(),t("div",C,"Loading...")):c("",!0),v.value?(s(),t("div",L,[a("p",P,"Error: "+l(v.value),1)])):c("",!0),h.value?(s(),t("div",S,[n[3]||(n[3]=a("h2",{class:"text-lg font-bold text-white mb-2"},"Raw Response:",-1)),a("pre",j,l(JSON.stringify(h.value,null,2)),1)])):c("",!0),b.value?(s(),t("div",$,[n[4]||(n[4]=a("h2",{class:"text-lg font-bold text-white mb-2"},"Decrypted Data:",-1)),a("pre",_,l(JSON.stringify(b.value,null,2)),1)])):c("",!0)])]))}};export{E as default};
