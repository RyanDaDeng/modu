import{i as e,r as t,o as a,l as s,c as r,w as l,ag as d,a as o,b as i,d as n,e as c,v as x,x as g,F as p,h as u}from"./index-Dk5K0Uig.js";import{G as b}from"./GeneralLayout-D7BEUG37.js";const m={class:"container mx-auto px-4 py-6 pb-20 md:pb-6"},y={key:0,class:"bg-gradient-to-r from-pink-500/20 to-purple-600/20 backdrop-blur-sm rounded-lg border border-pink-500/30 p-8 mb-6 text-center"},v={key:1},f={class:"bg-gray-800/50 backdrop-blur-sm rounded-lg border border-gray-700/50 p-6 mb-6"},h={class:"flex flex-col md:flex-row gap-3"},_=["value"],k={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},w={class:"bg-gray-800/50 backdrop-blur-sm rounded-lg border border-gray-700/50 p-4"},C={class:"text-2xl font-bold text-white mt-1"},T={class:"bg-gray-800/50 backdrop-blur-sm rounded-lg border border-gray-700/50 p-4"},j={class:"text-2xl font-bold text-white mt-1"},L={class:"bg-gray-800/50 backdrop-blur-sm rounded-lg border border-gray-700/50 p-4"},R={class:"text-2xl font-bold text-pink-400 mt-1"},S={class:"bg-gray-800/50 backdrop-blur-sm rounded-lg border border-gray-700/50 p-4"},N={class:"text-2xl font-bold text-green-400 mt-1"},Y={key:0,class:"text-xs text-gray-500 mt-1"},z={class:"bg-gray-800/50 backdrop-blur-sm rounded-lg border border-gray-700/50 mb-6"},A={class:"p-4"},D={key:0,class:"space-y-2"},I={class:"text-white"},O={class:"text-xs text-gray-400"},U={class:"text-xs text-gray-500"},F={key:1,class:"text-center py-8 text-gray-400"},G={class:"bg-gray-800/50 backdrop-blur-sm rounded-lg border border-gray-700/50"},M={class:"hidden md:block overflow-x-auto"},V={class:"w-full"},q={class:"divide-y divide-gray-700"},B={class:"px-4 py-2 text-sm text-gray-300"},E={class:"text-xs text-gray-500"},H={class:"px-4 py-2 text-sm text-gray-300"},P={class:"px-4 py-2 text-sm font-medium text-pink-400"},J={class:"px-4 py-2 text-sm font-medium text-green-400"},K={key:0},Q={key:1,class:"text-gray-500"},W={class:"px-4 py-2 text-sm text-gray-400"},X={class:"md:hidden p-4"},Z={key:0,class:"space-y-3"},$={class:"flex justify-between items-start mb-2"},ee={class:"text-white text-sm"},te={class:"text-xs text-gray-400"},ae={class:"text-right"},se={class:"text-sm font-medium text-pink-400"},re={key:0,class:"text-xs text-green-400"},le={class:"text-xs text-gray-500"},de={key:1,class:"text-center py-8 text-gray-400"},oe={key:0,class:"px-4 py-3 border-t border-gray-700 flex justify-center"},ie={class:"flex gap-2"},ne=["disabled"],ce={class:"px-3 py-1 text-gray-300"},xe=["disabled"],ge={__name:"AffiliateView",setup(ge){const pe=s(),ue=e(),be=t(!1),me=t(null),ye=t({total_invited:0,total_orders:0,total_revenue:0,commission_rate:0,estimated_commission:0}),ve=t([]),fe=t([]),he=t(null),_e=t(""),ke=t(!1),we=t(!1),Ce=async(e=1)=>{we.value=!0;try{const t=await d.get("/api/affiliate/dashboard",{params:{page:e}});if(t.data.success){const e=t.data.data;be.value=e.is_affiliate,me.value=e.affiliate,ye.value=e.stats,ve.value=e.invited_users,fe.value=e.payment_orders.data||[],he.value={current_page:e.payment_orders.current_page,last_page:e.payment_orders.last_page,total:e.payment_orders.total},_e.value=window.location.origin+e.referral_link}}catch(t){}finally{we.value=!1}},Te=e=>{e>=1&&e<=he.value.last_page&&Ce(e)},je=async()=>{try{await navigator.clipboard.writeText(_e.value),ke.value=!0,setTimeout(()=>{ke.value=!1},2e3)}catch(e){}},Le=e=>{e.target.select()},Re=e=>(Number(e||0)/100).toFixed(2),Se=e=>new Date(e).toLocaleDateString("zh-CN");return a(()=>{ue.isLoggedIn?Ce():pe.push({path:"/login",query:{redirect:"/affiliate"}})}),(e,t)=>(o(),r(b,{title:"推广中心"},{default:l(()=>[i("div",m,[we.value||be.value?c("",!0):(o(),n("div",y,[...t[2]||(t[2]=[i("div",{class:"max-w-2xl mx-auto"},[i("h2",{class:"text-2xl font-bold text-white mb-4"},"成为推广合作伙伴"),i("div",{class:"text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400 mb-4"}," 50% 回扣 "),i("p",{class:"text-gray-300 mb-6"},[x(" 推广我们的服务，获得高达 50% 的佣金回扣！"),i("br"),x(" 每一笔通过您推广链接产生的订单，您都将获得丰厚回报。 ")]),i("div",{class:"bg-gray-800/50 rounded-lg p-4 mb-6"},[i("p",{class:"text-gray-400 mb-2"},"申请成为推广合作伙伴，请联系我们："),i("a",{href:"https://t.me/+frktRDVHynY3OTA1",target:"_blank",class:"inline-flex items-center gap-2 px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors"},[i("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[i("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 8.161c-.18.717-1.513 6.337-1.948 7.885-.185.656-.541.867-.885.892-.753.054-1.325-.497-2.054-.975-1.141-.747-1.786-1.212-2.892-1.941-1.279-.843-.45-1.307.279-2.064.191-.198 3.512-3.219 3.577-3.493.008-.034.015-.16-.06-.227-.074-.068-.183-.045-.262-.027-.112.026-1.895 1.205-5.349 3.537-.506.348-.965.518-1.376.507-.453-.012-1.325-.256-1.973-.467-.795-.259-1.426-.395-1.371-.834.029-.228.343-.462 1.942-.723 3.715-.889 6.191-1.485 7.438-1.788 3.547-.862 4.283-.638 4.764-.604.106.008.343.024.497.147.13.103.166.242.183.339.017.097.038.319.021.493z"})]),x(" Telegram 联系我们 ")])]),i("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-left"},[i("div",{class:"bg-gray-800/30 rounded-lg p-4"},[i("div",{class:"text-pink-400 font-semibold mb-2"},"💰 高额佣金"),i("p",{class:"text-sm text-gray-400"},"每笔订单获得 50% 佣金")]),i("div",{class:"bg-gray-800/30 rounded-lg p-4"},[i("div",{class:"text-purple-400 font-semibold mb-2"},"📊 实时数据"),i("p",{class:"text-sm text-gray-400"},"实时查看推广数据和收益")]),i("div",{class:"bg-gray-800/30 rounded-lg p-4"},[i("div",{class:"text-blue-400 font-semibold mb-2"},"💳 快速结算"),i("p",{class:"text-sm text-gray-400"},"定期结算，快速到账")])])],-1)])])),be.value?(o(),n("div",v,[i("div",f,[t[3]||(t[3]=i("h3",{class:"text-lg font-semibold text-white mb-4"},[x("我的推广链接 "),i("span",{class:"text-sm font-normal text-gray-400"},"(My Referral Link)")],-1)),i("div",h,[i("input",{value:_e.value,readonly:"",class:"flex-1 px-4 py-2 bg-gray-700 border border-gray-600 text-gray-300 rounded-md",onClick:Le},null,8,_),i("button",{onClick:je,class:"px-6 py-2 bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-md hover:from-pink-600 hover:to-purple-700 transition-all"},g(ke.value?"已复制 Copied":"复制链接 Copy Link"),1)]),t[4]||(t[4]=i("p",{class:"text-sm text-gray-400 mt-2"},[x("分享此链接，新用户通过您的链接注册后的消费，您将获得佣金"),i("br"),i("span",{class:"text-xs"},"Share this link. You will earn commission from purchases made by new users who register through your link.")],-1))]),i("div",k,[i("div",w,[t[5]||(t[5]=i("div",{class:"text-sm text-gray-400"},[x("邀请用户"),i("br"),i("span",{class:"text-xs"},"(Invited Users)")],-1)),i("div",C,g(ye.value.total_invited),1)]),i("div",T,[t[6]||(t[6]=i("div",{class:"text-sm text-gray-400"},[x("成功订单"),i("br"),i("span",{class:"text-xs"},"(Success Orders)")],-1)),i("div",j,g(ye.value.total_orders),1)]),i("div",L,[t[7]||(t[7]=i("div",{class:"text-sm text-gray-400"},[x("总收入"),i("br"),i("span",{class:"text-xs"},"(Total Revenue/CNY)")],-1)),i("div",R,"¥"+g(Re(ye.value.total_revenue)),1)]),i("div",S,[t[8]||(t[8]=i("div",{class:"text-sm text-gray-400"},[x("预计佣金"),i("br"),i("span",{class:"text-xs"},"(EST Commission/CNY)")],-1)),i("div",N,"¥"+g(Re(ye.value.estimated_commission)),1),be.value?(o(),n("div",Y,"费率 Rate: "+g(ye.value.commission_rate)+"%",1)):c("",!0)])]),i("div",z,[t[9]||(t[9]=i("div",{class:"px-4 py-3 border-b border-gray-700"},[i("h3",{class:"text-lg font-semibold text-white"},[x("邀请的用户 "),i("span",{class:"text-sm font-normal text-gray-400"},"(Invited Users)")])],-1)),i("div",A,[ve.value.length>0?(o(),n("div",D,[(o(!0),n(p,null,u(ve.value,e=>(o(),n("div",{key:e.id,class:"flex items-center justify-between py-2 border-b border-gray-700/50 last:border-0"},[i("div",null,[i("div",I,g(e.name),1),i("div",O,g(e.email),1)]),i("div",U,g(Se(e.created_at)),1)]))),128))])):(o(),n("div",F," 暂无邀请用户 "))])]),i("div",G,[t[11]||(t[11]=i("div",{class:"px-4 py-3 border-b border-gray-700"},[i("h3",{class:"text-lg font-semibold text-white"},[x("关联订单 "),i("span",{class:"text-sm font-normal text-gray-400"},"(Related Orders)")])],-1)),i("div",M,[i("table",V,[t[10]||(t[10]=i("thead",{class:"bg-gray-700/50 border-b border-gray-700"},[i("tr",null,[i("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase"},[x("用户"),i("br"),x("User")]),i("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase"},[x("产品"),i("br"),x("Product")]),i("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase"},[x("金额"),i("br"),x("Amount")]),i("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase"},[x("佣金"),i("br"),x("Commission")]),i("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase"},[x("时间"),i("br"),x("Time")])])],-1)),i("tbody",q,[(o(!0),n(p,null,u(fe.value,e=>(o(),n("tr",{key:e.id,class:"hover:bg-gray-700/30"},[i("td",B,[i("div",null,g(e.user?.name),1),i("div",E,g(e.user?.email),1)]),i("td",H,g(e.product_name),1),i("td",P,"¥"+g(Re(e.receive_amount)),1),i("td",J,[be.value?(o(),n("span",K,"¥"+g(Re(e.receive_amount*ye.value.commission_rate/100)),1)):(o(),n("span",Q,"-"))]),i("td",W,g(Se(e.created_at)),1)]))),128))])])]),i("div",X,[fe.value.length>0?(o(),n("div",Z,[(o(!0),n(p,null,u(fe.value,e=>(o(),n("div",{key:e.id,class:"border border-gray-700 rounded-lg p-3"},[i("div",$,[i("div",null,[i("div",ee,g(e.user?.name),1),i("div",te,g(e.product_name),1)]),i("div",ae,[i("div",se,"¥"+g(Re(e.receive_amount)),1),be.value?(o(),n("div",re,"佣金: ¥"+g(Re(e.receive_amount*ye.value.commission_rate/100)),1)):c("",!0)])]),i("div",le,g(Se(e.created_at)),1)]))),128))])):(o(),n("div",de," 暂无关联订单 "))]),he.value&&he.value.last_page>1?(o(),n("div",oe,[i("div",ie,[i("button",{onClick:t[0]||(t[0]=e=>Te(he.value.current_page-1)),disabled:1===he.value.current_page,class:"px-3 py-1 bg-gray-700 border border-gray-600 text-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-600"}," 上一页 ",8,ne),i("span",ce,g(he.value.current_page)+" / "+g(he.value.last_page),1),i("button",{onClick:t[1]||(t[1]=e=>Te(he.value.current_page+1)),disabled:he.value.current_page===he.value.last_page,class:"px-3 py-1 bg-gray-700 border border-gray-600 text-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-600"}," 下一页 ",8,xe)])])):c("",!0)])])):c("",!0)])]),_:1}))}};export{ge as default};
