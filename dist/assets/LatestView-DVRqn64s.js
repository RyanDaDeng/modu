import{r as c,o as _,c as f,w as h,A as x,g as k,a as t,b as v,d as n,e as i,f as g,L as m,F as L,h as b}from"./index-DXOvPRcc.js";import{_ as w}from"./ComicCard-w_g3wf6z.js";const C={class:"container mx-auto px-4 py-6"},j={key:0,class:"text-center py-12"},B={key:1,class:"flex justify-center py-8 sm:py-12"},V={key:2,class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-6 gap-3"},$={key:3,class:"flex justify-center py-6 sm:py-8"},F={key:4,class:"flex justify-center py-6 sm:py-8"},M={name:"LatestView"},E=Object.assign(M,{setup(N){const r=c([]),a=c(!1),u=c(!1),d=c(1),s=c(!0),p=async(l=!1)=>{if(!(l&&a.value||!l&&u.value||!s.value&&!l)){l?(a.value=!0,d.value=1,r.value=[],s.value=!0):u.value=!0;try{const e=await k(d.value);if(!e||e.length===0)s.value=!1;else{const o=e.map(y=>({...y,page:d.value}));r.value.push(...o),d.value++,s.value=e.length>=80}}catch(e){console.error("Failed to load latest comics:",e),s.value=!1}finally{l?a.value=!1:u.value=!1}}};return _(()=>{p(!0)}),(l,e)=>(t(),f(x,{title:"最新更新"},{default:h(()=>[v("div",C,[!r.value.length&&!a.value?(t(),n("div",j,[...e[1]||(e[1]=[v("p",{class:"text-gray-400"},"暂无内容",-1)])])):i("",!0),a.value?(t(),n("div",B,[g(m)])):i("",!0),a.value?i("",!0):(t(),n("div",V,[(t(!0),n(L,null,b(r.value,o=>(t(),f(w,{key:`${o.id}-${o.page}`,comic:o},null,8,["comic"]))),128))])),s.value&&!a.value&&!u.value&&r.value.length?(t(),n("div",$,[v("button",{onClick:e[0]||(e[0]=o=>p()),class:"px-6 py-3 bg-pink-600 hover:bg-pink-700 text-white rounded-lg font-medium transition-colors cursor-pointer"}," 加载更多 ")])):i("",!0),u.value?(t(),n("div",F,[g(m)])):i("",!0)])]),_:1}))}});export{E as default};
