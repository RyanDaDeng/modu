import{i as C,r as p,B as j,o as B,k as M,c as V,w as x,A as L,K as N,a as o,b as e,t as _,v as r,d as n,e as g,f as h,L as m,F as S,h as A,N as F}from"./index-BecYjh6H.js";import{a as H}from"./vip-CZ5wXmGT.js";const R={class:"container mx-auto px-4 py-6"},q={class:"mb-6"},z={class:"flex justify-between items-center"},O={class:"text-gray-400"},T={class:"text-pink-500 font-medium"},$={class:"max-w-4xl"},D={key:0,class:"flex justify-center py-20"},E={key:1,class:"text-center py-20"},I={key:2,class:"space-y-4"},K={class:"flex justify-between items-start mb-2"},P={class:"text-white font-medium"},G={class:"text-gray-400 text-sm mt-1"},J={class:"flex justify-between items-end"},Q={class:"text-sm text-gray-400"},U={key:0},W={class:"text-right"},X={class:"text-pink-500 text-xl font-bold"},Y={key:3,class:"mt-6 flex justify-center"},Z={class:"flex gap-2"},ee=["disabled"],te={class:"flex items-center gap-2"},se={class:"text-gray-400 text-sm"},ae=["disabled"],oe={key:4,class:"mt-6 text-center sm:hidden"},re={key:5,class:"mt-6 flex justify-center"},de={__name:"RechargeHistoryView",setup(le){const b=M(),f=C(),i=p([]),t=p(null),u=p(!1),c=p(!1),k=j(()=>i.value.length),v=async(d=1,s=!1)=>{s?c.value=!0:u.value=!0;try{const l=await H(d,10);l.success&&(s?i.value=[...i.value,...l.data]:i.value=l.data,t.value=l.pagination)}catch(l){console.error("Failed to load recharge history:",l),l.response?.status===401&&b.push({path:"/login",query:{redirect:"/recharge-history"}})}finally{u.value=!1,c.value=!1}},y=d=>{d<1||d>t.value.last_page||(v(d),window.scrollTo(0,0))},w=()=>{t.value&&t.value.current_page<t.value.last_page&&v(t.value.current_page+1,!0)};return B(()=>{if(!f.isLoggedIn){b.push({path:"/login",query:{redirect:"/recharge-history"}});return}v()}),(d,s)=>{const l=N("router-link");return o(),V(L,{title:"充值记录"},{default:x(()=>[e("div",R,[e("div",q,[e("div",z,[e("div",null,[s[4]||(s[4]=e("h1",{class:"text-2xl font-bold text-white mb-2"},"充值记录",-1)),e("p",O,[s[2]||(s[2]=_(" 共 ",-1)),e("span",T,r(k.value),1),s[3]||(s[3]=_(" 条记录 ",-1))])])])]),e("div",$,[u.value&&!i.value.length?(o(),n("div",D,[h(m)])):!u.value&&!i.value.length?(o(),n("div",E,[s[6]||(s[6]=e("div",{class:"text-gray-400"},[e("svg",{class:"w-20 h-20 mx-auto mb-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("p",{class:"text-lg mb-4"},"暂无充值记录")],-1)),h(l,{to:"/vip",class:"inline-block px-6 py-2 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white rounded-lg transition-all cursor-pointer shadow-lg hover:shadow-xl"},{default:x(()=>[...s[5]||(s[5]=[_(" 立即充值 ",-1)])]),_:1})])):(o(),n("div",I,[(o(!0),n(S,null,A(i.value,a=>(o(),n("div",{key:a.id,class:"bg-gray-900/60 backdrop-blur-sm rounded-lg p-4 border border-white/10 hover:border-pink-500/30 transition-all"},[e("div",K,[e("div",null,[e("h3",P,r(a.product_name),1),e("p",G,"订单号："+r(a.order_reference),1)]),e("span",{class:F(["px-2 py-1 text-xs rounded font-medium",a.status_code==="success"?"bg-green-900/50 text-green-400 border border-green-800":a.status_code==="pending"?"bg-yellow-900/50 text-yellow-400 border border-yellow-800":"bg-red-900/50 text-red-400 border border-red-800"])},r(a.status),3)]),e("div",J,[e("div",Q,[e("p",null,"支付方式："+r(a.payment_method),1),e("p",null,"创建时间："+r(a.created_at),1),a.completed_at?(o(),n("p",U,"完成时间："+r(a.completed_at),1)):g("",!0)]),e("div",W,[e("span",X,"¥"+r(a.product_price),1)])])]))),128))])),t.value&&t.value.last_page>1?(o(),n("div",Y,[e("div",Z,[e("button",{onClick:s[0]||(s[0]=a=>y(t.value.current_page-1)),disabled:t.value.current_page===1,class:"px-3 py-1 bg-gray-800/50 backdrop-blur-sm text-gray-400 rounded border border-white/10 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700/50 hover:border-white/20 transition-all cursor-pointer"}," 上一页 ",8,ee),e("div",te,[e("span",se," 第 "+r(t.value.current_page)+" / "+r(t.value.last_page)+" 页 ",1)]),e("button",{onClick:s[1]||(s[1]=a=>y(t.value.current_page+1)),disabled:t.value.current_page===t.value.last_page,class:"px-3 py-1 bg-gray-800/50 backdrop-blur-sm text-gray-400 rounded border border-white/10 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700/50 hover:border-white/20 transition-all cursor-pointer"}," 下一页 ",8,ae)])])):g("",!0),t.value&&t.value.current_page<t.value.last_page&&!c.value?(o(),n("div",oe,[e("button",{onClick:w,class:"px-6 py-2 bg-gray-800/50 backdrop-blur-sm text-gray-300 rounded-lg border border-white/10 hover:bg-gray-700/50 hover:border-white/20 transition-all cursor-pointer"}," 加载更多 ")])):g("",!0),c.value?(o(),n("div",re,[h(m,{size:"small"})])):g("",!0)])])]),_:1})}}};export{de as default};
