import{i as C,r as p,B as j,o as B,k as M,c as V,w as x,A as L,K as N,a as o,b as e,t as _,v as r,d as l,e as g,f as h,L as m,F as S,h as A,N as F}from"./index-Brj9CnMw.js";import{a as H}from"./vip-B4YdgED3.js";const R={class:"container mx-auto px-4 py-6"},q={class:"mb-6"},z={class:"flex justify-between items-center"},O={class:"text-gray-400"},T={class:"text-pink-500 font-medium"},$={class:"max-w-4xl"},D={key:0,class:"flex justify-center py-20"},E={key:1,class:"text-center py-20"},I={key:2,class:"space-y-4"},K={class:"flex justify-between items-start mb-2"},P={class:"text-white font-medium"},G={class:"text-gray-400 text-sm mt-1"},J={class:"flex justify-between items-end"},Q={class:"text-sm text-gray-400"},U={key:0},W={class:"text-right"},X={class:"text-pink-500 text-xl font-bold"},Y={key:3,class:"mt-6 flex justify-center"},Z={class:"flex gap-2"},ee=["disabled"],te={class:"flex items-center gap-2"},se={class:"text-gray-400 text-sm"},ae=["disabled"],oe={key:4,class:"mt-6 text-center sm:hidden"},re={key:5,class:"mt-6 flex justify-center"},de={__name:"RechargeHistoryView",setup(le){const b=M(),f=C(),n=p([]),s=p(null),d=p(!1),u=p(!1),k=j(()=>n.value.length),v=async(i=1,a=!1)=>{var c;a?u.value=!0:d.value=!0;try{const t=await H(i,10);t.success&&(a?n.value=[...n.value,...t.data]:n.value=t.data,s.value=t.pagination)}catch(t){console.error("Failed to load recharge history:",t),((c=t.response)==null?void 0:c.status)===401&&b.push({path:"/login",query:{redirect:"/recharge-history"}})}finally{d.value=!1,u.value=!1}},y=i=>{i<1||i>s.value.last_page||(v(i),window.scrollTo(0,0))},w=()=>{s.value&&s.value.current_page<s.value.last_page&&v(s.value.current_page+1,!0)};return B(()=>{if(!f.isLoggedIn){b.push({path:"/login",query:{redirect:"/recharge-history"}});return}v()}),(i,a)=>{const c=N("router-link");return o(),V(L,{title:"充值记录"},{default:x(()=>[e("div",R,[e("div",q,[e("div",z,[e("div",null,[a[4]||(a[4]=e("h1",{class:"text-2xl font-bold text-white mb-2"},"充值记录",-1)),e("p",O,[a[2]||(a[2]=_(" 共 ",-1)),e("span",T,r(k.value),1),a[3]||(a[3]=_(" 条记录 ",-1))])])])]),e("div",$,[d.value&&!n.value.length?(o(),l("div",D,[h(m)])):!d.value&&!n.value.length?(o(),l("div",E,[a[6]||(a[6]=e("div",{class:"text-gray-400"},[e("svg",{class:"w-20 h-20 mx-auto mb-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("p",{class:"text-lg mb-4"},"暂无充值记录")],-1)),h(c,{to:"/vip",class:"inline-block px-6 py-2 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white rounded-lg transition-all cursor-pointer shadow-lg hover:shadow-xl"},{default:x(()=>[...a[5]||(a[5]=[_(" 立即充值 ",-1)])]),_:1})])):(o(),l("div",I,[(o(!0),l(S,null,A(n.value,t=>(o(),l("div",{key:t.id,class:"bg-gray-900/60 backdrop-blur-sm rounded-lg p-4 border border-white/10 hover:border-pink-500/30 transition-all"},[e("div",K,[e("div",null,[e("h3",P,r(t.product_name),1),e("p",G,"订单号："+r(t.order_reference),1)]),e("span",{class:F(["px-2 py-1 text-xs rounded font-medium",t.status_code==="success"?"bg-green-900/50 text-green-400 border border-green-800":t.status_code==="pending"?"bg-yellow-900/50 text-yellow-400 border border-yellow-800":"bg-red-900/50 text-red-400 border border-red-800"])},r(t.status),3)]),e("div",J,[e("div",Q,[e("p",null,"支付方式："+r(t.payment_method),1),e("p",null,"创建时间："+r(t.created_at),1),t.completed_at?(o(),l("p",U,"完成时间："+r(t.completed_at),1)):g("",!0)]),e("div",W,[e("span",X,"¥"+r(t.product_price),1)])])]))),128))])),s.value&&s.value.last_page>1?(o(),l("div",Y,[e("div",Z,[e("button",{onClick:a[0]||(a[0]=t=>y(s.value.current_page-1)),disabled:s.value.current_page===1,class:"px-3 py-1 bg-gray-800/50 backdrop-blur-sm text-gray-400 rounded border border-white/10 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700/50 hover:border-white/20 transition-all cursor-pointer"}," 上一页 ",8,ee),e("div",te,[e("span",se," 第 "+r(s.value.current_page)+" / "+r(s.value.last_page)+" 页 ",1)]),e("button",{onClick:a[1]||(a[1]=t=>y(s.value.current_page+1)),disabled:s.value.current_page===s.value.last_page,class:"px-3 py-1 bg-gray-800/50 backdrop-blur-sm text-gray-400 rounded border border-white/10 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700/50 hover:border-white/20 transition-all cursor-pointer"}," 下一页 ",8,ae)])])):g("",!0),s.value&&s.value.current_page<s.value.last_page&&!u.value?(o(),l("div",oe,[e("button",{onClick:w,class:"px-6 py-2 bg-gray-800/50 backdrop-blur-sm text-gray-300 rounded-lg border border-white/10 hover:bg-gray-700/50 hover:border-white/20 transition-all cursor-pointer"}," 加载更多 ")])):g("",!0),u.value?(o(),l("div",re,[h(m,{size:"small"})])):g("",!0)])])]),_:1})}}};export{de as default};
