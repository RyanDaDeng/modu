import{_ as V,q as D,r as u,o as T,c as _,w as B,A as L,W as N,a,b as l,d as s,e as b,F as g,h as m,G as y,C as p,H as W,f as F,L as S}from"./index-DAir1iQL.js";import{_ as U}from"./ComicCard-y9lwEhRl.js";const $={class:"container mx-auto px-4 py-6"},j={class:"bg-gray-800 rounded-lg p-2 sm:p-4 mb-4"},z={class:"flex gap-2 mb-3"},A=["onClick"],q={class:"flex overflow-x-auto gap-1 sm:gap-2 pb-1 -mx-2 px-2 sm:mx-0 sm:px-0 no-scrollbar"},E=["onClick"],G={key:0,class:"ml-1 text-[10px] sm:text-xs"},H={key:0,class:"flex justify-center py-12"},I={key:1},M={class:"text-lg sm:text-xl font-semibold text-white mb-3"},O={class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-6 2xl:grid-cols-7 gap-2 sm:gap-3 md:gap-4"},J={key:2,class:"text-center py-12"},K={name:"UpdatesView"},P=Object.assign(K,{setup(Q){const h=[{label:"全部",value:"all"},{label:"日漫",value:"manga"},{label:"韩漫",value:"hanman"}],x=[{label:"周一",value:1},{label:"周二",value:2},{label:"周三",value:3},{label:"周四",value:4},{label:"周五",value:5},{label:"周六",value:6},{label:"周日",value:7},{label:"已完结",value:0}],d=D(()=>{const e=new Date().getDay();return e===0?7:e}),c=u("all"),i=u(d.value),r=u([]),n=u(!1),f=e=>{let o=null;return e.image&&e.image.startsWith("/media/")?o=null:e.image&&e.image.startsWith("http")&&(o=e.image),{id:e.id,name:e.name,title:e.name,author:e.author,image:o,category:e.category?.title||"",description:e.description,watched:e.liked?1:0,liked:e.liked?1:0,tags:[]}},v=async()=>{if(!n.value){n.value=!0,r.value=[];try{const e=await N(c.value,i.value,1);e?.list&&(r.value=e.list)}catch(e){console.error("Failed to load comics:",e)}finally{n.value=!1}}},k=e=>{c.value=e,v()},w=e=>{i.value=e,v()};return T(()=>{v()}),(e,o)=>(a(),_(L,{title:"更新"},{default:B(()=>[l("div",$,[l("div",j,[l("div",z,[(a(),s(g,null,m(h,t=>l("button",{key:t.value,onClick:C=>k(t.value),class:y(["px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-xs sm:text-sm font-medium transition-all",c.value===t.value?"bg-pink-500 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},p(t.label),11,A)),64))]),l("div",q,[(a(),s(g,null,m(x,t=>l("button",{key:t.value,onClick:C=>w(t.value),class:y(["flex-shrink-0 px-2 sm:px-4 py-1 sm:py-2 rounded-md text-xs sm:text-sm font-medium transition-all whitespace-nowrap",i.value===t.value?"bg-pink-500 text-white":t.value===d.value?"bg-orange-500 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},[W(p(t.label)+" ",1),t.value===d.value?(a(),s("span",G," (今日) ")):b("",!0)],10,E)),64))])]),n.value?(a(),s("div",H,[F(S)])):r.value.length>0?(a(),s("div",I,[l("h2",M,p(x.find(t=>t.value===i.value)?.label)+"更新 ",1),l("div",O,[(a(!0),s(g,null,m(r.value,t=>(a(),_(U,{key:t.id,comic:f(t)},null,8,["comic"]))),128))])])):n.value?b("",!0):(a(),s("div",J,[...o[0]||(o[0]=[l("p",{class:"text-gray-400"},"暂无更新",-1)])]))])]),_:1}))}}),Y=V(P,[["__scopeId","data-v-31b88fec"]]);export{Y as default};
