import{u as k,z as w,c as b,a as c,w as p,b as e,d as a,e as r,C as i,H as u,D as g,E as h,F as C,h as D,N as M}from"./index-C8pMiQn-.js";const $={class:"relative aspect-[3/4] bg-gray-700"},S=["src","alt"],j={key:0,class:"absolute top-1 left-1 sm:top-2 sm:left-2"},B={class:"px-1.5 sm:px-2 py-0.5 sm:py-1 text-[10px] sm:text-xs text-white bg-pink-500/80 backdrop-blur rounded-full"},z={key:1,class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-1 sm:p-2"},I={class:"flex items-center justify-between text-white text-[10px] sm:text-xs"},N={class:"flex items-center gap-0.5 sm:gap-1"},E={key:0,class:"flex items-center gap-0.5 sm:gap-1"},A={class:"p-1.5 sm:p-2"},F={class:"text-[10px] sm:text-xs font-semibold text-white truncate"},L={key:0,class:"text-[10px] sm:text-xs text-gray-400 mt-0.5 truncate"},V={key:1,class:"text-[10px] sm:text-xs text-gray-400 mt-0.5 truncate"},q={key:2,class:"hidden sm:block text-xs text-gray-500 mt-1 line-clamp-2"},H={key:3,class:"hidden sm:flex flex-wrap gap-1 mt-1"},T={__name:"ComicCard",props:{comic:{type:Object,required:!0},showCollectionDate:{type:Boolean,default:!1}},setup(t){k();const m=t,x=()=>m.comic.image?m.comic.image:`${M()}/media/albums/${m.comic.id}_3x4.jpg`,f=n=>{n.target.src="/default.jpeg"},y=n=>{const o=new Date(n),l=new Date-o,s=Math.floor(l/(1e3*60*60*24));return s===0?"今天":s===1?"昨天":s<7?`${s}天前`:s<30?`${Math.floor(s/7)}周前`:s<365?`${Math.floor(s/30)}个月前`:`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}-${String(o.getDate()).padStart(2,"0")}`};return(n,o)=>{const d=w("router-link");return c(),b(d,{to:`/chapter/${t.comic.id}`,class:"block bg-gray-800 rounded-lg overflow-hidden hover:ring-2 hover:ring-pink-500 transition-all group"},{default:p(()=>[e("div",$,[e("img",{src:x(),alt:t.comic.name,class:"w-full h-full object-cover group-hover:opacity-90 transition-opacity",loading:"lazy",onError:f},null,40,S),t.comic.category?(c(),a("div",j,[e("span",B,i(typeof t.comic.category=="object"?t.comic.category.title||t.comic.category.name||"":t.comic.category),1)])):r("",!0),t.comic.watched?(c(),a("div",z,[e("div",I,[e("span",N,[o[0]||(o[0]=e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),e("path",{"fill-rule":"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"})],-1)),u(" "+i(g(h)(t.comic.watched)),1)]),t.comic.liked?(c(),a("span",E,[o[1]||(o[1]=e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"})],-1)),u(" "+i(g(h)(t.comic.liked)),1)])):r("",!0)])])):r("",!0)]),e("div",A,[e("h3",F,i(t.comic.name||t.comic.title||"Unknown"),1),t.showCollectionDate&&t.comic.created_at?(c(),a("p",L," 收藏于 "+i(y(t.comic.created_at)),1)):t.comic.author||t.comic.authors?(c(),a("p",V,i(t.comic.author||(Array.isArray(t.comic.authors)?t.comic.authors.join(", "):t.comic.authors)||""),1)):r("",!0),t.comic.description&&typeof t.comic.description=="string"?(c(),a("div",q,i(t.comic.description),1)):r("",!0),t.comic.tags&&t.comic.tags.length?(c(),a("div",H,[(c(!0),a(C,null,D(t.comic.tags.slice(0,2),l=>(c(),a("span",{key:l,class:"px-1.5 py-0.5 text-xs bg-gray-700 text-gray-300 rounded"},i(l),1))),128))])):r("",!0)])]),_:1},8,["to"])}}};export{T as _};
