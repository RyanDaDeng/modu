import{i as e,r as t,j as a,o as r,l as s,c as l,w as d,M as o,a as n,b as i,d as c,e as u,v as p,x,f as g,L as y,F as b,h as v,O as m}from"./index-bTbxLbx9.js";import{a as h}from"./vip-bV9AnOTN.js";import{G as f}from"./GeneralLayout-D3jsw9AT.js";const k={class:"container mx-auto px-4 py-6"},w={class:"mb-6"},_={class:"flex justify-between items-center"},j={class:"text-gray-400"},C={class:"text-pink-500 font-medium"},M={key:0,class:"flex justify-center py-20"},L={key:1,class:"text-center py-20"},q={key:2,class:"hidden md:block bg-gray-800/50 backdrop-blur-sm rounded-lg border border-gray-700/50 overflow-hidden"},G={class:"w-full"},H={class:"divide-y divide-gray-700"},V={class:"px-4 py-3 text-sm text-gray-300 font-mono"},z={class:"px-4 py-3 text-sm text-white"},B={class:"px-4 py-3 text-sm font-medium text-pink-400"},F={class:"px-4 py-3 text-sm text-gray-300"},I={class:"px-4 py-3"},O={class:"px-4 py-3 text-sm text-gray-400"},R={key:0,class:"text-xs text-gray-500"},T={key:3,class:"md:hidden space-y-4"},A={class:"flex justify-between items-start mb-2"},D={class:"text-white font-medium"},E={class:"text-gray-400 text-sm mt-1"},J={class:"flex justify-between items-end"},K={class:"text-sm text-gray-400"},N={key:0},P={class:"text-right"},Q={class:"text-pink-500 text-xl font-bold"},S={key:4,class:"hidden md:flex mt-6 justify-center"},U={class:"flex gap-2"},W=["disabled"],X={class:"flex items-center gap-2 px-4"},Y={class:"text-gray-300"},Z=["disabled"],$={key:5,class:"mt-6 text-center md:hidden"},ee={key:6,class:"mt-6 flex justify-center"},te={__name:"RechargeHistoryView",setup(te){const ae=s(),re=e(),se=t([]),le=t(null),de=t(!1),oe=t(!1),ne=a(()=>se.value.length),ie=async(e=1,t=!1)=>{t?oe.value=!0:de.value=!0;try{const a=await h(e,10);a.success&&(se.value=t?[...se.value,...a.data]:a.data,le.value=a.pagination)}catch(a){401===a.response?.status&&ae.push({path:"/login",query:{redirect:"/recharge-history"}})}finally{de.value=!1,oe.value=!1}},ce=e=>{e<1||e>le.value.last_page||(ie(e),window.scrollTo(0,0))},ue=()=>{le.value&&le.value.current_page<le.value.last_page&&ie(le.value.current_page+1,!0)};return r(()=>{re.isLoggedIn?ie():ae.push({path:"/login",query:{redirect:"/recharge-history"}})}),(e,t)=>{const a=o("router-link");return n(),l(f,{title:"充值记录"},{default:d(()=>[i("div",k,[i("div",w,[i("div",_,[i("div",null,[t[4]||(t[4]=i("h1",{class:"text-2xl font-bold text-white mb-2"},"充值记录",-1)),i("p",j,[t[2]||(t[2]=p(" 共 ",-1)),i("span",C,x(ne.value),1),t[3]||(t[3]=p(" 条记录 ",-1))])])])]),de.value&&!se.value.length?(n(),c("div",M,[g(y)])):de.value||se.value.length?se.value.length?(n(),c("div",q,[i("table",G,[t[7]||(t[7]=i("thead",{class:"bg-gray-700/50 border-b border-gray-700"},[i("tr",null,[i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"},"订单号"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"},"产品名称"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"},"金额"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"},"支付方式"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"},"状态"),i("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"},"创建时间")])],-1)),i("tbody",H,[(n(!0),c(b,null,v(se.value,e=>(n(),c("tr",{key:e.id,class:"hover:bg-gray-700/30"},[i("td",V,x(e.order_reference),1),i("td",z,x(e.product_name),1),i("td",B,"¥"+x(e.product_price),1),i("td",F,x(e.payment_method),1),i("td",I,[i("span",{class:m(["px-2 py-1 text-xs rounded font-medium","success"===e.status_code?"bg-green-900/50 text-green-400 border border-green-800":"pending"===e.status_code?"bg-yellow-900/50 text-yellow-400 border border-yellow-800":"bg-red-900/50 text-red-400 border border-red-800"])},x(e.status),3)]),i("td",O,[i("div",null,x(e.created_at),1),e.completed_at?(n(),c("div",R,"完成: "+x(e.completed_at),1)):u("",!0)])]))),128))])])])):u("",!0):(n(),c("div",L,[t[6]||(t[6]=i("div",{class:"text-gray-400"},[i("svg",{class:"w-20 h-20 mx-auto mb-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),i("p",{class:"text-lg mb-4"},"暂无充值记录")],-1)),g(a,{to:"/vip",class:"inline-block px-6 py-2 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white rounded-lg transition-all cursor-pointer shadow-lg hover:shadow-xl"},{default:d(()=>[...t[5]||(t[5]=[p(" 立即充值 ",-1)])]),_:1})])),se.value.length?(n(),c("div",T,[(n(!0),c(b,null,v(se.value,e=>(n(),c("div",{key:e.id,class:"bg-gray-900/60 backdrop-blur-sm rounded-lg p-4 border border-white/10 hover:border-pink-500/30 transition-all"},[i("div",A,[i("div",null,[i("h3",D,x(e.product_name),1),i("p",E,"订单号："+x(e.order_reference),1)]),i("span",{class:m(["px-2 py-1 text-xs rounded font-medium","success"===e.status_code?"bg-green-900/50 text-green-400 border border-green-800":"pending"===e.status_code?"bg-yellow-900/50 text-yellow-400 border border-yellow-800":"bg-red-900/50 text-red-400 border border-red-800"])},x(e.status),3)]),i("div",J,[i("div",K,[i("p",null,"支付方式："+x(e.payment_method),1),i("p",null,"创建时间："+x(e.created_at),1),e.completed_at?(n(),c("p",N,"完成时间："+x(e.completed_at),1)):u("",!0)]),i("div",P,[i("span",Q,"¥"+x(e.product_price),1)])])]))),128))])):u("",!0),le.value&&le.value.last_page>1?(n(),c("div",S,[i("div",U,[i("button",{onClick:t[0]||(t[0]=e=>ce(le.value.current_page-1)),disabled:1===le.value.current_page,class:"px-4 py-2 bg-gray-800/50 backdrop-blur-sm text-gray-300 rounded border border-gray-700 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700/50 hover:border-gray-600 transition-all cursor-pointer"}," 上一页 ",8,W),i("div",X,[i("span",Y," 第 "+x(le.value.current_page)+" / "+x(le.value.last_page)+" 页 ",1)]),i("button",{onClick:t[1]||(t[1]=e=>ce(le.value.current_page+1)),disabled:le.value.current_page===le.value.last_page,class:"px-4 py-2 bg-gray-800/50 backdrop-blur-sm text-gray-300 rounded border border-gray-700 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700/50 hover:border-gray-600 transition-all cursor-pointer"}," 下一页 ",8,Z)])])):u("",!0),le.value&&le.value.current_page<le.value.last_page&&!oe.value?(n(),c("div",$,[i("button",{onClick:ue,class:"px-6 py-2 bg-gray-800/50 backdrop-blur-sm text-gray-300 rounded-lg border border-white/10 hover:bg-gray-700/50 hover:border-white/20 transition-all cursor-pointer"}," 加载更多 ")])):u("",!0),oe.value?(n(),c("div",ee,[g(y,{size:"small"})])):u("",!0)])]),_:1})}}};export{te as default};
