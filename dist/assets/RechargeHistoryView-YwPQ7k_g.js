import{a0 as k,r as g,o as w,j as C,c as j,w as x,A as M,z as V,a as r,b as e,d as l,e as p,f as v,L as b,H as B,F as L,h as H,C as n,G as N}from"./index-Bsa8ybVw.js";import{a as S}from"./vip-GbR3qpo5.js";const z={class:"container mx-auto px-4 py-6 max-w-4xl"},A={key:0,class:"flex justify-center py-20"},F={key:1,class:"text-center py-20"},R={key:2,class:"space-y-4"},q={class:"flex justify-between items-start mb-2"},T={class:"text-white font-medium"},$={class:"text-gray-400 text-sm mt-1"},D={class:"flex justify-between items-end"},E={class:"text-sm text-gray-400"},G={key:0},I={class:"text-right"},O={class:"text-pink-500 text-xl font-bold"},P={key:3,class:"mt-6 flex justify-center"},J={class:"flex gap-2"},K=["disabled"],Q={class:"flex items-center gap-2"},U={class:"text-gray-400 text-sm"},W=["disabled"],X={key:4,class:"mt-6 text-center sm:hidden"},Y={key:5,class:"mt-6 flex justify-center"},se={__name:"RechargeHistoryView",setup(Z){const y=C(),m=k(),i=g([]),t=g(null),c=g(!1),u=g(!1),_=async(d=1,a=!1)=>{a?u.value=!0:c.value=!0;try{const o=await S(d,10);o.success&&(a?i.value=[...i.value,...o.data]:i.value=o.data,t.value=o.pagination)}catch(o){console.error("Failed to load recharge history:",o),o.response?.status===401&&y.push({path:"/login",query:{redirect:"/recharge-history"}})}finally{c.value=!1,u.value=!1}},h=d=>{d<1||d>t.value.last_page||(_(d),window.scrollTo(0,0))},f=()=>{t.value&&t.value.current_page<t.value.last_page&&_(t.value.current_page+1,!0)};return w(()=>{if(!m.isLoggedIn){y.push({path:"/login",query:{redirect:"/recharge-history"}});return}_()}),(d,a)=>{const o=V("router-link");return r(),j(M,{title:"充值记录"},{default:x(()=>[e("div",z,[c.value&&!i.value.length?(r(),l("div",A,[v(b)])):!c.value&&!i.value.length?(r(),l("div",F,[a[3]||(a[3]=e("div",{class:"text-gray-400"},[e("svg",{class:"w-20 h-20 mx-auto mb-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("p",{class:"text-lg mb-4"},"暂无充值记录")],-1)),v(o,{to:"/vip",class:"inline-block px-6 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600 transition-colors cursor-pointer"},{default:x(()=>[...a[2]||(a[2]=[B(" 立即充值 ",-1)])]),_:1})])):(r(),l("div",R,[(r(!0),l(L,null,H(i.value,s=>(r(),l("div",{key:s.id,class:"bg-gray-800 rounded-lg p-4 border border-gray-700"},[e("div",q,[e("div",null,[e("h3",T,n(s.product_name),1),e("p",$,"订单号："+n(s.order_reference),1)]),e("span",{class:N(["px-2 py-1 text-xs rounded font-medium",s.status_code==="success"?"bg-green-900/50 text-green-400 border border-green-800":s.status_code==="pending"?"bg-yellow-900/50 text-yellow-400 border border-yellow-800":"bg-red-900/50 text-red-400 border border-red-800"])},n(s.status),3)]),e("div",D,[e("div",E,[e("p",null,"支付方式："+n(s.payment_method),1),e("p",null,"创建时间："+n(s.created_at),1),s.completed_at?(r(),l("p",G,"完成时间："+n(s.completed_at),1)):p("",!0)]),e("div",I,[e("span",O,"¥"+n(s.product_price),1)])])]))),128))])),t.value&&t.value.last_page>1?(r(),l("div",P,[e("div",J,[e("button",{onClick:a[0]||(a[0]=s=>h(t.value.current_page-1)),disabled:t.value.current_page===1,class:"px-3 py-1 bg-gray-800 text-gray-400 rounded border border-gray-700 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700 cursor-pointer"}," 上一页 ",8,K),e("div",Q,[e("span",U," 第 "+n(t.value.current_page)+" / "+n(t.value.last_page)+" 页 ",1)]),e("button",{onClick:a[1]||(a[1]=s=>h(t.value.current_page+1)),disabled:t.value.current_page===t.value.last_page,class:"px-3 py-1 bg-gray-800 text-gray-400 rounded border border-gray-700 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700 cursor-pointer"}," 下一页 ",8,W)])])):p("",!0),t.value&&t.value.current_page<t.value.last_page&&!u.value?(r(),l("div",X,[e("button",{onClick:f,class:"px-6 py-2 bg-gray-800 text-gray-300 rounded-lg border border-gray-700 hover:bg-gray-700 cursor-pointer"}," 加载更多 ")])):p("",!0),u.value?(r(),l("div",Y,[v(b,{size:"small"})])):p("",!0)])]),_:1})}}};export{se as default};
