import{i as a,C as t,r as e,o as s,Y as o,c as l,w as r,l as i,M as n,a as c,b as d,d as u,v,x as p,f as g,L as m,F as h,h as x}from"./index-Dk5K0Uig.js";import{g as y}from"./videoCollection-CuSUpTes.js";import{V as f,g as w}from"./VideoLayout-CbyKK0LD.js";import{_ as b}from"./Pagination-Drr-IQOn.js";const k={class:"container mx-auto px-4 py-6"},_={class:"mb-6"},j={class:"text-gray-400"},V={class:"text-pink-500 font-medium"},C={key:0,class:"flex justify-center py-20"},M={key:1,class:"text-center py-12"},L={key:2},z={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"},A={class:"relative bg-gray-900/60 backdrop-blur-sm border border-white/10 rounded-lg overflow-hidden group-hover:border-pink-500/30 transition-all"},B={class:"relative overflow-hidden bg-gray-800/50 aspect-video"},F=["src","alt"],W={class:"p-2"},q={class:"text-xs sm:text-sm font-semibold text-white line-clamp-2 group-hover:text-pink-400 transition-colors"},E={class:"mt-8"},P={__name:"VideoFavoritesView",setup(P){const T=i(),Y=a(),$=t(),D=e([]),G=e(!1),H=e(1),I=e(1),J=e(0),K=e(""),N=a=>{a.target.src="/img_6.png"},O=async(a=1)=>{G.value=!0;try{const t=await y(a,24);D.value=t.data||[],H.value=t.current_page||1,I.value=Math.max(t.last_page||1,1),J.value=t.total||0}catch(t){$.error("加载收藏列表失败"),I.value=1}finally{G.value=!1}},Q=a=>{O(a),window.scrollTo(0,0)},R=()=>{Y.isAuthenticated?O():T.push({path:"/login",query:{redirect:"/video/favorites"}})};return s(async()=>{await(async()=>{try{const a=await w(),t=a.data||a;t.cdn_domain&&(K.value=t.cdn_domain)}catch(a){}})(),R()}),o(()=>{R()}),(a,t)=>{const e=n("router-link");return c(),l(f,{title:"我的收藏"},{default:r(()=>[d("div",k,[d("div",_,[t[2]||(t[2]=d("h1",{class:"text-2xl font-bold text-white mb-2"},"我的视频收藏",-1)),d("p",j,[t[0]||(t[0]=v(" 共 ",-1)),d("span",V,p(J.value),1),t[1]||(t[1]=v(" 个视频 ",-1))])]),G.value?(c(),u("div",C,[g(m)])):D.value.length?(c(),u("div",L,[d("div",z,[(c(!0),u(h,null,x(D.value,a=>(c(),l(e,{key:a.video_id,to:`/video/${a.video_id}`,class:"block group"},{default:r(()=>{return[d("div",A,[d("div",B,[d("img",{src:(e=a.cover,e&&K.value?e.startsWith("http://")||e.startsWith("https://")?e:K.value+e:e||"/img_6.png"),alt:a.name,class:"w-full h-full object-cover group-hover:opacity-90 transition-opacity",onError:N,loading:"lazy"},null,40,F),t[6]||(t[6]=d("div",{class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300"},[d("div",{class:"w-12 h-12 sm:w-14 sm:h-14 bg-black/60 rounded-full flex items-center justify-center"},[d("svg",{class:"w-5 h-5 sm:w-6 sm:h-6 text-white ml-1",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})])])],-1))]),d("div",W,[d("h3",q,p(a.name),1)])])];var e}),_:2},1032,["to"]))),128))]),d("div",E,[g(b,{"current-page":H.value,"total-pages":Math.max(I.value,2),onChange:Q},null,8,["current-page","total-pages"])])])):(c(),u("div",M,[t[4]||(t[4]=d("svg",{class:"w-24 h-24 text-gray-600 mx-auto mb-4",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})],-1)),t[5]||(t[5]=d("p",{class:"text-gray-400 mb-4"},"还没有收藏任何视频",-1)),g(e,{to:"/video",class:"inline-block px-6 py-2 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white rounded-lg transition-all cursor-pointer shadow-lg hover:shadow-xl"},{default:r(()=>[...t[3]||(t[3]=[v(" 去看看在线视频 ",-1)])]),_:1})]))])]),_:1})}}};export{P as default};
