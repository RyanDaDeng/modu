import{z as C,K as B,c as M,a as s,w as $,b as o,d as r,e as l,v as c,t as u,s as x,O as p,F as h,h as z,H as A}from"./index-Brj9CnMw.js";const I={class:"relative bg-gray-900/60 backdrop-blur-sm border border-white/10 rounded-lg overflow-hidden group-hover:border-pink-500/30 transition-all duration-300 hover:shadow-xl hover:shadow-pink-500/20 flex flex-col"},S={class:"relative aspect-[3/4] bg-gray-800/50 overflow-hidden flex-shrink-0"},j=["src","alt","loading"],N={key:0,class:"absolute top-1 left-1 sm:top-2 sm:left-2 z-10"},U={class:"px-1.5 sm:px-2 py-0.5 sm:py-1 text-[10px] sm:text-xs bg-pink-600/70 backdrop-blur-sm border border-pink-400/60 text-white font-medium rounded-full shadow-lg"},E={key:1,class:"absolute top-1 right-1 sm:top-2 sm:right-2 z-10"},L={class:"px-1.5 sm:px-2 py-0.5 sm:py-1 text-[10px] sm:text-xs bg-blue-600/70 backdrop-blur-sm border border-blue-400/60 text-white font-medium rounded-full shadow-lg"},T={key:2,class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-1 sm:p-2"},H={class:"flex items-center justify-between text-white text-[10px] sm:text-xs"},V={key:0,class:"flex items-center gap-0.5 sm:gap-1"},F={key:1,class:"flex items-center gap-0.5 sm:gap-1"},O={key:3,class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-1 sm:p-2"},q={class:"text-white text-[10px] sm:text-xs text-center"},K={class:"p-1.5 sm:p-2 md:p-3 flex flex-col"},Y={class:"text-xs sm:text-sm font-semibold text-white line-clamp-1 group-hover:text-pink-400 transition-colors truncate"},G={class:"text-[10px] sm:text-xs text-gray-400 mt-0.5 truncate min-h-[1rem]"},J={key:0,class:"text-[10px] sm:text-xs text-gray-500 mt-1 line-clamp-2 hidden sm:block min-h-[2rem]"},P={key:1,class:"hidden sm:flex flex-wrap gap-1 mt-1 min-h-[1.25rem]"},Q={__name:"UnifiedComicCard",props:{comic:{type:Object,required:!0},showCategory:{type:Boolean,default:!0},showEpisode:{type:Boolean,default:!1},showStats:{type:Boolean,default:!0},showAuthor:{type:Boolean,default:!0},showDescription:{type:Boolean,default:!1},showTags:{type:Boolean,default:!1},showCollectionDate:{type:Boolean,default:!1},showUpdateDate:{type:Boolean,default:!1},lazyLoad:{type:Boolean,default:!0}},setup(t){const a=t,y=()=>{if(a.comic.image)return a.comic.image;const n=A();return"".concat(n,"/media/albums/").concat(a.comic.id,"_3x4.jpg")},w=n=>{n.target.src="/default.jpeg"},g=()=>a.comic.category?typeof a.comic.category=="object"?a.comic.category.title||a.comic.category.name||"":a.comic.category:"",b=()=>a.comic.author?Array.isArray(a.comic.author)?a.comic.author.join(", "):a.comic.author:a.comic.authors?Array.isArray(a.comic.authors)?a.comic.authors.join(", "):a.comic.authors:"",v=n=>{const e=document.createElement("DIV");return e.innerHTML=n||"",e.textContent||e.innerText||""},k=n=>{const e=new Date(n),d=new Date-e,i=Math.floor(d/(1e3*60*60*24));if(i===0)return"今天";if(i===1)return"昨天";if(i<7)return"".concat(i,"天前");if(i<30){const m=Math.floor(i/7);return"".concat(m,"周前")}else if(i<365){const m=Math.floor(i/30);return"".concat(m,"个月前")}else return"".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0"))},D=n=>{const e=new Date(n),d=new Date-e,i=Math.floor(d/(1e3*60*60)),m=Math.floor(d/(1e3*60*60*24));return i<1?"刚刚更新":i<24?"".concat(i,"小时前"):m===1?"昨天":m<7?"".concat(m,"天前"):"".concat(e.getMonth()+1,"月").concat(e.getDate(),"日")};return(n,e)=>{const f=B("router-link");return s(),M(f,{to:"/chapter/".concat(t.comic.id),class:"block relative group"},{default:$(()=>[e[3]||(e[3]=o("div",{class:"absolute inset-0 bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 rounded-lg opacity-0 group-hover:opacity-50 blur-sm transition-all duration-300"},null,-1)),o("div",I,[o("div",S,[o("img",{src:y(),alt:t.comic.name||t.comic.title,class:"absolute inset-0 w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",loading:t.lazyLoad?"lazy":"eager",onError:w},null,40,j),e[2]||(e[2]=o("div",{class:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),t.showCategory&&g()?(s(),r("div",N,[o("span",U,c(g()),1)])):l("",!0),t.showEpisode&&t.comic.episode?(s(),r("div",E,[o("span",L,c(t.comic.episode)+"话 ",1)])):l("",!0),t.showStats&&(t.comic.watched||t.comic.liked)?(s(),r("div",T,[o("div",H,[t.comic.watched?(s(),r("span",V,[e[0]||(e[0]=o("svg",{class:"w-3 h-3 sm:w-4 sm:h-4",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),o("path",{"fill-rule":"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"})],-1)),u(" "+c(x(p)(t.comic.watched)),1)])):l("",!0),t.comic.liked?(s(),r("span",F,[e[1]||(e[1]=o("svg",{class:"w-3 h-3 sm:w-4 sm:h-4",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"})],-1)),u(" "+c(x(p)(t.comic.liked)),1)])):l("",!0)])])):l("",!0),t.showUpdateDate&&t.comic.datetime_updated?(s(),r("div",O,[o("div",q,c(D(t.comic.datetime_updated)),1)])):l("",!0)]),o("div",K,[o("h3",Y,c(t.comic.name||t.comic.title||"Unknown"),1),o("p",G,[t.showCollectionDate&&t.comic.created_at?(s(),r(h,{key:0},[u(" 收藏于 "+c(k(t.comic.created_at)),1)],64)):t.showAuthor?(s(),r(h,{key:1},[u(c(b()||"N/A"),1)],64)):(s(),r(h,{key:2},[u("   ")],64))]),t.showDescription?(s(),r("p",J,c(t.comic.description?v(t.comic.description):"N/A"),1)):l("",!0),t.showTags?(s(),r("div",P,[(s(!0),r(h,null,z(t.comic.tags&&t.comic.tags.length?t.comic.tags.slice(0,2):["N/A"],d=>(s(),r("span",{key:d,class:"px-1.5 py-0.5 text-[10px] bg-gray-800/70 backdrop-blur-sm border border-white/10 text-gray-300 rounded-full"},c(d),1))),128))])):l("",!0)])])]),_:1},8,["to"])}}},W=C(Q,[["__scopeId","data-v-d3497c44"]]);export{W as U};
